import{s as ae,e as E,t as Q,a as O,b as $,f as w,g as B,d as z,c as V,o as S,i as k,j as M,k as f,l as R,n as he,h as we,p as re,m as _e,J as De,D as F,r as W,O as ze,P as Y,w as de,F as Ne,q as ve,Q as ge}from"../chunks/scheduler.CNkPwobW.js";import{S as ie,i as ce,g as Z,b as L,e as ee,t as A,c as te,a as le,m as ne,d as oe}from"../chunks/index.RwQZZxsy.js";import{e as U}from"../chunks/each.D6YF6ztN.js";import{P as Oe}from"../chunks/public.C2OzITeI.js";import{q as se}from"../chunks/stores.B5uCne11.js";import{b as me}from"../chunks/paths.D-6-MloR.js";import{I as Pe}from"../chunks/Icon.BaWJvdsO.js";import{p as Ve}from"../chunks/stores.BILOGc_A.js";function pe(n){let e=`(${n[1][n[2].catalog].incorrect})`,l;return{c(){l=Q(e)},l(t){l=B(t,e)},m(t,r){M(t,l,r)},p(t,r){r&6&&e!==(e=`(${t[1][t[2].catalog].incorrect})`)&&R(l,e)},d(t){t&&z(l)}}}function He(n){let e,l,t,r=n[0].length+"",a,o,_,b="beantwortete Fragen",C,i,x,c=`${n[3]}%`,d,m,I,p,v="richtige Antworten",D,u,y,h=n[2].catalog+"",s,q,P,g,j="meisten Fehler in Fragenkatalog",H=n[2].catalog!=="-"&&pe(n);return{c(){e=E("div"),l=E("div"),t=E("div"),a=Q(r),o=O(),_=E("h3"),_.textContent=b,C=O(),i=E("div"),x=E("div"),d=Q(c),I=O(),p=E("h3"),p.textContent=v,D=O(),u=E("div"),y=E("div"),s=Q(h),q=O(),H&&H.c(),P=O(),g=E("h3"),g.textContent=j,this.h()},l(N){e=$(N,"DIV",{class:!0});var T=w(e);l=$(T,"DIV",{});var J=w(l);t=$(J,"DIV",{class:!0});var ue=w(t);a=B(ue,r),ue.forEach(z),o=V(J),_=$(J,"H3",{class:!0,"data-svelte-h":!0}),S(_)!=="svelte-128dyt3"&&(_.textContent=b),J.forEach(z),C=V(T),i=$(T,"DIV",{class:!0});var G=w(i);x=$(G,"DIV",{class:!0,style:!0,role:!0});var fe=w(x);d=B(fe,c),fe.forEach(z),I=V(G),p=$(G,"H3",{class:!0,"data-svelte-h":!0}),S(p)!=="svelte-grrgqt"&&(p.textContent=v),G.forEach(z),D=V(T),u=$(T,"DIV",{class:!0});var X=w(u);y=$(X,"DIV",{class:!0});var K=w(y);s=B(K,h),q=V(K),H&&H.l(K),K.forEach(z),P=V(X),g=$(X,"H3",{class:!0,"data-svelte-h":!0}),S(g)!=="svelte-1hgao6o"&&(g.textContent=j),X.forEach(z),T.forEach(z),this.h()},h(){k(t,"class","text-lg font-bold text-center"),k(_,"class","text-sm font-semibold text-center opacity-70"),k(x,"class","radial-progress self-center text-primary font-bold"),k(x,"style",m=`--value:${n[3]};`),k(x,"role","progressbar"),k(p,"class","text-sm font-semibold text-center opacity-70"),k(i,"class","inline-flex flex-col gap-2"),k(y,"class","text-lg font-bold text-center"),k(g,"class","text-sm font-semibold text-center opacity-70"),k(u,"class",""),k(e,"class","border-2 border-base-200 p-2 rounded-md mb-4 grid grid-cols-1 lg:grid-cols-3 items-end")},m(N,T){M(N,e,T),f(e,l),f(l,t),f(t,a),f(l,o),f(l,_),f(e,C),f(e,i),f(i,x),f(x,d),f(i,I),f(i,p),f(e,D),f(e,u),f(u,y),f(y,s),f(y,q),H&&H.m(y,null),f(u,P),f(u,g)},p(N,[T]){T&1&&r!==(r=N[0].length+"")&&R(a,r),T&8&&c!==(c=`${N[3]}%`)&&R(d,c),T&8&&m!==(m=`--value:${N[3]};`)&&k(x,"style",m),T&4&&h!==(h=N[2].catalog+"")&&R(s,h),N[2].catalog!=="-"?H?H.p(N,T):(H=pe(N),H.c(),H.m(y,null)):H&&(H.d(1),H=null)},i:he,o:he,d(N){N&&z(e),H&&H.d()}}}function Ae(n,e){let l=e.question.catalog,t=e.question.choices.find(r=>r.answer);return l&&t&&(l in n||(n[l]={correct:0,incorrect:0}),t.text===e.answer?n[l].correct+=1:n[l].incorrect+=1),n}function Te(n,e){let l=e.question.choices.find(t=>t.answer);return l&&l.text===e.answer?n+1:n}function Se(n,e,l){let t,r,a,o,{quizHistory:_}=e;return n.$$set=b=>{"quizHistory"in b&&l(0,_=b.quizHistory)},n.$$.update=()=>{n.$$.dirty&1&&l(4,t=_.reduce(Te,0)),n.$$.dirty&17&&l(3,r=_.length>0?Math.round(t/_.length*100):0),n.$$.dirty&1&&l(1,o=_.reduce(Ae,{})),n.$$.dirty&3&&l(2,a=Object.keys(o).reduce((b,C)=>{let i=o[C].incorrect/_.length;return i>b.ratio?{ratio:i,catalog:C}:b},{ratio:0,catalog:"-"}))},[_,o,a,r,t]}class Le extends ie{constructor(e){super(),ce(this,e,Se,He,ae,{quizHistory:0})}}function je(n){let e,l;return e=new Pe({props:{class:"w-5 h-5 rounded-full border border-base-200 text-error",icon:"carbon:close-filled"}}),{c(){te(e.$$.fragment)},l(t){le(e.$$.fragment,t)},m(t,r){ne(e,t,r),l=!0},i(t){l||(A(e.$$.fragment,t),l=!0)},o(t){L(e.$$.fragment,t),l=!1},d(t){oe(e,t)}}}function Fe(n){let e,l;return e=new Pe({props:{class:"w-5 h-5 rounded-full border border-base-200 text-success",icon:"carbon:checkmark-filled"}}),{c(){te(e.$$.fragment)},l(t){le(e.$$.fragment,t)},m(t,r){ne(e,t,r),l=!0},i(t){l||(A(e.$$.fragment,t),l=!0)},o(t){L(e.$$.fragment,t),l=!1},d(t){oe(e,t)}}}function Qe(n){let e,l,t,r,a,o,_=n[0].question.question+"",b,C,i,x,c=n[0].question.catalog+"",d,m,I;const p=[Fe,je],v=[];function D(u,y){var h;return y&1&&(l=null),l==null&&(l=((h=u[0].question.choices.find(Be))==null?void 0:h.text)===u[0].answer),l?0:1}return t=D(n,-1),r=v[t]=p[t](n),{c(){e=E("a"),r.c(),a=O(),o=E("div"),b=Q(_),C=O(),i=E("span"),x=Q("aus "),d=Q(c),this.h()},l(u){e=$(u,"A",{class:!0,target:!0,href:!0});var y=w(e);r.l(y),a=V(y),o=$(y,"DIV",{class:!0});var h=w(o);b=B(h,_),C=V(h),i=$(h,"SPAN",{class:!0});var s=w(i);x=B(s,"aus "),d=B(s,c),s.forEach(z),h.forEach(z),y.forEach(z),this.h()},h(){k(i,"class","text-sm opacity-70"),k(o,"class","flex-1"),k(e,"class","flex items-center gap-1"),k(e,"target","_blank"),k(e,"href",m=me+`/search#${n[0].question.id}`)},m(u,y){M(u,e,y),v[t].m(e,null),f(e,a),f(e,o),f(o,b),f(o,C),f(o,i),f(i,x),f(i,d),I=!0},p(u,[y]){let h=t;t=D(u,y),t!==h&&(Z(),L(v[h],1,1,()=>{v[h]=null}),ee(),r=v[t],r||(r=v[t]=p[t](u),r.c()),A(r,1),r.m(e,a)),(!I||y&1)&&_!==(_=u[0].question.question+"")&&R(b,_),(!I||y&1)&&c!==(c=u[0].question.catalog+"")&&R(d,c),(!I||y&1&&m!==(m=me+`/search#${u[0].question.id}`))&&k(e,"href",m)},i(u){I||(A(r),I=!0)},o(u){L(r),I=!1},d(u){u&&z(e),v[t].d()}}}const Be=n=>n.answer;function Me(n,e,l){let{history:t}=e;return n.$$set=r=>{"history"in r&&l(0,t=r.history)},[t]}class Re extends ie{constructor(e){super(),ce(this,e,Me,Qe,ae,{history:0})}}function be(n,e,l){const t=n.slice();return t[14]=e[l],t}function Ce(n,e,l){const t=n.slice();return t[17]=e[l],t}function ye(n,e,l){const t=n.slice();return t[20]=e[l],t}function ke(n){let e,l,t,r;return l=De(n[8][0]),{c(){e=E("input"),this.h()},l(a){e=$(a,"INPUT",{id:!0,type:!0,class:!0,role:!0,"aria-label":!0,name:!0}),this.h()},h(){k(e,"id",n[20].id),k(e,"type","radio"),k(e,"class","tab flex-auto font-bold select-auto"),k(e,"role","tab"),k(e,"aria-label",n[20].name),k(e,"name","tabs"),e.__value=n[20].id,F(e,e.__value),l.p(e)},m(a,o){M(a,e,o),e.checked=e.__value===n[2],t||(r=W(e,"change",n[7]),t=!0)},p(a,o){o&4&&(e.checked=e.__value===a[2])},d(a){a&&z(e),l.r(),t=!1,r()}}}function Ee(n){let e,l,t="Letzten",r,a,o,_="10 ",b,C="20 ",i,x="50 ",c,d,m,I,p,v="Fragen",D,u;return{c(){e=E("div"),l=E("span"),l.textContent=t,r=O(),a=E("select"),o=E("option"),o.textContent=_,b=E("option"),b.textContent=C,i=E("option"),i.textContent=x,c=E("option"),d=Q("Alle"),I=O(),p=E("span"),p.textContent=v,this.h()},l(y){e=$(y,"DIV",{class:!0});var h=w(e);l=$(h,"SPAN",{class:!0,"data-svelte-h":!0}),S(l)!=="svelte-1hd3l8e"&&(l.textContent=t),r=V(h),a=$(h,"SELECT",{class:!0});var s=w(a);o=$(s,"OPTION",{"data-svelte-h":!0}),S(o)!=="svelte-1s9b7jg"&&(o.textContent=_),b=$(s,"OPTION",{"data-svelte-h":!0}),S(b)!=="svelte-uz2sx6"&&(b.textContent=C),i=$(s,"OPTION",{"data-svelte-h":!0}),S(i)!=="svelte-ml9eyc"&&(i.textContent=x),c=$(s,"OPTION",{});var q=w(c);d=B(q,"Alle"),q.forEach(z),s.forEach(z),I=V(h),p=$(h,"SPAN",{class:!0,"data-svelte-h":!0}),S(p)!=="svelte-1o217yb"&&(p.textContent=v),h.forEach(z),this.h()},h(){k(l,"class","font-bold"),o.__value=10,F(o,o.__value),b.__value=20,F(b,b.__value),i.__value=50,F(i,i.__value),c.__value=m=n[4].length,F(c,c.__value),k(a,"class","select select-bordered select-sm"),n[0]===void 0&&ze(()=>n[10].call(a)),k(p,"class","font-bold"),k(e,"class","flex flex-row items-center gap-2")},m(y,h){M(y,e,h),f(e,l),f(e,r),f(e,a),f(a,o),f(a,b),f(a,i),f(a,c),f(c,d),Y(a,n[0],!0),f(e,I),f(e,p),D||(u=W(a,"change",n[10]),D=!0)},p(y,h){h&16&&m!==(m=y[4].length)&&(c.__value=m,F(c,c.__value)),h&17&&Y(a,y[0])},d(y){y&&z(e),D=!1,u()}}}function $e(n){let e,l,t=n[14].label+"",r,a,o,_,b,C=U(n[14].history),i=[];for(let c=0;c<C.length;c+=1)i[c]=xe(Ce(n,C,c));const x=c=>L(i[c],1,1,()=>{i[c]=null});return{c(){e=E("div"),l=E("span"),r=Q(t),a=O(),o=E("div");for(let c=0;c<i.length;c+=1)i[c].c();_=O(),this.h()},l(c){e=$(c,"DIV",{});var d=w(e);l=$(d,"SPAN",{class:!0});var m=w(l);r=B(m,t),m.forEach(z),a=V(d),o=$(d,"DIV",{class:!0});var I=w(o);for(let p=0;p<i.length;p+=1)i[p].l(I);I.forEach(z),_=V(d),d.forEach(z),this.h()},h(){k(l,"class","font-bold text-primary text-sm"),k(o,"class","flex flex-col gap-0.5")},m(c,d){M(c,e,d),f(e,l),f(l,r),f(e,a),f(e,o);for(let m=0;m<i.length;m+=1)i[m]&&i[m].m(o,null);f(e,_),b=!0},p(c,d){if((!b||d&8)&&t!==(t=c[14].label+"")&&R(r,t),d&8){C=U(c[14].history);let m;for(m=0;m<C.length;m+=1){const I=Ce(c,C,m);i[m]?(i[m].p(I,d),A(i[m],1)):(i[m]=xe(I),i[m].c(),A(i[m],1),i[m].m(o,null))}for(Z(),m=C.length;m<i.length;m+=1)x(m);ee()}},i(c){if(!b){for(let d=0;d<C.length;d+=1)A(i[d]);b=!0}},o(c){i=i.filter(Boolean);for(let d=0;d<i.length;d+=1)L(i[d]);b=!1},d(c){c&&z(e),re(i,c)}}}function xe(n){let e,l;return e=new Re({props:{history:n[17]}}),{c(){te(e.$$.fragment)},l(t){le(e.$$.fragment,t)},m(t,r){ne(e,t,r),l=!0},p(t,r){const a={};r&8&&(a.history=t[17]),e.$set(a)},i(t){l||(A(e.$$.fragment,t),l=!0)},o(t){L(e.$$.fragment,t),l=!1},d(t){oe(e,t)}}}function Ie(n){let e,l,t=n[14].history.length>0&&$e(n);return{c(){t&&t.c(),e=de()},l(r){t&&t.l(r),e=de()},m(r,a){t&&t.m(r,a),M(r,e,a),l=!0},p(r,a){r[14].history.length>0?t?(t.p(r,a),a&8&&A(t,1)):(t=$e(r),t.c(),A(t,1),t.m(e.parentNode,e)):t&&(Z(),L(t,1,1,()=>{t=null}),ee())},i(r){l||(A(t),l=!0)},o(r){L(t),l=!1},d(r){r&&z(e),t&&t.d(r)}}}function qe(n){let e,l,t="ältesten",r,a,o,_,b="10 ",C,i="20 ",x,c="50 ",d,m,I,p,v,D="Löschen",u,y;return{c(){e=E("div"),l=E("span"),l.textContent=t,r=O(),a=E("div"),o=E("select"),_=E("option"),_.textContent=b,C=E("option"),C.textContent=i,x=E("option"),x.textContent=c,d=E("option"),m=Q("Alle"),p=O(),v=E("button"),v.textContent=D,this.h()},l(h){e=$(h,"DIV",{class:!0});var s=w(e);l=$(s,"SPAN",{class:!0,"data-svelte-h":!0}),S(l)!=="svelte-1lut7f"&&(l.textContent=t),r=V(s),a=$(s,"DIV",{class:!0});var q=w(a);o=$(q,"SELECT",{class:!0});var P=w(o);_=$(P,"OPTION",{"data-svelte-h":!0}),S(_)!=="svelte-1s9b7jg"&&(_.textContent=b),C=$(P,"OPTION",{"data-svelte-h":!0}),S(C)!=="svelte-uz2sx6"&&(C.textContent=i),x=$(P,"OPTION",{"data-svelte-h":!0}),S(x)!=="svelte-ml9eyc"&&(x.textContent=c),d=$(P,"OPTION",{});var g=w(d);m=B(g,"Alle"),g.forEach(z),P.forEach(z),p=V(q),v=$(q,"BUTTON",{class:!0,"data-svelte-h":!0}),S(v)!=="svelte-zyh9ex"&&(v.textContent=D),q.forEach(z),s.forEach(z),this.h()},h(){k(l,"class","font-bold"),_.__value=10,F(_,_.__value),C.__value=20,F(C,C.__value),x.__value=50,F(x,x.__value),d.__value=I=n[4].length,F(d,d.__value),k(o,"class","join-item select select-error select-sm"),n[1]===void 0&&ze(()=>n[11].call(o)),k(v,"class","join-item btn btn-error btn-sm"),k(a,"class","join"),k(e,"class","flex items-center gap-2")},m(h,s){M(h,e,s),f(e,l),f(e,r),f(e,a),f(a,o),f(o,_),f(o,C),f(o,x),f(o,d),f(d,m),Y(o,n[1],!0),f(a,p),f(a,v),u||(y=[W(o,"change",n[11]),W(v,"click",n[6])],u=!0)},p(h,s){s&16&&I!==(I=h[4].length)&&(d.__value=I,F(d,d.__value)),s&18&&Y(o,h[1])},d(h){h&&z(e),u=!1,Ne(y)}}}function Ue(n){let e,l,t,r="Verlauf",a,o,_,b,C,i,x,c,d,m;document.title="Verlauf - "+Oe;let I=U(n[5]),p=[];for(let s=0;s<I.length;s+=1)p[s]=ke(ye(n,I,s));C=new Le({props:{quizHistory:n[4].filter(n[9])}});let v=n[4].length>0&&Ee(n),D=U(n[3]),u=[];for(let s=0;s<D.length;s+=1)u[s]=Ie(be(n,D,s));const y=s=>L(u[s],1,1,()=>{u[s]=null});let h=n[4].length>0&&n[2]===n[5][0].id&&qe(n);return{c(){e=O(),l=E("div"),t=E("h1"),t.textContent=r,a=O(),o=E("div"),_=E("div");for(let s=0;s<p.length;s+=1)p[s].c();b=O(),te(C.$$.fragment),i=O(),v&&v.c(),x=O(),c=E("div");for(let s=0;s<u.length;s+=1)u[s].c();d=O(),h&&h.c(),this.h()},l(s){we("svelte-u3fr0m",document.head).forEach(z),e=V(s),l=$(s,"DIV",{});var P=w(l);t=$(P,"H1",{class:!0,"data-svelte-h":!0}),S(t)!=="svelte-dcbfll"&&(t.textContent=r),a=V(P),o=$(P,"DIV",{class:!0});var g=w(o);_=$(g,"DIV",{class:!0,role:!0});var j=w(_);for(let N=0;N<p.length;N+=1)p[N].l(j);j.forEach(z),b=V(g),le(C.$$.fragment,g),i=V(g),v&&v.l(g),x=V(g),c=$(g,"DIV",{class:!0});var H=w(c);for(let N=0;N<u.length;N+=1)u[N].l(H);H.forEach(z),d=V(g),h&&h.l(g),g.forEach(z),P.forEach(z),this.h()},h(){k(t,"class","text-3xl text-center font-semibold mb-2"),k(_,"class","tabs tabs-bordered flex"),k(_,"role","tablist"),k(c,"class","flex flex-col gap-1"),k(o,"class","flex flex-col gap-4")},m(s,q){M(s,e,q),M(s,l,q),f(l,t),f(l,a),f(l,o),f(o,_);for(let P=0;P<p.length;P+=1)p[P]&&p[P].m(_,null);f(o,b),ne(C,o,null),f(o,i),v&&v.m(o,null),f(o,x),f(o,c);for(let P=0;P<u.length;P+=1)u[P]&&u[P].m(c,null);f(o,d),h&&h.m(o,null),m=!0},p(s,[q]){if(q&36){I=U(s[5]);let g;for(g=0;g<I.length;g+=1){const j=ye(s,I,g);p[g]?p[g].p(j,q):(p[g]=ke(j),p[g].c(),p[g].m(_,null))}for(;g<p.length;g+=1)p[g].d(1);p.length=I.length}const P={};if(q&20&&(P.quizHistory=s[4].filter(s[9])),C.$set(P),s[4].length>0?v?v.p(s,q):(v=Ee(s),v.c(),v.m(o,x)):v&&(v.d(1),v=null),q&8){D=U(s[3]);let g;for(g=0;g<D.length;g+=1){const j=be(s,D,g);u[g]?(u[g].p(j,q),A(u[g],1)):(u[g]=Ie(j),u[g].c(),A(u[g],1),u[g].m(c,null))}for(Z(),g=D.length;g<u.length;g+=1)y(g);ee()}s[4].length>0&&s[2]===s[5][0].id?h?h.p(s,q):(h=qe(s),h.c(),h.m(o,null)):h&&(h.d(1),h=null)},i(s){if(!m){A(C.$$.fragment,s);for(let q=0;q<D.length;q+=1)A(u[q]);m=!0}},o(s){L(C.$$.fragment,s),u=u.filter(Boolean);for(let q=0;q<u.length;q+=1)L(u[q]);m=!1},d(s){s&&(z(e),z(l)),re(p,s),oe(C),v&&v.d(),re(u,s),h&&h.d()}}}function Je(n,e,l){let t,r;_e(n,se,v=>l(4,t=v)),_e(n,Ve,v=>l(12,r=v));let a=10,o=10;const _=[{id:"all",name:"Alle"},{id:"endless",name:"Endlosquiz"},{id:"quiz",name:"Quiz"}];let b=_[0].id;r.url.hash&&_.some(v=>"#"+v.id===r.url.hash)&&(b=r.url.hash.replace("#",""));let C=i(b,a);function i(v,D){let u=[{label:"Jetzt",time:1,history:[]},{label:"Letzten Minuten",time:10,history:[]},{label:"Letzter Stunde",time:60,history:[]},{label:"Letzten Tag",time:1440,history:[]},{label:"Älter",time:Number.MAX_SAFE_INTEGER,history:[]}],y=0;for(let h of t){if(h.type!==v&&v!==_[0].id)continue;let s=(Date.now()-h.date)/6e4;for(let q of u)if(s<q.time){q.history=[...q.history,h];break}if(y++,y>=D)break}return u}function x(){t.length<=o?ve(se,t=[],t):ve(se,t=t.slice(0,t.length-o),t),l(3,C=i(b,a))}const c=[[]];function d(){b=this.__value,l(2,b)}const m=v=>v.type===b||b===_[0].id;function I(){a=ge(this),l(0,a)}function p(){o=ge(this),l(1,o)}return[a,o,b,C,t,_,x,d,c,m,I,p]}class lt extends ie{constructor(e){super(),ce(this,e,Je,Ue,ae,{})}}export{lt as component};
