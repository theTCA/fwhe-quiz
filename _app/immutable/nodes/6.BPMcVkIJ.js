import{h as Hn,a as ot,t as kt,c as Zt,s as pt,e as Is,b as Hr}from"../chunks/disclose-version.BWTWBhB4.js";import{i as Tr,P as Os}from"../chunks/public.Dj7Vthdi.js";import{p as Mr,c as D,r as E,a as Cr,f as Rt,s as tt,t as qt,n as tr,a0 as er,a1 as Ps,$ as $s,g as at,b as jt,m as se}from"../chunks/runtime.BtXH3TXM.js";import{p as yr,i as Tt}from"../chunks/props.CqWHPKN1.js";import{e as Bs,i as Ls}from"../chunks/each.DRxh5sp6.js";import{s as Xn,h as rr,I as Te,r as Me}from"../chunks/Icon.BPb3u_LU.js";import{a as Xr,c as Es,b as zs}from"../chunks/input.cFgeiN8w.js";import{p as Ds}from"../chunks/event-modifiers.CWmzcjye.js";import{b as js}from"../chunks/paths.C1uUrTZP.js";import{a as Qn}from"../chunks/helper.CMGnaNZv.js";class M{constructor(e,r){let n=" "+e,s;const o=r&&r.loc;if(o&&o.start<=o.end){const c=o.lexer.input;s=o.start;const h=o.end;s===c.length?n+=" at end of input: ":n+=" at position "+(s+1)+": ";const m=c.slice(s,h).replace(/[^]/g,"$&Ì²");let x;s>15?x="â€¦"+c.slice(s-15,s):x=c.slice(0,s);let N;h+15<c.length?N=c.slice(h,h+15)+"â€¦":N=c.slice(h),n+=x+m+N}const l=new Error(n);return l.name="ParseError",l.__proto__=M.prototype,l.position=s,l}}M.prototype.__proto__=Error.prototype;const Rs=function(t,e){return t===void 0?e:t},Gs=/([A-Z])/g,Fs=function(t){return t.replace(Gs,"-$1").toLowerCase()},Us={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#x27;"},Vs=/[&><"']/g;function Zs(t){return String(t).replace(Vs,e=>Us[e])}const Ee=function(t){return t.type==="ordgroup"||t.type==="color"?t.body.length===1?Ee(t.body[0]):t:t.type==="font"?Ee(t.body):t},Ws=function(t){const e=Ee(t);return e.type==="mathord"||e.type==="textord"||e.type==="atom"},Hs=function(t){if(!t)throw new Error("Expected non-null, but got "+String(t));return t},Xs=function(t){const e=/^[\x00-\x20]*([^\\/#?]*?)(:|&#0*58|&#x0*3a|&colon)/i.exec(t);return e?e[2]!==":"||!/^[a-zA-Z][a-zA-Z0-9+\-.]*$/.test(e[1])?null:e[1].toLowerCase():"_relative"},Qs=function(t){return+t.toFixed(4)};var it={deflt:Rs,escape:Zs,hyphenate:Fs,getBaseElem:Ee,isCharacterBox:Ws,protocolFromUrl:Xs,round:Qs};class Ir{constructor(e){e=e||{},this.displayMode=it.deflt(e.displayMode,!1),this.annotate=it.deflt(e.annotate,!1),this.leqno=it.deflt(e.leqno,!1),this.throwOnError=it.deflt(e.throwOnError,!1),this.errorColor=it.deflt(e.errorColor,"#b22222"),this.macros=e.macros||{},this.wrap=it.deflt(e.wrap,"tex"),this.xml=it.deflt(e.xml,!1),this.colorIsTextColor=it.deflt(e.colorIsTextColor,!1),this.strict=it.deflt(e.strict,!1),this.trust=it.deflt(e.trust,!1),this.maxSize=e.maxSize===void 0?[1/0,1/0]:Array.isArray(e.maxSize)?e.maxSize:[1/0,1/0],this.maxExpand=Math.max(0,it.deflt(e.maxExpand,1e3))}isTrusted(e){if(e.url&&!e.protocol){const r=it.protocolFromUrl(e.url);if(r==null)return!1;e.protocol=r}return!!(typeof this.trust=="function"?this.trust(e):this.trust)}}const Yn={},ze={};function $({type:t,names:e,props:r,handler:n,mathmlBuilder:s}){const o={type:t,numArgs:r.numArgs,argTypes:r.argTypes,allowedInArgument:!!r.allowedInArgument,allowedInText:!!r.allowedInText,allowedInMath:r.allowedInMath===void 0?!0:r.allowedInMath,numOptionalArgs:r.numOptionalArgs||0,infix:!!r.infix,primitive:!!r.primitive,handler:n};for(let l=0;l<e.length;++l)Yn[e[l]]=o;t&&s&&(ze[t]=s)}function ce({type:t,mathmlBuilder:e}){$({type:t,names:[],props:{numArgs:0},handler(){throw new Error("Should never be called.")},mathmlBuilder:e})}const ye=function(t){return t.type==="ordgroup"&&t.body.length===1?t.body[0]:t},ft=function(t){return t.type==="ordgroup"?t.body:[t]};class Or{constructor(e){this.children=e,this.classes=[],this.style={}}hasClass(e){return this.classes.includes(e)}toNode(){const e=document.createDocumentFragment();for(let r=0;r<this.children.length;r++)e.appendChild(this.children[r].toNode());return e}toMarkup(){let e="";for(let r=0;r<this.children.length;r++)e+=this.children[r].toMarkup();return e}toText(){const e=r=>r.toText();return this.children.map(e).join("")}}const De=function(t){return t.filter(e=>e).join(" ")},Ys=function(t,e){this.classes=t||[],this.attributes={},this.style=e||{}},Ks=function(t){const e=document.createElement(t);e.className=De(this.classes);for(const r in this.style)Object.prototype.hasOwnProperty.call(this.style,r)&&(e.style[r]=this.style[r]);for(const r in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,r)&&e.setAttribute(r,this.attributes[r]);for(let r=0;r<this.children.length;r++)e.appendChild(this.children[r].toNode());return e},Js=function(t){let e=`<${t}`;this.classes.length&&(e+=` class="${it.escape(De(this.classes))}"`);let r="";for(const n in this.style)Object.prototype.hasOwnProperty.call(this.style,n)&&(r+=`${it.hyphenate(n)}:${this.style[n]};`);r&&(e+=` style="${r}"`);for(const n in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,n)&&(e+=` ${n}="${it.escape(this.attributes[n])}"`);e+=">";for(let n=0;n<this.children.length;n++)e+=this.children[n].toMarkup();return e+=`</${t}>`,e};class Kn{constructor(e,r,n){Ys.call(this,e,n),this.children=r||[]}setAttribute(e,r){this.attributes[e]=r}toNode(){return Ks.call(this,"span")}toMarkup(){return Js.call(this,"span")}}let ta=class{constructor(t){this.text=t}toNode(){return document.createTextNode(this.text)}toMarkup(){return it.escape(this.text)}};class ea{constructor(e,r,n){this.alt=r,this.src=e,this.classes=["mord"],this.style=n}hasClass(e){return this.classes.includes(e)}toNode(){const e=document.createElement("img");e.src=this.src,e.alt=this.alt,e.className="mord";for(const r in this.style)Object.prototype.hasOwnProperty.call(this.style,r)&&(e.style[r]=this.style[r]);return e}toMarkup(){let e=`<img src='${this.src}' alt='${this.alt}'`,r="";for(const n in this.style)Object.prototype.hasOwnProperty.call(this.style,n)&&(r+=`${it.hyphenate(n)}:${this.style[n]};`);return r&&(e+=` style="${it.escape(r)}"`),e+=">",e}}function ra(t){return new Or(t)}class Mt{constructor(e,r,n,s){this.type=e,this.attributes={},this.children=r||[],this.classes=n||[],this.style=s||{}}setAttribute(e,r){this.attributes[e]=r}getAttribute(e){return this.attributes[e]}toNode(){const e=document.createElementNS("http://www.w3.org/1998/Math/MathML",this.type);for(const r in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,r)&&e.setAttribute(r,this.attributes[r]);this.classes.length>0&&(e.className=De(this.classes));for(const r in this.style)Object.prototype.hasOwnProperty.call(this.style,r)&&(e.style[r]=this.style[r]);for(let r=0;r<this.children.length;r++)e.appendChild(this.children[r].toNode());return e}toMarkup(){let e="<"+this.type;for(const n in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,n)&&(e+=" "+n+'="',e+=it.escape(this.attributes[n]),e+='"');this.classes.length>0&&(e+=` class="${it.escape(De(this.classes))}"`);let r="";for(const n in this.style)Object.prototype.hasOwnProperty.call(this.style,n)&&(r+=`${it.hyphenate(n)}:${this.style[n]};`);r&&(e+=` style="${r}"`),e+=">";for(let n=0;n<this.children.length;n++)e+=this.children[n].toMarkup();return e+="</"+this.type+">",e}toText(){return this.children.map(e=>e.toText()).join("")}}class Jn{constructor(e){this.text=e}toNode(){return document.createTextNode(this.text)}toMarkup(){return it.escape(this.toText())}toText(){return this.text}}const Pr=t=>{let e;return t.length===1&&t[0].type==="mrow"?(e=t.pop(),e.type="mstyle"):e=new Mt("mstyle",t),e};var y={MathNode:Mt,TextNode:Jn,newDocumentFragment:ra};const be=t=>{let e=0;if(t.body)for(const r of t.body)e+=be(r);else if(t.type==="supsub")e+=be(t.base),t.sub&&(e+=.7*be(t.sub)),t.sup&&(e+=.7*be(t.sup));else if(t.type==="mathord"||t.type==="textord")for(const r of t.text.split("")){const n=r.codePointAt(0);96<n&&n<123||944<n&&n<970?e+=.56:47<n&&n<58?e+=.5:e+=.92}else e+=1;return e},na={widehat:"^",widecheck:"Ë‡",widetilde:"~",wideparen:"âœ",utilde:"~",overleftarrow:"â†",underleftarrow:"â†",xleftarrow:"â†",overrightarrow:"â†’",underrightarrow:"â†’",xrightarrow:"â†’",underbrace:"âŸ",overbrace:"â",overgroup:"â ",overparen:"âœ",undergroup:"â¡",underparen:"â",overleftrightarrow:"â†”",underleftrightarrow:"â†”",xleftrightarrow:"â†”",Overrightarrow:"â‡’",xRightarrow:"â‡’",overleftharpoon:"â†¼",xleftharpoonup:"â†¼",overrightharpoon:"â‡€",xrightharpoonup:"â‡€",xLeftarrow:"â‡",xLeftrightarrow:"â‡”",xhookleftarrow:"â†©",xhookrightarrow:"â†ª",xmapsto:"â†¦",xrightharpoondown:"â‡",xleftharpoondown:"â†½",xtwoheadleftarrow:"â†",xtwoheadrightarrow:"â† ",xlongequal:"=",xrightleftarrows:"â‡„",yields:"â†’",yieldsLeft:"â†",mesomerism:"â†”",longrightharpoonup:"â‡€",longleftharpoondown:"â†½",eqrightharpoonup:"â‡€",eqleftharpoondown:"â†½","\\cdrightarrow":"â†’","\\cdleftarrow":"â†","\\cdlongequal":"="},ts=function(t){const e=new y.TextNode(na[t.slice(1)]),r=new y.MathNode("mo",[e]);return r.setAttribute("stretchy","true"),r},sa=["\\widetilde","\\widehat","\\widecheck","\\utilde"],aa=t=>{const e=ts(t.label);if(sa.includes(t.label)){const r=be(t.base);1<r&&r<1.6?e.classes.push("tml-crooked-2"):1.6<=r&&r<2.5?e.classes.push("tml-crooked-3"):2.5<=r&&e.classes.push("tml-crooked-4")}return e};var Ue={mathMLnode:ts,accentNode:aa};const oa={bin:1,close:1,inner:1,open:1,punct:1,rel:1},ia={"accent-token":1,mathord:1,"op-token":1,spacing:1,textord:1},xt={math:{},text:{}};function a(t,e,r,n,s){xt[t][n]={group:e,replace:r},s&&r&&(xt[t][r]=xt[t][n])}const i="math",_="text",et="accent-token",k="bin",gt="close",ue="inner",I="mathord",Y="op-token",yt="open",ke="punct",d="rel",Jt="spacing",f="textord";a(i,d,"â‰¡","\\equiv",!0);a(i,d,"â‰º","\\prec",!0);a(i,d,"â‰»","\\succ",!0);a(i,d,"âˆ¼","\\sim",!0);a(i,d,"âŸ‚","\\perp",!0);a(i,d,"âª¯","\\preceq",!0);a(i,d,"âª°","\\succeq",!0);a(i,d,"â‰ƒ","\\simeq",!0);a(i,d,"â‰Œ","\\backcong",!0);a(i,d,"|","\\mid",!0);a(i,d,"â‰ª","\\ll",!0);a(i,d,"â‰«","\\gg",!0);a(i,d,"â‰","\\asymp",!0);a(i,d,"âˆ¥","\\parallel");a(i,d,"âŒ£","\\smile",!0);a(i,d,"âŠ‘","\\sqsubseteq",!0);a(i,d,"âŠ’","\\sqsupseteq",!0);a(i,d,"â‰","\\doteq",!0);a(i,d,"âŒ¢","\\frown",!0);a(i,d,"âˆ‹","\\ni",!0);a(i,d,"âˆŒ","\\notni",!0);a(i,d,"âˆ","\\propto",!0);a(i,d,"âŠ¢","\\vdash",!0);a(i,d,"âŠ£","\\dashv",!0);a(i,d,"âˆ‹","\\owns");a(i,d,"â‰˜","\\arceq",!0);a(i,d,"â‰™","\\wedgeq",!0);a(i,d,"â‰š","\\veeeq",!0);a(i,d,"â‰›","\\stareq",!0);a(i,d,"â‰","\\eqdef",!0);a(i,d,"â‰","\\measeq",!0);a(i,d,"â‰Ÿ","\\questeq",!0);a(i,d,"â‰ ","\\ne",!0);a(i,d,"â‰ ","\\neq");a(i,d,"â©µ","\\eqeq",!0);a(i,d,"â©¶","\\eqeqeq",!0);a(i,d,"âˆ·","\\dblcolon",!0);a(i,d,"â‰”","\\coloneqq",!0);a(i,d,"â‰•","\\eqqcolon",!0);a(i,d,"âˆ¹","\\eqcolon",!0);a(i,d,"â©´","\\Coloneqq",!0);a(i,ke,".","\\ldotp");a(i,ke,"Â·","\\cdotp");a(i,f,"#","\\#");a(_,f,"#","\\#");a(i,f,"&","\\&");a(_,f,"&","\\&");a(i,f,"â„µ","\\aleph",!0);a(i,f,"âˆ€","\\forall",!0);a(i,f,"â„","\\hbar",!0);a(i,f,"âˆƒ","\\exists",!0);a(i,k,"âˆ‡","\\nabla",!0);a(i,f,"â™­","\\flat",!0);a(i,f,"â„“","\\ell",!0);a(i,f,"â™®","\\natural",!0);a(i,f,"â„«","\\Angstrom",!0);a(_,f,"â„«","\\Angstrom",!0);a(i,f,"â™£","\\clubsuit",!0);a(i,f,"â™§","\\varclubsuit",!0);a(i,f,"â„˜","\\wp",!0);a(i,f,"â™¯","\\sharp",!0);a(i,f,"â™¢","\\diamondsuit",!0);a(i,f,"â™¦","\\vardiamondsuit",!0);a(i,f,"â„œ","\\Re",!0);a(i,f,"â™¡","\\heartsuit",!0);a(i,f,"â™¥","\\varheartsuit",!0);a(i,f,"â„‘","\\Im",!0);a(i,f,"â™ ","\\spadesuit",!0);a(i,f,"â™¤","\\varspadesuit",!0);a(i,f,"â™€","\\female",!0);a(i,f,"â™‚","\\male",!0);a(i,f,"Â§","\\S",!0);a(_,f,"Â§","\\S");a(i,f,"Â¶","\\P",!0);a(_,f,"Â¶","\\P");a(_,f,"â˜º","\\smiley",!0);a(i,f,"â˜º","\\smiley",!0);a(i,f,"â€ ","\\dag");a(_,f,"â€ ","\\dag");a(_,f,"â€ ","\\textdagger");a(i,f,"â€¡","\\ddag");a(_,f,"â€¡","\\ddag");a(_,f,"â€¡","\\textdaggerdbl");a(i,gt,"â±","\\rmoustache",!0);a(i,yt,"â°","\\lmoustache",!0);a(i,gt,"âŸ¯","\\rgroup",!0);a(i,yt,"âŸ®","\\lgroup",!0);a(i,k,"âˆ“","\\mp",!0);a(i,k,"âŠ–","\\ominus",!0);a(i,k,"âŠ","\\uplus",!0);a(i,k,"âŠ“","\\sqcap",!0);a(i,k,"âˆ—","\\ast");a(i,k,"âŠ”","\\sqcup",!0);a(i,k,"â—¯","\\bigcirc",!0);a(i,k,"âˆ™","\\bullet",!0);a(i,k,"â€¡","\\ddagger");a(i,k,"â‰€","\\wr",!0);a(i,k,"â¨¿","\\amalg");a(i,k,"&","\\And");a(i,k,"â«½","\\sslash",!0);a(i,d,"âŸµ","\\longleftarrow",!0);a(i,d,"â‡","\\Leftarrow",!0);a(i,d,"âŸ¸","\\Longleftarrow",!0);a(i,d,"âŸ¶","\\longrightarrow",!0);a(i,d,"â‡’","\\Rightarrow",!0);a(i,d,"âŸ¹","\\Longrightarrow",!0);a(i,d,"â†”","\\leftrightarrow",!0);a(i,d,"âŸ·","\\longleftrightarrow",!0);a(i,d,"â‡”","\\Leftrightarrow",!0);a(i,d,"âŸº","\\Longleftrightarrow",!0);a(i,d,"â†¤","\\mapsfrom",!0);a(i,d,"â†¦","\\mapsto",!0);a(i,d,"âŸ¼","\\longmapsto",!0);a(i,d,"â†—","\\nearrow",!0);a(i,d,"â†©","\\hookleftarrow",!0);a(i,d,"â†ª","\\hookrightarrow",!0);a(i,d,"â†˜","\\searrow",!0);a(i,d,"â†¼","\\leftharpoonup",!0);a(i,d,"â‡€","\\rightharpoonup",!0);a(i,d,"â†™","\\swarrow",!0);a(i,d,"â†½","\\leftharpoondown",!0);a(i,d,"â‡","\\rightharpoondown",!0);a(i,d,"â†–","\\nwarrow",!0);a(i,d,"â‡Œ","\\rightleftharpoons",!0);a(i,I,"â†¯","\\lightning",!0);a(i,I,"âˆ","\\QED",!0);a(i,I,"â€°","\\permil",!0);a(_,f,"â€°","\\permil");a(i,I,"â˜‰","\\astrosun",!0);a(i,I,"â˜¼","\\sun",!0);a(i,I,"â˜¾","\\leftmoon",!0);a(i,I,"â˜½","\\rightmoon",!0);a(i,I,"âŠ•","\\Earth");a(i,d,"â‰®","\\nless",!0);a(i,d,"âª‡","\\lneq",!0);a(i,d,"â‰¨","\\lneqq",!0);a(i,d,"â‰¨ï¸€","\\lvertneqq");a(i,d,"â‹¦","\\lnsim",!0);a(i,d,"âª‰","\\lnapprox",!0);a(i,d,"âŠ€","\\nprec",!0);a(i,d,"â‹ ","\\npreceq",!0);a(i,d,"â‹¨","\\precnsim",!0);a(i,d,"âª¹","\\precnapprox",!0);a(i,d,"â‰","\\nsim",!0);a(i,d,"âˆ¤","\\nmid",!0);a(i,d,"âˆ¤","\\nshortmid");a(i,d,"âŠ¬","\\nvdash",!0);a(i,d,"âŠ­","\\nvDash",!0);a(i,d,"â‹ª","\\ntriangleleft");a(i,d,"â‹¬","\\ntrianglelefteq",!0);a(i,d,"âŠ„","\\nsubset",!0);a(i,d,"âŠ…","\\nsupset",!0);a(i,d,"âŠŠ","\\subsetneq",!0);a(i,d,"âŠŠï¸€","\\varsubsetneq");a(i,d,"â«‹","\\subsetneqq",!0);a(i,d,"â«‹ï¸€","\\varsubsetneqq");a(i,d,"â‰¯","\\ngtr",!0);a(i,d,"âªˆ","\\gneq",!0);a(i,d,"â‰©","\\gneqq",!0);a(i,d,"â‰©ï¸€","\\gvertneqq");a(i,d,"â‹§","\\gnsim",!0);a(i,d,"âªŠ","\\gnapprox",!0);a(i,d,"âŠ","\\nsucc",!0);a(i,d,"â‹¡","\\nsucceq",!0);a(i,d,"â‹©","\\succnsim",!0);a(i,d,"âªº","\\succnapprox",!0);a(i,d,"â‰†","\\ncong",!0);a(i,d,"âˆ¦","\\nparallel",!0);a(i,d,"âˆ¦","\\nshortparallel");a(i,d,"âŠ¯","\\nVDash",!0);a(i,d,"â‹«","\\ntriangleright");a(i,d,"â‹­","\\ntrianglerighteq",!0);a(i,d,"âŠ‹","\\supsetneq",!0);a(i,d,"âŠ‹","\\varsupsetneq");a(i,d,"â«Œ","\\supsetneqq",!0);a(i,d,"â«Œï¸€","\\varsupsetneqq");a(i,d,"âŠ®","\\nVdash",!0);a(i,d,"âªµ","\\precneqq",!0);a(i,d,"âª¶","\\succneqq",!0);a(i,k,"âŠ´","\\unlhd");a(i,k,"âŠµ","\\unrhd");a(i,d,"â†š","\\nleftarrow",!0);a(i,d,"â†›","\\nrightarrow",!0);a(i,d,"â‡","\\nLeftarrow",!0);a(i,d,"â‡","\\nRightarrow",!0);a(i,d,"â†®","\\nleftrightarrow",!0);a(i,d,"â‡","\\nLeftrightarrow",!0);a(i,d,"â–³","\\vartriangle");a(i,f,"â„","\\hslash");a(i,f,"â–½","\\triangledown");a(i,f,"â—Š","\\lozenge");a(i,f,"â“ˆ","\\circledS");a(i,f,"Â®","\\circledR",!0);a(_,f,"Â®","\\circledR");a(_,f,"Â®","\\textregistered");a(i,f,"âˆ¡","\\measuredangle",!0);a(i,f,"âˆ„","\\nexists");a(i,f,"â„§","\\mho");a(i,f,"â„²","\\Finv",!0);a(i,f,"â…","\\Game",!0);a(i,f,"â€µ","\\backprime");a(i,f,"â€¶","\\backdprime");a(i,f,"â€·","\\backtrprime");a(i,f,"â–²","\\blacktriangle");a(i,f,"â–¼","\\blacktriangledown");a(i,f,"â– ","\\blacksquare");a(i,f,"â§«","\\blacklozenge");a(i,f,"â˜…","\\bigstar");a(i,f,"âˆ¢","\\sphericalangle",!0);a(i,f,"âˆ","\\complement",!0);a(i,f,"Ã°","\\eth",!0);a(_,f,"Ã°","Ã°");a(i,f,"â•±","\\diagup");a(i,f,"â•²","\\diagdown");a(i,f,"â–¡","\\square");a(i,f,"â–¡","\\Box");a(i,f,"â—Š","\\Diamond");a(i,f,"Â¥","\\yen",!0);a(_,f,"Â¥","\\yen",!0);a(i,f,"âœ“","\\checkmark",!0);a(_,f,"âœ“","\\checkmark");a(i,f,"âœ—","\\ballotx",!0);a(_,f,"âœ—","\\ballotx");a(_,f,"â€¢","\\textbullet");a(i,f,"â„¶","\\beth",!0);a(i,f,"â„¸","\\daleth",!0);a(i,f,"â„·","\\gimel",!0);a(i,f,"Ï","\\digamma",!0);a(i,f,"Ï°","\\varkappa");a(i,yt,"âŒœ","\\ulcorner",!0);a(i,gt,"âŒ","\\urcorner",!0);a(i,yt,"âŒ","\\llcorner",!0);a(i,gt,"âŒŸ","\\lrcorner",!0);a(i,d,"â‰¦","\\leqq",!0);a(i,d,"â©½","\\leqslant",!0);a(i,d,"âª•","\\eqslantless",!0);a(i,d,"â‰²","\\lesssim",!0);a(i,d,"âª…","\\lessapprox",!0);a(i,d,"â‰Š","\\approxeq",!0);a(i,k,"â‹–","\\lessdot");a(i,d,"â‹˜","\\lll",!0);a(i,d,"â‰¶","\\lessgtr",!0);a(i,d,"â‹š","\\lesseqgtr",!0);a(i,d,"âª‹","\\lesseqqgtr",!0);a(i,d,"â‰‘","\\doteqdot");a(i,d,"â‰“","\\risingdotseq",!0);a(i,d,"â‰’","\\fallingdotseq",!0);a(i,d,"âˆ½","\\backsim",!0);a(i,d,"â‹","\\backsimeq",!0);a(i,d,"â«…","\\subseteqq",!0);a(i,d,"â‹","\\Subset",!0);a(i,d,"âŠ","\\sqsubset",!0);a(i,d,"â‰¼","\\preccurlyeq",!0);a(i,d,"â‹","\\curlyeqprec",!0);a(i,d,"â‰¾","\\precsim",!0);a(i,d,"âª·","\\precapprox",!0);a(i,d,"âŠ²","\\vartriangleleft");a(i,d,"âŠ´","\\trianglelefteq");a(i,d,"âŠ¨","\\vDash",!0);a(i,d,"âŠ«","\\VDash",!0);a(i,d,"âŠª","\\Vvdash",!0);a(i,d,"âŒ£","\\smallsmile");a(i,d,"âŒ¢","\\smallfrown");a(i,d,"â‰","\\bumpeq",!0);a(i,d,"â‰","\\Bumpeq",!0);a(i,d,"â‰§","\\geqq",!0);a(i,d,"â©¾","\\geqslant",!0);a(i,d,"âª–","\\eqslantgtr",!0);a(i,d,"â‰³","\\gtrsim",!0);a(i,d,"âª†","\\gtrapprox",!0);a(i,k,"â‹—","\\gtrdot");a(i,d,"â‹™","\\ggg",!0);a(i,d,"â‰·","\\gtrless",!0);a(i,d,"â‹›","\\gtreqless",!0);a(i,d,"âªŒ","\\gtreqqless",!0);a(i,d,"â‰–","\\eqcirc",!0);a(i,d,"â‰—","\\circeq",!0);a(i,d,"â‰œ","\\triangleq",!0);a(i,d,"âˆ¼","\\thicksim");a(i,d,"â‰ˆ","\\thickapprox");a(i,d,"â«†","\\supseteqq",!0);a(i,d,"â‹‘","\\Supset",!0);a(i,d,"âŠ","\\sqsupset",!0);a(i,d,"â‰½","\\succcurlyeq",!0);a(i,d,"â‹Ÿ","\\curlyeqsucc",!0);a(i,d,"â‰¿","\\succsim",!0);a(i,d,"âª¸","\\succapprox",!0);a(i,d,"âŠ³","\\vartriangleright");a(i,d,"âŠµ","\\trianglerighteq");a(i,d,"âŠ©","\\Vdash",!0);a(i,d,"âˆ£","\\shortmid");a(i,d,"âˆ¥","\\shortparallel");a(i,d,"â‰¬","\\between",!0);a(i,d,"â‹”","\\pitchfork",!0);a(i,d,"âˆ","\\varpropto");a(i,d,"â—€","\\blacktriangleleft");a(i,d,"âˆ´","\\therefore",!0);a(i,d,"âˆ","\\backepsilon");a(i,d,"â–¶","\\blacktriangleright");a(i,d,"âˆµ","\\because",!0);a(i,d,"â‹˜","\\llless");a(i,d,"â‹™","\\gggtr");a(i,k,"âŠ²","\\lhd");a(i,k,"âŠ³","\\rhd");a(i,d,"â‰‚","\\eqsim",!0);a(i,d,"â‰‘","\\Doteq",!0);a(i,d,"â¥½","\\strictif",!0);a(i,d,"â¥¼","\\strictfi",!0);a(i,k,"âˆ”","\\dotplus",!0);a(i,k,"âˆ–","\\smallsetminus");a(i,k,"â‹’","\\Cap",!0);a(i,k,"â‹“","\\Cup",!0);a(i,k,"â©","\\doublebarwedge",!0);a(i,k,"âŠŸ","\\boxminus",!0);a(i,k,"âŠ","\\boxplus",!0);a(i,k,"â§„","\\boxslash",!0);a(i,k,"â‹‡","\\divideontimes",!0);a(i,k,"â‹‰","\\ltimes",!0);a(i,k,"â‹Š","\\rtimes",!0);a(i,k,"â‹‹","\\leftthreetimes",!0);a(i,k,"â‹Œ","\\rightthreetimes",!0);a(i,k,"â‹","\\curlywedge",!0);a(i,k,"â‹","\\curlyvee",!0);a(i,k,"âŠ","\\circleddash",!0);a(i,k,"âŠ›","\\circledast",!0);a(i,k,"âŠº","\\intercal",!0);a(i,k,"â‹’","\\doublecap");a(i,k,"â‹“","\\doublecup");a(i,k,"âŠ ","\\boxtimes",!0);a(i,k,"â‹ˆ","\\bowtie",!0);a(i,k,"â‹ˆ","\\Join");a(i,k,"âŸ•","\\leftouterjoin",!0);a(i,k,"âŸ–","\\rightouterjoin",!0);a(i,k,"âŸ—","\\fullouterjoin",!0);a(i,k,"âˆ¸","\\dotminus",!0);a(i,k,"âŸ‘","\\wedgedot",!0);a(i,k,"âŸ‡","\\veedot",!0);a(i,k,"â©¢","\\doublebarvee",!0);a(i,k,"â©£","\\veedoublebar",!0);a(i,k,"â©Ÿ","\\wedgebar",!0);a(i,k,"â© ","\\wedgedoublebar",!0);a(i,k,"â©”","\\Vee",!0);a(i,k,"â©“","\\Wedge",!0);a(i,k,"â©ƒ","\\barcap",!0);a(i,k,"â©‚","\\barcup",!0);a(i,k,"â©ˆ","\\capbarcup",!0);a(i,k,"â©€","\\capdot",!0);a(i,k,"â©‡","\\capovercup",!0);a(i,k,"â©†","\\cupovercap",!0);a(i,k,"â©","\\closedvarcap",!0);a(i,k,"â©Œ","\\closedvarcup",!0);a(i,k,"â¨ª","\\minusdot",!0);a(i,k,"â¨«","\\minusfdots",!0);a(i,k,"â¨¬","\\minusrdots",!0);a(i,k,"âŠ»","\\Xor",!0);a(i,k,"âŠ¼","\\Nand",!0);a(i,k,"âŠ½","\\Nor",!0);a(i,k,"âŠ½","\\barvee");a(i,k,"â«´","\\interleave",!0);a(i,k,"â§¢","\\shuffle",!0);a(i,k,"â«¶","\\threedotcolon",!0);a(i,k,"â¦‚","\\typecolon",!0);a(i,k,"âˆ¾","\\invlazys",!0);a(i,k,"â©‹","\\twocaps",!0);a(i,k,"â©Š","\\twocups",!0);a(i,k,"â©","\\Sqcap",!0);a(i,k,"â©","\\Sqcup",!0);a(i,k,"â©–","\\veeonvee",!0);a(i,k,"â©•","\\wedgeonwedge",!0);a(i,k,"â§—","\\blackhourglass",!0);a(i,k,"â§†","\\boxast",!0);a(i,k,"â§ˆ","\\boxbox",!0);a(i,k,"â§‡","\\boxcircle",!0);a(i,k,"âŠœ","\\circledequal",!0);a(i,k,"â¦·","\\circledparallel",!0);a(i,k,"â¦¶","\\circledvert",!0);a(i,k,"â¦µ","\\circlehbar",!0);a(i,k,"âŸ¡","\\concavediamond",!0);a(i,k,"âŸ¢","\\concavediamondtickleft",!0);a(i,k,"âŸ£","\\concavediamondtickright",!0);a(i,k,"â‹„","\\diamond",!0);a(i,k,"â§–","\\hourglass",!0);a(i,k,"âŸ ","\\lozengeminus",!0);a(i,k,"âŒ½","\\obar",!0);a(i,k,"â¦¸","\\obslash",!0);a(i,k,"â¨¸","\\odiv",!0);a(i,k,"â§","\\ogreaterthan",!0);a(i,k,"â§€","\\olessthan",!0);a(i,k,"â¦¹","\\operp",!0);a(i,k,"â¨·","\\Otimes",!0);a(i,k,"â¨¶","\\otimeshat",!0);a(i,k,"â‹†","\\star",!0);a(i,k,"â–³","\\triangle",!0);a(i,k,"â¨º","\\triangleminus",!0);a(i,k,"â¨¹","\\triangleplus",!0);a(i,k,"â¨»","\\triangletimes",!0);a(i,k,"âŸ¤","\\whitesquaretickleft",!0);a(i,k,"âŸ¥","\\whitesquaretickright",!0);a(i,k,"â¨³","\\smashtimes",!0);a(i,d,"â‡¢","\\dashrightarrow",!0);a(i,d,"â‡ ","\\dashleftarrow",!0);a(i,d,"â‡‡","\\leftleftarrows",!0);a(i,d,"â‡†","\\leftrightarrows",!0);a(i,d,"â‡š","\\Lleftarrow",!0);a(i,d,"â†","\\twoheadleftarrow",!0);a(i,d,"â†¢","\\leftarrowtail",!0);a(i,d,"â†«","\\looparrowleft",!0);a(i,d,"â‡‹","\\leftrightharpoons",!0);a(i,d,"â†¶","\\curvearrowleft",!0);a(i,d,"â†º","\\circlearrowleft",!0);a(i,d,"â†°","\\Lsh",!0);a(i,d,"â‡ˆ","\\upuparrows",!0);a(i,d,"â†¿","\\upharpoonleft",!0);a(i,d,"â‡ƒ","\\downharpoonleft",!0);a(i,d,"âŠ¶","\\origof",!0);a(i,d,"âŠ·","\\imageof",!0);a(i,d,"âŠ¸","\\multimap",!0);a(i,d,"â†­","\\leftrightsquigarrow",!0);a(i,d,"â‡‰","\\rightrightarrows",!0);a(i,d,"â‡„","\\rightleftarrows",!0);a(i,d,"â† ","\\twoheadrightarrow",!0);a(i,d,"â†£","\\rightarrowtail",!0);a(i,d,"â†¬","\\looparrowright",!0);a(i,d,"â†·","\\curvearrowright",!0);a(i,d,"â†»","\\circlearrowright",!0);a(i,d,"â†±","\\Rsh",!0);a(i,d,"â‡Š","\\downdownarrows",!0);a(i,d,"â†¾","\\upharpoonright",!0);a(i,d,"â‡‚","\\downharpoonright",!0);a(i,d,"â‡","\\rightsquigarrow",!0);a(i,d,"â‡","\\leadsto");a(i,d,"â‡›","\\Rrightarrow",!0);a(i,d,"â†¾","\\restriction");a(i,f,"â€˜","`");a(i,f,"$","\\$");a(_,f,"$","\\$");a(_,f,"$","\\textdollar");a(i,f,"Â¢","\\cent");a(_,f,"Â¢","\\cent");a(i,f,"%","\\%");a(_,f,"%","\\%");a(i,f,"_","\\_");a(_,f,"_","\\_");a(_,f,"_","\\textunderscore");a(_,f,"â£","\\textvisiblespace",!0);a(i,f,"âˆ ","\\angle",!0);a(i,f,"âˆ","\\infty",!0);a(i,f,"â€²","\\prime");a(i,f,"â€³","\\dprime");a(i,f,"â€´","\\trprime");a(i,f,"â—","\\qprime");a(i,f,"â–³","\\triangle");a(_,f,"Î‘","\\Alpha",!0);a(_,f,"Î’","\\Beta",!0);a(_,f,"Î“","\\Gamma",!0);a(_,f,"Î”","\\Delta",!0);a(_,f,"Î•","\\Epsilon",!0);a(_,f,"Î–","\\Zeta",!0);a(_,f,"Î—","\\Eta",!0);a(_,f,"Î˜","\\Theta",!0);a(_,f,"Î™","\\Iota",!0);a(_,f,"Îš","\\Kappa",!0);a(_,f,"Î›","\\Lambda",!0);a(_,f,"Îœ","\\Mu",!0);a(_,f,"Î","\\Nu",!0);a(_,f,"Î","\\Xi",!0);a(_,f,"ÎŸ","\\Omicron",!0);a(_,f,"Î ","\\Pi",!0);a(_,f,"Î¡","\\Rho",!0);a(_,f,"Î£","\\Sigma",!0);a(_,f,"Î¤","\\Tau",!0);a(_,f,"Î¥","\\Upsilon",!0);a(_,f,"Î¦","\\Phi",!0);a(_,f,"Î§","\\Chi",!0);a(_,f,"Î¨","\\Psi",!0);a(_,f,"Î©","\\Omega",!0);a(i,I,"Î‘","\\Alpha",!0);a(i,I,"Î’","\\Beta",!0);a(i,I,"Î“","\\Gamma",!0);a(i,I,"Î”","\\Delta",!0);a(i,I,"Î•","\\Epsilon",!0);a(i,I,"Î–","\\Zeta",!0);a(i,I,"Î—","\\Eta",!0);a(i,I,"Î˜","\\Theta",!0);a(i,I,"Î™","\\Iota",!0);a(i,I,"Îš","\\Kappa",!0);a(i,I,"Î›","\\Lambda",!0);a(i,I,"Îœ","\\Mu",!0);a(i,I,"Î","\\Nu",!0);a(i,I,"Î","\\Xi",!0);a(i,I,"ÎŸ","\\Omicron",!0);a(i,I,"Î ","\\Pi",!0);a(i,I,"Î¡","\\Rho",!0);a(i,I,"Î£","\\Sigma",!0);a(i,I,"Î¤","\\Tau",!0);a(i,I,"Î¥","\\Upsilon",!0);a(i,I,"Î¦","\\Phi",!0);a(i,I,"Î§","\\Chi",!0);a(i,I,"Î¨","\\Psi",!0);a(i,I,"Î©","\\Omega",!0);a(i,yt,"Â¬","\\neg",!0);a(i,yt,"Â¬","\\lnot");a(i,f,"âŠ¤","\\top");a(i,f,"âŠ¥","\\bot");a(i,f,"âˆ…","\\emptyset");a(i,f,"âŒ€","\\varnothing");a(i,I,"Î±","\\alpha",!0);a(i,I,"Î²","\\beta",!0);a(i,I,"Î³","\\gamma",!0);a(i,I,"Î´","\\delta",!0);a(i,I,"Ïµ","\\epsilon",!0);a(i,I,"Î¶","\\zeta",!0);a(i,I,"Î·","\\eta",!0);a(i,I,"Î¸","\\theta",!0);a(i,I,"Î¹","\\iota",!0);a(i,I,"Îº","\\kappa",!0);a(i,I,"Î»","\\lambda",!0);a(i,I,"Î¼","\\mu",!0);a(i,I,"Î½","\\nu",!0);a(i,I,"Î¾","\\xi",!0);a(i,I,"Î¿","\\omicron",!0);a(i,I,"Ï€","\\pi",!0);a(i,I,"Ï","\\rho",!0);a(i,I,"Ïƒ","\\sigma",!0);a(i,I,"Ï„","\\tau",!0);a(i,I,"Ï…","\\upsilon",!0);a(i,I,"Ï•","\\phi",!0);a(i,I,"Ï‡","\\chi",!0);a(i,I,"Ïˆ","\\psi",!0);a(i,I,"Ï‰","\\omega",!0);a(i,I,"Îµ","\\varepsilon",!0);a(i,I,"Ï‘","\\vartheta",!0);a(i,I,"Ï–","\\varpi",!0);a(i,I,"Ï±","\\varrho",!0);a(i,I,"Ï‚","\\varsigma",!0);a(i,I,"Ï†","\\varphi",!0);a(i,I,"Ï˜","\\Coppa",!0);a(i,I,"Ï™","\\coppa",!0);a(i,I,"Ï™","\\varcoppa",!0);a(i,I,"Ï","\\Koppa",!0);a(i,I,"ÏŸ","\\koppa",!0);a(i,I,"Ï ","\\Sampi",!0);a(i,I,"Ï¡","\\sampi",!0);a(i,I,"Ïš","\\Stigma",!0);a(i,I,"Ï›","\\stigma",!0);a(i,I,"â««","\\Bot");a(i,k,"âˆ—","âˆ—",!0);a(i,k,"+","+");a(i,k,"*","*");a(i,k,"â„","/",!0);a(i,k,"â„","â„");a(i,k,"âˆ’","-",!0);a(i,k,"â‹…","\\cdot",!0);a(i,k,"âˆ˜","\\circ",!0);a(i,k,"Ã·","\\div",!0);a(i,k,"Â±","\\pm",!0);a(i,k,"Ã—","\\times",!0);a(i,k,"âˆ©","\\cap",!0);a(i,k,"âˆª","\\cup",!0);a(i,k,"âˆ–","\\setminus",!0);a(i,k,"âˆ§","\\land");a(i,k,"âˆ¨","\\lor");a(i,k,"âˆ§","\\wedge",!0);a(i,k,"âˆ¨","\\vee",!0);a(i,yt,"âŸ¦","\\llbracket",!0);a(i,gt,"âŸ§","\\rrbracket",!0);a(i,yt,"âŸ¨","\\langle",!0);a(i,yt,"âŸª","\\lAngle",!0);a(i,yt,"â¦‰","\\llangle",!0);a(i,yt,"|","\\lvert");a(i,yt,"â€–","\\lVert");a(i,f,"!","\\oc");a(i,f,"?","\\wn");a(i,f,"â†“","\\shpos");a(i,f,"â†•","\\shift");a(i,f,"â†‘","\\shneg");a(i,gt,"?","?");a(i,gt,"!","!");a(i,gt,"â€¼","â€¼");a(i,gt,"âŸ©","\\rangle",!0);a(i,gt,"âŸ«","\\rAngle",!0);a(i,gt,"â¦Š","\\rrangle",!0);a(i,gt,"|","\\rvert");a(i,gt,"â€–","\\rVert");a(i,yt,"â¦ƒ","\\lBrace",!0);a(i,gt,"â¦„","\\rBrace",!0);a(i,d,"=","\\equal",!0);a(i,d,":",":");a(i,d,"â‰ˆ","\\approx",!0);a(i,d,"â‰…","\\cong",!0);a(i,d,"â‰¥","\\ge");a(i,d,"â‰¥","\\geq",!0);a(i,d,"â†","\\gets");a(i,d,">","\\gt",!0);a(i,d,"âˆˆ","\\in",!0);a(i,d,"âˆ‰","\\notin",!0);a(i,d,"î€ ","\\@not");a(i,d,"âŠ‚","\\subset",!0);a(i,d,"âŠƒ","\\supset",!0);a(i,d,"âŠ†","\\subseteq",!0);a(i,d,"âŠ‡","\\supseteq",!0);a(i,d,"âŠˆ","\\nsubseteq",!0);a(i,d,"âŠˆ","\\nsubseteqq");a(i,d,"âŠ‰","\\nsupseteq",!0);a(i,d,"âŠ‰","\\nsupseteqq");a(i,d,"âŠ¨","\\models");a(i,d,"â†","\\leftarrow",!0);a(i,d,"â‰¤","\\le");a(i,d,"â‰¤","\\leq",!0);a(i,d,"<","\\lt",!0);a(i,d,"â†’","\\rightarrow",!0);a(i,d,"â†’","\\to");a(i,d,"â‰±","\\ngeq",!0);a(i,d,"â‰±","\\ngeqq");a(i,d,"â‰±","\\ngeqslant");a(i,d,"â‰°","\\nleq",!0);a(i,d,"â‰°","\\nleqq");a(i,d,"â‰°","\\nleqslant");a(i,d,"â««","\\Perp",!0);a(i,Jt,"Â ","\\ ");a(i,Jt,"Â ","\\space");a(i,Jt,"Â ","\\nobreakspace");a(_,Jt,"Â ","\\ ");a(_,Jt,"Â "," ");a(_,Jt,"Â ","\\space");a(_,Jt,"Â ","\\nobreakspace");a(i,Jt,null,"\\nobreak");a(i,Jt,null,"\\allowbreak");a(i,ke,",",",");a(_,ke,":",":");a(i,ke,";",";");a(i,k,"âŠ¼","\\barwedge");a(i,k,"âŠ»","\\veebar");a(i,k,"âŠ™","\\odot",!0);a(i,k,"âŠ•ï¸","\\oplus");a(i,k,"âŠ—","\\otimes",!0);a(i,f,"âˆ‚","\\partial",!0);a(i,k,"âŠ˜","\\oslash",!0);a(i,k,"âŠš","\\circledcirc",!0);a(i,k,"âŠ¡","\\boxdot",!0);a(i,k,"â–³","\\bigtriangleup");a(i,k,"â–½","\\bigtriangledown");a(i,k,"â€ ","\\dagger");a(i,k,"â‹„","\\diamond");a(i,k,"â—ƒ","\\triangleleft");a(i,k,"â–¹","\\triangleright");a(i,yt,"{","\\{");a(_,f,"{","\\{");a(_,f,"{","\\textbraceleft");a(i,gt,"}","\\}");a(_,f,"}","\\}");a(_,f,"}","\\textbraceright");a(i,yt,"{","\\lbrace");a(i,gt,"}","\\rbrace");a(i,yt,"[","\\lbrack",!0);a(_,f,"[","\\lbrack",!0);a(i,gt,"]","\\rbrack",!0);a(_,f,"]","\\rbrack",!0);a(i,yt,"(","\\lparen",!0);a(i,gt,")","\\rparen",!0);a(i,yt,"â¦‡","\\llparenthesis",!0);a(i,gt,"â¦ˆ","\\rrparenthesis",!0);a(_,f,"<","\\textless",!0);a(_,f,">","\\textgreater",!0);a(i,yt,"âŒŠ","\\lfloor",!0);a(i,gt,"âŒ‹","\\rfloor",!0);a(i,yt,"âŒˆ","\\lceil",!0);a(i,gt,"âŒ‰","\\rceil",!0);a(i,f,"\\","\\backslash");a(i,f,"|","|");a(i,f,"|","\\vert");a(_,f,"|","\\textbar",!0);a(i,f,"â€–","\\|");a(i,f,"â€–","\\Vert");a(_,f,"â€–","\\textbardbl");a(_,f,"~","\\textasciitilde");a(_,f,"\\","\\textbackslash");a(_,f,"^","\\textasciicircum");a(i,d,"â†‘","\\uparrow",!0);a(i,d,"â‡‘","\\Uparrow",!0);a(i,d,"â†“","\\downarrow",!0);a(i,d,"â‡“","\\Downarrow",!0);a(i,d,"â†•","\\updownarrow",!0);a(i,d,"â‡•","\\Updownarrow",!0);a(i,Y,"âˆ","\\coprod");a(i,Y,"â‹","\\bigvee");a(i,Y,"â‹€","\\bigwedge");a(i,Y,"â¨„","\\biguplus");a(i,Y,"â¨„","\\bigcupplus");a(i,Y,"â¨ƒ","\\bigcupdot");a(i,Y,"â¨‡","\\bigdoublevee");a(i,Y,"â¨ˆ","\\bigdoublewedge");a(i,Y,"â‹‚","\\bigcap");a(i,Y,"â‹ƒ","\\bigcup");a(i,Y,"âˆ«","\\int");a(i,Y,"âˆ«","\\intop");a(i,Y,"âˆ¬","\\iint");a(i,Y,"âˆ­","\\iiint");a(i,Y,"âˆ","\\prod");a(i,Y,"âˆ‘","\\sum");a(i,Y,"â¨‚","\\bigotimes");a(i,Y,"â¨","\\bigoplus");a(i,Y,"â¨€","\\bigodot");a(i,Y,"â¨‰","\\bigtimes");a(i,Y,"âˆ®","\\oint");a(i,Y,"âˆ¯","\\oiint");a(i,Y,"âˆ°","\\oiiint");a(i,Y,"âˆ±","\\intclockwise");a(i,Y,"âˆ²","\\varointclockwise");a(i,Y,"â¨Œ","\\iiiint");a(i,Y,"â¨","\\intbar");a(i,Y,"â¨","\\intBar");a(i,Y,"â¨","\\fint");a(i,Y,"â¨’","\\rppolint");a(i,Y,"â¨“","\\scpolint");a(i,Y,"â¨•","\\pointint");a(i,Y,"â¨–","\\sqint");a(i,Y,"â¨—","\\intlarhk");a(i,Y,"â¨˜","\\intx");a(i,Y,"â¨™","\\intcap");a(i,Y,"â¨š","\\intcup");a(i,Y,"â¨…","\\bigsqcap");a(i,Y,"â¨†","\\bigsqcup");a(i,Y,"âˆ«","\\smallint");a(_,ue,"â€¦","\\textellipsis");a(i,ue,"â€¦","\\mathellipsis");a(_,ue,"â€¦","\\ldots",!0);a(i,ue,"â€¦","\\ldots",!0);a(i,ue,"â‹°","\\iddots",!0);a(i,ue,"â‹¯","\\@cdots",!0);a(i,ue,"â‹±","\\ddots",!0);a(i,f,"â‹®","\\varvdots");a(i,et,"ËŠ","\\acute");a(i,et,"`","\\grave");a(i,et,"Â¨","\\ddot");a(i,et,"â€¦","\\dddot");a(i,et,"â€¦.","\\ddddot");a(i,et,"~","\\tilde");a(i,et,"â€¾","\\bar");a(i,et,"Ë˜","\\breve");a(i,et,"Ë‡","\\check");a(i,et,"^","\\hat");a(i,et,"â†’","\\vec");a(i,et,"Ë™","\\dot");a(i,et,"Ëš","\\mathring");a(i,I,"Ä±","\\imath",!0);a(i,I,"È·","\\jmath",!0);a(i,f,"Ä±","Ä±");a(i,f,"È·","È·");a(_,f,"Ä±","\\i",!0);a(_,f,"È·","\\j",!0);a(_,f,"ÃŸ","\\ss",!0);a(_,f,"Ã¦","\\ae",!0);a(_,f,"Å“","\\oe",!0);a(_,f,"Ã¸","\\o",!0);a(i,I,"Ã¸","\\o",!0);a(_,f,"Ã†","\\AE",!0);a(_,f,"Å’","\\OE",!0);a(_,f,"Ã˜","\\O",!0);a(i,I,"Ã˜","\\O",!0);a(_,et,"ËŠ","\\'");a(_,et,"Ë‹","\\`");a(_,et,"Ë†","\\^");a(_,et,"Ëœ","\\~");a(_,et,"Ë‰","\\=");a(_,et,"Ë˜","\\u");a(_,et,"Ë™","\\.");a(_,et,"Â¸","\\c");a(_,et,"Ëš","\\r");a(_,et,"Ë‡","\\v");a(_,et,"Â¨",'\\"');a(_,et,"Ë","\\H");a(i,et,"ËŠ","\\'");a(i,et,"Ë‹","\\`");a(i,et,"Ë†","\\^");a(i,et,"Ëœ","\\~");a(i,et,"Ë‰","\\=");a(i,et,"Ë˜","\\u");a(i,et,"Ë™","\\.");a(i,et,"Â¸","\\c");a(i,et,"Ëš","\\r");a(i,et,"Ë‡","\\v");a(i,et,"Â¨",'\\"');a(i,et,"Ë","\\H");const la={"--":!0,"---":!0,"``":!0,"''":!0};a(_,f,"â€“","--",!0);a(_,f,"â€“","\\textendash");a(_,f,"â€”","---",!0);a(_,f,"â€”","\\textemdash");a(_,f,"â€˜","`",!0);a(_,f,"â€˜","\\textquoteleft");a(_,f,"â€™","'",!0);a(_,f,"â€™","\\textquoteright");a(_,f,"â€œ","``",!0);a(_,f,"â€œ","\\textquotedblleft");a(_,f,"â€","''",!0);a(_,f,"â€","\\textquotedblright");a(i,f,"Â°","\\degree",!0);a(_,f,"Â°","\\degree");a(_,f,"Â°","\\textdegree",!0);a(i,f,"Â£","\\pounds");a(i,f,"Â£","\\mathsterling",!0);a(_,f,"Â£","\\pounds");a(_,f,"Â£","\\textsterling",!0);a(i,f,"âœ ","\\maltese");a(_,f,"âœ ","\\maltese");a(i,f,"â‚¬","\\euro",!0);a(_,f,"â‚¬","\\euro",!0);a(_,f,"â‚¬","\\texteuro");a(i,f,"Â©","\\copyright",!0);a(_,f,"Â©","\\textcopyright");a(i,f,"âŒ€","\\diameter",!0);a(_,f,"âŒ€","\\diameter");a(i,f,"ğ›¤","\\varGamma");a(i,f,"ğ›¥","\\varDelta");a(i,f,"ğ›©","\\varTheta");a(i,f,"ğ›¬","\\varLambda");a(i,f,"ğ›¯","\\varXi");a(i,f,"ğ›±","\\varPi");a(i,f,"ğ›´","\\varSigma");a(i,f,"ğ›¶","\\varUpsilon");a(i,f,"ğ›·","\\varPhi");a(i,f,"ğ›¹","\\varPsi");a(i,f,"ğ›º","\\varOmega");a(_,f,"ğ›¤","\\varGamma");a(_,f,"ğ›¥","\\varDelta");a(_,f,"ğ›©","\\varTheta");a(_,f,"ğ›¬","\\varLambda");a(_,f,"ğ›¯","\\varXi");a(_,f,"ğ›±","\\varPi");a(_,f,"ğ›´","\\varSigma");a(_,f,"ğ›¶","\\varUpsilon");a(_,f,"ğ›·","\\varPhi");a(_,f,"ğ›¹","\\varPsi");a(_,f,"ğ›º","\\varOmega");const Qr='0123456789/@."';for(let t=0;t<Qr.length;t++){const e=Qr.charAt(t);a(i,f,e,e)}const Yr='0123456789!@*()-=+";:?/.,';for(let t=0;t<Yr.length;t++){const e=Yr.charAt(t);a(_,f,e,e)}const je="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";for(let t=0;t<je.length;t++){const e=je.charAt(t);a(i,I,e,e),a(_,f,e,e)}const Kr="Ã‡ÃÃÃ§Ã¾â„‚â„â„•â„™â„šâ„â„¤â„â„â„Šâ„‹â„Œâ„â„‘â„’â„“â„˜â„›â„œâ„¬â„°â„±â„³â„­â„¨";for(let t=0;t<Kr.length;t++){const e=Kr.charAt(t);a(i,I,e,e),a(_,f,e,e)}let B="";for(let t=0;t<je.length;t++){B=String.fromCharCode(55349,56320+t),a(i,I,B,B),a(_,f,B,B),B=String.fromCharCode(55349,56372+t),a(i,I,B,B),a(_,f,B,B),B=String.fromCharCode(55349,56424+t),a(i,I,B,B),a(_,f,B,B),B=String.fromCharCode(55349,56580+t),a(i,I,B,B),a(_,f,B,B),B=String.fromCharCode(55349,56736+t),a(i,I,B,B),a(_,f,B,B),B=String.fromCharCode(55349,56788+t),a(i,I,B,B),a(_,f,B,B),B=String.fromCharCode(55349,56840+t),a(i,I,B,B),a(_,f,B,B),B=String.fromCharCode(55349,56944+t),a(i,I,B,B),a(_,f,B,B),B=String.fromCharCode(55349,56632+t),a(i,I,B,B),a(_,f,B,B);const e=je.charAt(t);B=String.fromCharCode(55349,56476+t),a(i,I,e,B),a(_,f,e,B)}for(let t=0;t<10;t++)B=String.fromCharCode(55349,57294+t),a(i,I,B,B),a(_,f,B,B),B=String.fromCharCode(55349,57314+t),a(i,I,B,B),a(_,f,B,B),B=String.fromCharCode(55349,57324+t),a(i,I,B,B),a(_,f,B,B),B=String.fromCharCode(55349,57334+t),a(i,I,B,B),a(_,f,B,B);const ca="([{âŒŠâŒˆâŸ¨âŸ®â°âŸ¦â¦ƒ",ua=")]}âŒ‹âŒ‰âŸ©âŸ¯â±âŸ¦â¦„";function ha(t,e,r){const n=[];let s=[],o=[],l=0,c=0,h=0;for(;c<t.length;){for(;t[c]instanceof Or;)t.splice(c,1,...t[c].children);const m=t[c];if(m.attributes&&m.attributes.linebreak&&m.attributes.linebreak==="newline"){o.length>0&&s.push(new y.MathNode("mrow",o)),s.push(m),o=[];const x=new y.MathNode("mtd",s);x.style.textAlign="left",n.push(new y.MathNode("mtr",[x])),s=[],c+=1;continue}if(o.push(m),m.type&&m.type==="mo"&&m.children.length===1&&!Object.hasOwn(m.attributes,"movablelimits")){const x=m.children[0].text;if(ca.indexOf(x)>-1)h+=1;else if(ua.indexOf(x)>-1)h-=1;else if(h===0&&e==="="&&x==="="){if(l+=1,l>1){o.pop();const N=new y.MathNode("mrow",o);s.push(N),o=[m]}}else if(h===0&&e==="tex"&&x!=="âˆ‡"){const N=c<t.length-1?t[c+1]:null;let b=!0;if(!(N&&N.type==="mtext"&&N.attributes.linebreak&&N.attributes.linebreak==="nobreak"))for(let q=c+1;q<t.length;q++){const P=t[q];if(P.type&&P.type==="mspace"&&!(P.attributes.linebreak&&P.attributes.linebreak==="newline"))o.push(P),c+=1,P.attributes&&P.attributes.linebreak&&P.attributes.linebreak==="nobreak"&&(b=!1);else break}if(b){const q=new y.MathNode("mrow",o);s.push(q),o=[]}}}c+=1}if(o.length>0){const m=new y.MathNode("mrow",o);s.push(m)}if(n.length>0){const m=new y.MathNode("mtd",s);m.style.textAlign="left";const x=new y.MathNode("mtr",[m]);n.push(x);const N=new y.MathNode("mtable",n);return r||(N.setAttribute("columnalign","left"),N.setAttribute("rowspacing","0em")),N}return y.newDocumentFragment(s)}const Pt=function(t,e,r){return xt[e][t]&&xt[e][t].replace&&t.charCodeAt(0)!==55349&&!(Object.prototype.hasOwnProperty.call(la,t)&&r&&(r.fontFamily&&r.fontFamily.slice(4,6)==="tt"||r.font&&r.font.slice(4,6)==="tt"))&&(t=xt[e][t].replace),new y.TextNode(t)},Jr=(t,e)=>{if(t.children.length===0||t.children[t.children.length-1].type!=="mtext"){const r=new y.MathNode("mtext",[new y.TextNode(e.children[0].text)]);t.children.push(r)}else t.children[t.children.length-1].children[0].text+=e.children[0].text},$r=t=>{if(t.type!=="mrow"&&t.type!=="mstyle"||t.children.length===0)return t;const e=new y.MathNode("mrow");for(let r=0;r<t.children.length;r++){const n=t.children[r];if(n.type==="mtext"&&Object.keys(n.attributes).length===0)Jr(e,n);else if(n.type==="mrow"){let s=!0;for(let o=0;o<n.children.length;o++)if(n.children[o].type!=="mtext"||Object.keys(n.attributes).length!==0){s=!1;break}if(s)for(let o=0;o<n.children.length;o++){const l=n.children[o];Jr(e,l)}else e.children.push(n)}else e.children.push(n)}for(let r=0;r<e.children.length;r++)if(e.children[r].type==="mtext"){const n=e.children[r];n.children[0].text.charAt(0)===" "&&(n.children[0].text="Â "+n.children[0].text.slice(1));const s=n.children[0].text.length;s>0&&n.children[0].text.charAt(s-1)===" "&&(n.children[0].text=n.children[0].text.slice(0,-1)+"Â ");for(const[o,l]of Object.entries(t.attributes))n.attributes[o]=l}return e.children.length===1&&e.children[0].type==="mtext"?e.children[0]:e},tn=/^[0-9]$/,da=(t,e)=>(t.type==="textord"&&t.text==="."||t.type==="atom"&&t.text===",")&&t.loc&&e.loc&&t.loc.end===e.loc.start,pa=t=>{if(t.length<2)return;const e=[];let r=!1;for(let n=0;n<t.length;n++){const s=t[n];s.type==="textord"&&tn.test(s.text)?(r||e.push({start:n}),r=!0):(r&&(e[e.length-1].end=n-1),r=!1)}r&&(e[e.length-1].end=t.length-1);for(let n=e.length-1;n>0;n--)e[n-1].end===e[n].start-2&&da(t[e[n].start-1],t[e[n].start])&&(e[n-1].end=e[n].end,e.splice(n,1));for(let n=e.length-1;n>=0;n--){for(let s=e[n].start+1;s<=e[n].end;s++)t[e[n].start].text+=t[s].text;if(t.splice(e[n].start+1,e[n].end-e[n].start),t.length>e[n].start+1){const s=t[e[n].start+1];s.type==="supsub"&&s.base&&s.base.type==="textord"&&tn.test(s.base.text)&&(s.base.text=t[e[n].start].text+s.base.text,t.splice(e[n].start,1))}}},Br=function(t,e=!1){if(t.length===1&&!(t[0]instanceof Or))return t[0];if(!e){t[0]instanceof Mt&&t[0].type==="mo"&&!t[0].attributes.fence&&(t[0].attributes.lspace="0em",t[0].attributes.rspace="0em");const r=t.length-1;t[r]instanceof Mt&&t[r].type==="mo"&&!t[r].attributes.fence&&(t[r].attributes.lspace="0em",t[r].attributes.rspace="0em")}return new y.MathNode("mrow",t)},Ce=t=>t.type==="atom"&&t.family==="rel"||t.type==="mclass"&&t.mclass==="mrel",Ct=function(t,e,r=!1){if(!r&&t.length===1){const s=ut(t[0],e);return s instanceof Mt&&s.type==="mo"&&(s.setAttribute("lspace","0em"),s.setAttribute("rspace","0em")),[s]}pa(t);const n=[];for(let s=0;s<t.length;s++){const o=ut(t[s],e);s<t.length-1&&Ce(t[s])&&Ce(t[s+1])&&o.setAttribute("rspace","0em"),s>0&&Ce(t[s])&&Ce(t[s-1])&&o.setAttribute("lspace","0em"),n.push(o)}return n},te=function(t,e,r=!1){return Br(Ct(t,e,r),r)},ut=function(t,e){if(!t)return new y.MathNode("mrow");if(ze[t.type])return ze[t.type](t,e);throw new M("Got group of unknown type: '"+t.type+"'")},en=t=>new y.MathNode("mtd",[],[],{padding:"0",width:"50%"}),ma=(t,e,r,n)=>{e=te(e[0].body,r),e=$r(e),e.classes.push("tml-tag"),t=new y.MathNode("mtd",[t]);const s=[en(),t,en()];s[n?0:2].classes.push(n?"tml-left":"tml-right"),s[n?0:2].children.push(e);const o=new y.MathNode("mtr",s,["tml-tageqn"]),l=new y.MathNode("mtable",[o]);return l.style.width="100%",l.setAttribute("displaystyle","true"),l};function fa(t,e,r,n){let s=null;t.length===1&&t[0].type==="tag"&&(s=t[0].tag,t=t[0].body);const o=Ct(t,r),l=n.displayMode||n.annotate?"none":n.wrap,c=o.length===0?null:o[0];let h=o.length===1&&s===null&&c instanceof Mt?o[0]:ha(o,l,n.displayMode);if(s&&(h=ma(h,s,r,n.leqno)),n.annotate){const x=new y.MathNode("annotation",[new y.TextNode(e)]);x.setAttribute("encoding","application/x-tex"),h=new y.MathNode("semantics",[h,x])}const m=new y.MathNode("math",[h]);return n.xml&&m.setAttribute("xmlns","http://www.w3.org/1998/Math/MathML"),n.displayMode&&(m.setAttribute("display","block"),m.style.display="block math",m.classes=["tml-display"]),m}const es="acegÄ±È·mnopqrsuvwxyzÎ±Î³ÎµÎ·Î¹ÎºÎ¼Î½Î¿Ï€ÏÏ‚ÏƒÏ„Ï…Ï‡Ï‰Ï•ğšğœğğ ğ¦ğ§ğ¨ğ©ğªğ«ğ¬ğ®ğ¯ğ°ğ±ğ²ğ³",ga="ABCDEFGHIJKLMNOPQRSTUVWXYZbdfhkltÎ‘Î’Î“Î”Î•Î–Î—Î˜Î™ÎšÎ›ÎœÎÎÎŸÎ Î¡Î£Î¤Î¥Î¦Î§Î¨Î©Î²Î´Î»Î¶Ï†Î¸Ïˆğ€ğğ‚ğƒğ„ğ…ğ†ğ‡ğˆğ‰ğŠğ‹ğŒğğğğğ‘ğ’ğ“ğ”ğ•ğ–ğ—ğ˜ğ™ğ›ğğŸğ¡ğ¤ğ¥ğ­",ba=new Set(["\\alpha","\\gamma","\\delta","\\epsilon","\\eta","\\iota","\\kappa","\\mu","\\nu","\\pi","\\rho","\\sigma","\\tau","\\upsilon","\\chi","\\psi","\\omega","\\imath","\\jmath"]),xa=new Set(["\\Gamma","\\Delta","\\Sigma","\\Omega","\\beta","\\delta","\\lambda","\\theta","\\psi"]),rs=(t,e)=>{const r=t.isStretchy?Ue.accentNode(t):new y.MathNode("mo",[Pt(t.label,t.mode)]);if(t.label==="\\vec")r.style.transform="scale(0.75) translate(10%, 30%)";else if(r.style.mathStyle="normal",r.style.mathDepth="0",wa.has(t.label)&&it.isCharacterBox(t.base)){let n="";const s=t.base.text;(es.indexOf(s)>-1||ba.has(s))&&(n="tml-xshift"),(ga.indexOf(s)>-1||xa.has(s))&&(n="tml-capshift"),n&&r.classes.push(n)}return t.isStretchy||r.setAttribute("stretchy","false"),new y.MathNode(t.label==="\\c"?"munder":"mover",[ut(t.base,e),r])},ya=new Set(["\\acute","\\grave","\\ddot","\\dddot","\\ddddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring"]),wa=new Set(["\\acute","\\bar","\\breve","\\check","\\dot","\\ddot","\\grave","\\hat","\\mathring","\\'","\\^","\\~","\\=","\\u","\\.",'\\"',"\\r","\\H","\\v"]),rn={"\\`":"Ì€","\\'":"Ì","\\^":"Ì‚","\\~":"Ìƒ","\\=":"Ì„","\\u":"Ì†","\\.":"Ì‡",'\\"':"Ìˆ","\\r":"ÌŠ","\\H":"Ì‹","\\v":"ÌŒ"};$({type:"accent",names:["\\acute","\\grave","\\ddot","\\dddot","\\ddddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring","\\overparen","\\widecheck","\\widehat","\\wideparen","\\widetilde","\\overrightarrow","\\overleftarrow","\\Overrightarrow","\\overleftrightarrow","\\overgroup","\\overleftharpoon","\\overrightharpoon"],props:{numArgs:1},handler:(t,e)=>{const r=ye(e[0]),n=!ya.has(t.funcName);return{type:"accent",mode:t.parser.mode,label:t.funcName,isStretchy:n,base:r}},mathmlBuilder:rs});$({type:"accent",names:["\\'","\\`","\\^","\\~","\\=","\\c","\\u","\\.",'\\"',"\\r","\\H","\\v"],props:{numArgs:1,allowedInText:!0,allowedInMath:!0,argTypes:["primitive"]},handler:(t,e)=>{const r=ye(e[0]),n=t.parser.mode;return n==="math"&&t.parser.settings.strict&&console.log(`Temml parse error: Command ${t.funcName} is invalid in math mode.`),n==="text"&&r.text&&r.text.length===1&&t.funcName in rn&&es.indexOf(r.text)>-1?{type:"textord",mode:"text",text:r.text+rn[t.funcName]}:{type:"accent",mode:n,label:t.funcName,isStretchy:!1,base:r}},mathmlBuilder:rs});$({type:"accentUnder",names:["\\underleftarrow","\\underrightarrow","\\underleftrightarrow","\\undergroup","\\underparen","\\utilde"],props:{numArgs:1},handler:({parser:t,funcName:e},r)=>{const n=r[0];return{type:"accentUnder",mode:t.mode,label:e,base:n}},mathmlBuilder:(t,e)=>{const r=Ue.accentNode(t);return r.style["math-depth"]=0,new y.MathNode("munder",[ut(t.base,e),r])}});const nn={pt:800/803,pc:12*800/803,dd:1238/1157*800/803,cc:14856/1157*800/803,nd:685/642*800/803,nc:1370/107*800/803,sp:1/65536*800/803,mm:25.4/72,cm:2.54/72,in:1/72,px:96/72},va=["em","ex","mu","pt","mm","cm","in","px","bp","pc","dd","cc","nd","nc","sp"],ns=function(t){return typeof t!="string"&&(t=t.unit),va.indexOf(t)>-1},ss=t=>{const e=Math.max(t-1,0);return[1,.7,.5][e]},Wt=function(t,e){let r=t.number;if(e.maxSize[0]<0&&r>0)return{number:0,unit:"em"};const n=t.unit;switch(n){case"mm":case"cm":case"in":case"px":return r*nn[n]>e.maxSize[1]?{number:e.maxSize[1],unit:"pt"}:{number:r,unit:n};case"em":case"ex":return n==="ex"&&(r*=.431),r=Math.min(r/ss(e.level),e.maxSize[0]),{number:it.round(r),unit:"em"};case"bp":return r>e.maxSize[1]&&(r=e.maxSize[1]),{number:r,unit:"pt"};case"pt":case"pc":case"dd":case"cc":case"nd":case"nc":case"sp":return r=Math.min(r*nn[n],e.maxSize[1]),{number:it.round(r),unit:"pt"};case"mu":return r=Math.min(r/18,e.maxSize[0]),{number:it.round(r),unit:"em"};default:throw new M("Invalid unit: '"+n+"'")}},Kt=t=>{const e=new y.MathNode("mspace");return e.setAttribute("width",t+"em"),e},Ie=(t,e=.3,r=0)=>{if(t==null&&r===0)return Kt(e);const n=t?[t]:[];return e!==0&&n.unshift(Kt(e)),r>0&&n.push(Kt(r)),new y.MathNode("mrow",n)},nr=(t,e)=>Number(t)/ss(e),wr=(t,e,r,n)=>{const s=Ue.mathMLnode(t),o=t.slice(1,3)==="eq",l=t.charAt(1)==="x"?"1.75":t.slice(2,4)==="cd"?"3.0":o?"1.0":"2.0";s.setAttribute("lspace","0"),s.setAttribute("rspace",o?"0.5em":"0");const c=n.withLevel(n.level<2?2:3),h=nr(l,c.level),m=nr(l,3),x=Ie(null,h.toFixed(4),0),N=Ie(null,m.toFixed(4),0),b=nr(o?0:.3,c.level).toFixed(4);let q,P;const G=e&&e.body&&(e.body.body||e.body.length>0);if(G){let O=ut(e,c);O=Ie(O,b,b),q=new y.MathNode("mover",[O,N])}const Z=r&&r.body&&(r.body.body||r.body.length>0);if(Z){let O=ut(r,c);O=Ie(O,b,b),P=new y.MathNode("munder",[O,N])}let A;return!G&&!Z?A=new y.MathNode("mover",[s,x]):G&&Z?A=new y.MathNode("munderover",[s,P,q]):G?A=new y.MathNode("mover",[s,q]):A=new y.MathNode("munder",[s,P]),l==="3.0"&&(A.style.height="1em"),A.setAttribute("accent","false"),A};$({type:"xArrow",names:["\\xleftarrow","\\xrightarrow","\\xLeftarrow","\\xRightarrow","\\xleftrightarrow","\\xLeftrightarrow","\\xhookleftarrow","\\xhookrightarrow","\\xmapsto","\\xrightharpoondown","\\xrightharpoonup","\\xleftharpoondown","\\xleftharpoonup","\\xlongequal","\\xtwoheadrightarrow","\\xtwoheadleftarrow","\\yields","\\yieldsLeft","\\mesomerism","\\longrightharpoonup","\\longleftharpoondown","\\\\cdrightarrow","\\\\cdleftarrow","\\\\cdlongequal"],props:{numArgs:1,numOptionalArgs:1},handler({parser:t,funcName:e},r,n){return{type:"xArrow",mode:t.mode,name:e,body:r[0],below:n[0]}},mathmlBuilder(t,e){const r=[wr(t.name,t.body,t.below,e)];return r.unshift(Kt(.2778)),r.push(Kt(.2778)),new y.MathNode("mrow",r)}});const sn={"\\xtofrom":["\\xrightarrow","\\xleftarrow"],"\\xleftrightharpoons":["\\xleftharpoonup","\\xrightharpoondown"],"\\xrightleftharpoons":["\\xrightharpoonup","\\xleftharpoondown"],"\\yieldsLeftRight":["\\yields","\\yieldsLeft"],"\\equilibrium":["\\longrightharpoonup","\\longleftharpoondown"],"\\equilibriumRight":["\\longrightharpoonup","\\eqleftharpoondown"],"\\equilibriumLeft":["\\eqrightharpoonup","\\longleftharpoondown"]};$({type:"stackedArrow",names:["\\xtofrom","\\xleftrightharpoons","\\xrightleftharpoons","\\yieldsLeftRight","\\equilibrium","\\equilibriumRight","\\equilibriumLeft"],props:{numArgs:1,numOptionalArgs:1},handler({parser:t,funcName:e},r,n){const s=r[0]?{type:"hphantom",mode:t.mode,body:r[0]}:null,o=n[0]?{type:"hphantom",mode:t.mode,body:n[0]}:null;return{type:"stackedArrow",mode:t.mode,name:e,body:r[0],upperArrowBelow:o,lowerArrowBody:s,below:n[0]}},mathmlBuilder(t,e){const r=sn[t.name][0],n=sn[t.name][1],s=wr(r,t.body,t.upperArrowBelow,e),o=wr(n,t.lowerArrowBody,t.below,e);let l;const c=new y.MathNode("mpadded",[s]);if(c.setAttribute("voffset","0.3em"),c.setAttribute("height","+0.3em"),c.setAttribute("depth","-0.3em"),t.name==="\\equilibriumLeft"){const h=new y.MathNode("mpadded",[o]);h.setAttribute("width","0.5em"),l=new y.MathNode("mpadded",[Kt(.2778),h,c,Kt(.2778)])}else c.setAttribute("width",t.name==="\\equilibriumRight"?"0.5em":"0"),l=new y.MathNode("mpadded",[Kt(.2778),c,o,Kt(.2778)]);return l.setAttribute("voffset","-0.18em"),l.setAttribute("height","-0.18em"),l.setAttribute("depth","+0.18em"),l}});function V(t,e){if(!t||t.type!==e)throw new Error(`Expected node of type ${e}, but got `+(t?`node of type ${t.type}`:String(t)));return t}function Lr(t){const e=Ve(t);if(!e)throw new Error("Expected node of symbol group type, but got "+(t?`node of type ${t.type}`:String(t)));return e}function Ve(t){return t&&(t.type==="atom"||Object.prototype.hasOwnProperty.call(ia,t.type))?t:null}const ka={">":"\\\\cdrightarrow","<":"\\\\cdleftarrow","=":"\\\\cdlongequal",A:"\\uparrow",V:"\\downarrow","|":"\\Vert",".":"no arrow"},an=()=>({type:"styling",body:[],mode:"math",scriptLevel:"display"}),on=t=>t.type==="textord"&&t.text==="@",_a=(t,e)=>(t.type==="mathord"||t.type==="atom")&&t.text===e;function Aa(t,e,r){const n=ka[t];switch(n){case"\\\\cdrightarrow":case"\\\\cdleftarrow":return r.callFunction(n,[e[0]],[e[1]]);case"\\uparrow":case"\\downarrow":{const s=r.callFunction("\\\\cdleft",[e[0]],[]),o={type:"atom",text:n,mode:"math",family:"rel"},l=r.callFunction("\\Big",[o],[]),c=r.callFunction("\\\\cdright",[e[1]],[]),h={type:"ordgroup",mode:"math",body:[s,l,c],semisimple:!0};return r.callFunction("\\\\cdparent",[h],[])}case"\\\\cdlongequal":return r.callFunction("\\\\cdlongequal",[],[]);case"\\Vert":{const s={type:"textord",text:"\\Vert",mode:"math"};return r.callFunction("\\Big",[s],[])}default:return{type:"textord",text:" ",mode:"math"}}}function Sa(t){const e=[];for(t.gullet.beginGroup(),t.gullet.macros.set("\\cr","\\\\\\relax"),t.gullet.beginGroup();;){e.push(t.parseExpression(!1,"\\\\")),t.gullet.endGroup(),t.gullet.beginGroup();const s=t.fetch().text;if(s==="&"||s==="\\\\")t.consume();else if(s==="\\end"){e[e.length-1].length===0&&e.pop();break}else throw new M("Expected \\\\ or \\cr or \\end",t.nextToken)}let r=[];const n=[r];for(let s=0;s<e.length;s++){const o=e[s];let l=an();for(let c=0;c<o.length;c++)if(!on(o[c]))l.body.push(o[c]);else{r.push(l),c+=1;const h=Lr(o[c]).text,m=new Array(2);if(m[0]={type:"ordgroup",mode:"math",body:[]},m[1]={type:"ordgroup",mode:"math",body:[]},!("=|.".indexOf(h)>-1))if("<>AV".indexOf(h)>-1)for(let N=0;N<2;N++){let b=!0;for(let q=c+1;q<o.length;q++){if(_a(o[q],h)){b=!1,c=q;break}if(on(o[q]))throw new M("Missing a "+h+" character to complete a CD arrow.",o[q]);m[N].body.push(o[q])}if(b)throw new M("Missing a "+h+" character to complete a CD arrow.",o[c])}else throw new M('Expected one of "<>AV=|." after @.');const x=Aa(h,m,t);r.push(x),l=an()}s%2===0?r.push(l):r.shift(),r=[],n.push(r)}return n.pop(),t.gullet.endGroup(),t.gullet.endGroup(),{type:"array",mode:"math",body:n,envClasses:["jot","cd"],cols:[],hLinesBeforeRow:new Array(n.length+1).fill([])}}$({type:"cdlabel",names:["\\\\cdleft","\\\\cdright"],props:{numArgs:1},handler({parser:t,funcName:e},r){return{type:"cdlabel",mode:t.mode,side:e.slice(4),label:r[0]}},mathmlBuilder(t,e){let r=new y.MathNode("mrow",[ut(t.label,e)]);return r=new y.MathNode("mpadded",[r]),r.setAttribute("width","0"),t.side==="left"&&r.setAttribute("lspace","-1width"),r.setAttribute("voffset","0.7em"),r=new y.MathNode("mstyle",[r]),r.setAttribute("displaystyle","false"),r.setAttribute("scriptlevel","1"),r}});$({type:"cdlabelparent",names:["\\\\cdparent"],props:{numArgs:1},handler({parser:t},e){return{type:"cdlabelparent",mode:t.mode,fragment:e[0]}},mathmlBuilder(t,e){return new y.MathNode("mrow",[ut(t.fragment,e)])}});$({type:"textord",names:["\\@char"],props:{numArgs:1,allowedInText:!0},handler({parser:t,token:e},r){const n=V(r[0],"ordgroup").body;let s="";for(let l=0;l<n.length;l++){const c=V(n[l],"textord");s+=c.text}const o=parseInt(s);if(isNaN(o))throw new M(`\\@char has non-numeric argument ${s}`,e);return{type:"textord",mode:t.mode,text:String.fromCodePoint(o)}}});const Na=/^(#[a-f0-9]{3}|#?[a-f0-9]{6})$/i,qa=/^(#[a-f0-9]{3}|#?[a-f0-9]{6}|[a-z]+)$/i,Ta=/^ *\d{1,3} *(?:, *\d{1,3} *){2}$/,Ma=/^ *[10](?:\.\d*)? *(?:, *[10](?:\.\d*)? *){2}$/,Ca=/^[a-f0-9]{6}$/i,ln=t=>{let e=t.toString(16);return e.length===1&&(e="0"+e),e},cn=JSON.parse(`{
  "Apricot": "#ffb484",
  "Aquamarine": "#08b4bc",
  "Bittersweet": "#c84c14",
  "blue": "#0000FF",
  "Blue": "#303494",
  "BlueGreen": "#08b4bc",
  "BlueViolet": "#503c94",
  "BrickRed": "#b8341c",
  "brown": "#BF8040",
  "Brown": "#802404",
  "BurntOrange": "#f8941c",
  "CadetBlue": "#78749c",
  "CarnationPink": "#f884b4",
  "Cerulean": "#08a4e4",
  "CornflowerBlue": "#40ace4",
  "cyan": "#00FFFF",
  "Cyan": "#08acec",
  "Dandelion": "#ffbc44",
  "darkgray": "#404040",
  "DarkOrchid": "#a8548c",
  "Emerald": "#08ac9c",
  "ForestGreen": "#089c54",
  "Fuchsia": "#90348c",
  "Goldenrod": "#ffdc44",
  "gray": "#808080",
  "Gray": "#98949c",
  "green": "#00FF00",
  "Green": "#08a44c",
  "GreenYellow": "#e0e474",
  "JungleGreen": "#08ac9c",
  "Lavender": "#f89cc4",
  "lightgray": "#c0c0c0",
  "lime": "#BFFF00",
  "LimeGreen": "#90c43c",
  "magenta": "#FF00FF",
  "Magenta": "#f0048c",
  "Mahogany": "#b0341c",
  "Maroon": "#b03434",
  "Melon": "#f89c7c",
  "MidnightBlue": "#086494",
  "Mulberry": "#b03c94",
  "NavyBlue": "#086cbc",
  "olive": "#7F7F00",
  "OliveGreen": "#407c34",
  "orange": "#FF8000",
  "Orange": "#f8843c",
  "OrangeRed": "#f0145c",
  "Orchid": "#b074ac",
  "Peach": "#f8945c",
  "Periwinkle": "#8074bc",
  "PineGreen": "#088c74",
  "pink": "#ff7f7f",
  "Plum": "#98248c",
  "ProcessBlue": "#08b4ec",
  "purple": "#BF0040",
  "Purple": "#a0449c",
  "RawSienna": "#983c04",
  "red": "#ff0000",
  "Red": "#f01c24",
  "RedOrange": "#f86434",
  "RedViolet": "#a0246c",
  "Rhodamine": "#f0549c",
  "Royallue": "#0874bc",
  "RoyalPurple": "#683c9c",
  "RubineRed": "#f0047c",
  "Salmon": "#f8948c",
  "SeaGreen": "#30bc9c",
  "Sepia": "#701404",
  "SkyBlue": "#48c4dc",
  "SpringGreen": "#c8dc64",
  "Tan": "#e09c74",
  "teal": "#007F7F",
  "TealBlue": "#08acb4",
  "Thistle": "#d884b4",
  "Turquoise": "#08b4cc",
  "violet": "#800080",
  "Violet": "#60449c",
  "VioletRed": "#f054a4",
  "WildStrawberry": "#f0246c",
  "yellow": "#FFFF00",
  "Yellow": "#fff404",
  "YellowGreen": "#98cc6c",
  "YellowOrange": "#ffa41c"
}`),pe=(t,e)=>{let r="";if(t==="HTML"){if(!Na.test(e))throw new M("Invalid HTML input.");r=e}else if(t==="RGB"){if(!Ta.test(e))throw new M("Invalid RGB input.");e.split(",").map(n=>{r+=ln(Number(n.trim()))})}else{if(!Ma.test(e))throw new M("Invalid rbg input.");e.split(",").map(n=>{const s=Number(n.trim());if(s>1)throw new M("Color rgb input must be < 1.");r+=ln(Number((s*255).toFixed(0)))})}return r.charAt(0)!=="#"&&(r="#"+r),r},we=(t,e,r)=>{const n=`\\\\color@${t}`;if(!qa.exec(t))throw new M("Invalid color: '"+t+"'",r);return Ca.test(t)?"#"+t:(t.charAt(0)==="#"||(e.has(n)?t=e.get(n).tokens[0].text:cn[t]&&(t=cn[t])),t)},as=(t,e)=>{let r=Ct(t.body,e.withColor(t.color));return r=r.map(n=>(n.style.color=t.color,n)),y.newDocumentFragment(r)};$({type:"color",names:["\\textcolor"],props:{numArgs:2,numOptionalArgs:1,allowedInText:!0,argTypes:["raw","raw","original"]},handler({parser:t,token:e},r,n){const s=n[0]&&V(n[0],"raw").string;let o="";if(s){const c=V(r[0],"raw").string;o=pe(s,c)}else o=we(V(r[0],"raw").string,t.gullet.macros,e);const l=r[1];return{type:"color",mode:t.mode,color:o,body:ft(l)}},mathmlBuilder:as});$({type:"color",names:["\\color"],props:{numArgs:1,numOptionalArgs:1,allowedInText:!0,argTypes:["raw","raw"]},handler({parser:t,breakOnTokenText:e,token:r},n,s){const o=s[0]&&V(s[0],"raw").string;let l="";if(o){const h=V(n[0],"raw").string;l=pe(o,h)}else l=we(V(n[0],"raw").string,t.gullet.macros,r);const c=t.parseExpression(!0,e,!0);return{type:"color",mode:t.mode,color:l,body:c}},mathmlBuilder:as});$({type:"color",names:["\\definecolor"],props:{numArgs:3,allowedInText:!0,argTypes:["raw","raw","raw"]},handler({parser:t,funcName:e,token:r},n){const s=V(n[0],"raw").string;if(!/^[A-Za-z]+$/.test(s))throw new M("Color name must be latin letters.",r);const o=V(n[1],"raw").string;if(!["HTML","RGB","rgb"].includes(o))throw new M("Color model must be HTML, RGB, or rgb.",r);const l=V(n[2],"raw").string,c=pe(o,l);return t.gullet.macros.set(`\\\\color@${s}`,{tokens:[{text:c}],numArgs:0}),{type:"internal",mode:t.mode}}});$({type:"cr",names:["\\\\"],props:{numArgs:0,numOptionalArgs:0,allowedInText:!0},handler({parser:t},e,r){const n=t.gullet.future().text==="["?t.parseSizeGroup(!0):null,s=!t.settings.displayMode;return{type:"cr",mode:t.mode,newLine:s,size:n&&V(n,"size").value}},mathmlBuilder(t,e){const r=new y.MathNode("mo");if(t.newLine&&(r.setAttribute("linebreak","newline"),t.size)){const n=Wt(t.size,e);r.setAttribute("height",n.number+n.unit)}return r}});const vr={"\\global":"\\global","\\long":"\\\\globallong","\\\\globallong":"\\\\globallong","\\def":"\\gdef","\\gdef":"\\gdef","\\edef":"\\xdef","\\xdef":"\\xdef","\\let":"\\\\globallet","\\futurelet":"\\\\globalfuture"},Re=t=>{const e=t.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(e))throw new M("Expected a control sequence",t);return e},Ia=t=>{let e=t.gullet.popToken();return e.text==="="&&(e=t.gullet.popToken(),e.text===" "&&(e=t.gullet.popToken())),e},os=(t,e,r,n)=>{let s=t.gullet.macros.get(r.text);s==null&&(r.noexpand=!0,s={tokens:[r],numArgs:0,unexpandable:!t.gullet.isExpandable(r.text)}),t.gullet.macros.set(e,s,n)};$({type:"internal",names:["\\global","\\long","\\\\globallong"],props:{numArgs:0,allowedInText:!0},handler({parser:t,funcName:e}){t.consumeSpaces();const r=t.fetch();if(vr[r.text])return(e==="\\global"||e==="\\\\globallong")&&(r.text=vr[r.text]),V(t.parseFunction(),"internal");throw new M("Invalid token after macro prefix",r)}});$({type:"internal",names:["\\def","\\gdef","\\edef","\\xdef"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler({parser:t,funcName:e}){let r=t.gullet.popToken();const n=r.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(n))throw new M("Expected a control sequence",r);let s=0,o;const l=[[]];for(;t.gullet.future().text!=="{";)if(r=t.gullet.popToken(),r.text==="#"){if(t.gullet.future().text==="{"){o=t.gullet.future(),l[s].push("{");break}if(r=t.gullet.popToken(),!/^[1-9]$/.test(r.text))throw new M(`Invalid argument number "${r.text}"`);if(parseInt(r.text)!==s+1)throw new M(`Argument number "${r.text}" out of order`);s++,l.push([])}else{if(r.text==="EOF")throw new M("Expected a macro definition");l[s].push(r.text)}let{tokens:c}=t.gullet.consumeArg();if(o&&c.unshift(o),e==="\\edef"||e==="\\xdef"){if(c=t.gullet.expandTokens(c),c.length>t.gullet.settings.maxExpand)throw new M("Too many expansions in an "+e);c.reverse()}return t.gullet.macros.set(n,{tokens:c,numArgs:s,delimiters:l},e===vr[e]),{type:"internal",mode:t.mode}}});$({type:"internal",names:["\\let","\\\\globallet"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler({parser:t,funcName:e}){const r=Re(t.gullet.popToken());t.gullet.consumeSpaces();const n=Ia(t);return os(t,r,n,e==="\\\\globallet"),{type:"internal",mode:t.mode}}});$({type:"internal",names:["\\futurelet","\\\\globalfuture"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler({parser:t,funcName:e}){const r=Re(t.gullet.popToken()),n=t.gullet.popToken(),s=t.gullet.popToken();return os(t,r,s,e==="\\\\globalfuture"),t.gullet.pushToken(s),t.gullet.pushToken(n),{type:"internal",mode:t.mode}}});$({type:"internal",names:["\\newcommand","\\renewcommand","\\providecommand"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler({parser:t,funcName:e}){let r="";const n=t.gullet.popToken();n.text==="{"?(r=Re(t.gullet.popToken()),t.gullet.popToken()):r=Re(n);const s=t.gullet.isDefined(r);if(s&&e==="\\newcommand")throw new M(`\\newcommand{${r}} attempting to redefine ${r}; use \\renewcommand`);if(!s&&e==="\\renewcommand")throw new M(`\\renewcommand{${r}} when command ${r} does not yet exist; use \\newcommand`);let o=0;if(t.gullet.future().text==="["){let c=t.gullet.popToken();if(c=t.gullet.popToken(),!/^[0-9]$/.test(c.text))throw new M(`Invalid number of arguments: "${c.text}"`);if(o=parseInt(c.text),c=t.gullet.popToken(),c.text!=="]")throw new M(`Invalid argument "${c.text}"`)}const{tokens:l}=t.gullet.consumeArg();return t.gullet.macros.set(r,{tokens:l,numArgs:o}),{type:"internal",mode:t.mode}}});const kr={"\\bigl":{mclass:"mopen",size:1},"\\Bigl":{mclass:"mopen",size:2},"\\biggl":{mclass:"mopen",size:3},"\\Biggl":{mclass:"mopen",size:4},"\\bigr":{mclass:"mclose",size:1},"\\Bigr":{mclass:"mclose",size:2},"\\biggr":{mclass:"mclose",size:3},"\\Biggr":{mclass:"mclose",size:4},"\\bigm":{mclass:"mrel",size:1},"\\Bigm":{mclass:"mrel",size:2},"\\biggm":{mclass:"mrel",size:3},"\\Biggm":{mclass:"mrel",size:4},"\\big":{mclass:"mord",size:1},"\\Big":{mclass:"mord",size:2},"\\bigg":{mclass:"mord",size:3},"\\Bigg":{mclass:"mord",size:4}},is=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","â¦‡","\\llparenthesis","â¦ˆ","\\rrparenthesis","\\lfloor","\\rfloor","âŒŠ","âŒ‹","\\lceil","\\rceil","âŒˆ","âŒ‰","<",">","\\langle","âŸ¨","\\rangle","âŸ©","\\lAngle","âŸª","\\rAngle","âŸ«","\\llangle","â¦‰","\\rrangle","â¦Š","\\lt","\\gt","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","âŸ®","âŸ¯","\\lmoustache","\\rmoustache","â°","â±","\\llbracket","\\rrbracket","âŸ¦","âŸ¦","\\lBrace","\\rBrace","â¦ƒ","â¦„","/","\\backslash","|","\\vert","\\|","\\Vert","\\uparrow","\\Uparrow","\\downarrow","\\Downarrow","\\updownarrow","\\Updownarrow","."],Oa=["}","\\left","\\middle","\\right"],Ze=t=>t.length>0&&(is.includes(t)||kr[t]||Oa.includes(t)),un=[0,1.2,1.8,2.4,3];function ve(t,e){const r=Ve(t);if(r&&is.includes(r.text))return["/","â„"].includes(r.text)&&(r.text="âˆ•"),["<","\\lt"].includes(r.text)&&(r.text="âŸ¨"),[">","\\gt"].includes(r.text)&&(r.text="âŸ©"),r.text==="\\backslash"&&(r.text="âˆ–"),r;throw r?new M(`Invalid delimiter '${r.text}' after '${e.funcName}'`,t):new M(`Invalid delimiter type '${t.type}'`,t)}$({type:"delimsizing",names:["\\bigl","\\Bigl","\\biggl","\\Biggl","\\bigr","\\Bigr","\\biggr","\\Biggr","\\bigm","\\Bigm","\\biggm","\\Biggm","\\big","\\Big","\\bigg","\\Bigg"],props:{numArgs:1,argTypes:["primitive"]},handler:(t,e)=>{const r=ve(e[0],t);return{type:"delimsizing",mode:t.parser.mode,size:kr[t.funcName].size,mclass:kr[t.funcName].mclass,delim:r.text}},mathmlBuilder:t=>{const e=[];t.delim==="."&&(t.delim=""),e.push(Pt(t.delim,t.mode));const r=new y.MathNode("mo",e);return t.mclass==="mopen"||t.mclass==="mclose"?r.setAttribute("fence","true"):r.setAttribute("fence","false"),(t.delim==="âˆ–"||t.delim==="\\vert"||t.delim==="|"||t.delim.indexOf("arrow")>-1)&&r.setAttribute("stretchy","true"),r.setAttribute("symmetric","true"),r.setAttribute("minsize",un[t.size]+"em"),r.setAttribute("maxsize",un[t.size]+"em"),r}});function Pa(t){if(!t.body)throw new Error("Bug: The leftright ParseNode wasn't fully parsed.")}$({type:"leftright-right",names:["\\right"],props:{numArgs:1,argTypes:["primitive"]},handler:(t,e)=>({type:"leftright-right",mode:t.parser.mode,delim:ve(e[0],t).text})});$({type:"leftright",names:["\\left"],props:{numArgs:1,argTypes:["primitive"]},handler:(t,e)=>{const r=ve(e[0],t),n=t.parser;++n.leftrightDepth;let s=n.parseExpression(!1,null,!0),o=n.fetch();for(;o.text==="\\middle";){n.consume();const c=n.fetch().text;if(!xt.math[c])throw new M(`Invalid delimiter '${c}' after '\\middle'`);ve({type:"atom",mode:"math",text:c},{funcName:"\\middle"}),s.push({type:"middle",mode:"math",delim:c}),n.consume(),s=s.concat(n.parseExpression(!1,null,!0)),o=n.fetch()}--n.leftrightDepth,n.expect("\\right",!1);const l=V(n.parseFunction(),"leftright-right");return{type:"leftright",mode:n.mode,body:s,left:r.text,right:l.delim}},mathmlBuilder:(t,e)=>{Pa(t);const r=Ct(t.body,e);t.left==="."&&(t.left="");const n=new y.MathNode("mo",[Pt(t.left,t.mode)]);n.setAttribute("fence","true"),n.setAttribute("form","prefix"),(t.left==="âˆ–"||t.left.indexOf("arrow")>-1)&&n.setAttribute("stretchy","true"),r.unshift(n),t.right==="."&&(t.right="");const s=new y.MathNode("mo",[Pt(t.right,t.mode)]);return s.setAttribute("fence","true"),s.setAttribute("form","postfix"),(t.right==="âˆ–"||t.right.indexOf("arrow")>-1)&&s.setAttribute("stretchy","true"),r.push(s),Br(r)}});$({type:"middle",names:["\\middle"],props:{numArgs:1,argTypes:["primitive"]},handler:(t,e)=>{const r=ve(e[0],t);if(!t.parser.leftrightDepth)throw new M("\\middle without preceding \\left",r);return{type:"middle",mode:t.parser.mode,delim:r.text}},mathmlBuilder:(t,e)=>{const r=Pt(t.delim,t.mode),n=new y.MathNode("mo",[r]);return n.setAttribute("fence","true"),t.delim.indexOf("arrow")>-1&&n.setAttribute("stretchy","true"),n.setAttribute("form","prefix"),n.setAttribute("lspace","0.05em"),n.setAttribute("rspace","0.05em"),n}});const hn=t=>{const e=new y.MathNode("mspace");return e.setAttribute("width","3pt"),e},_e=(t,e)=>{let r;switch(t.label.indexOf("colorbox")>-1||t.label==="\\boxed"?r=new y.MathNode("mrow",[hn(),ut(t.body,e),hn()]):r=new y.MathNode("menclose",[ut(t.body,e)]),t.label){case"\\overline":r.setAttribute("notation","top"),r.classes.push("tml-overline");break;case"\\underline":r.setAttribute("notation","bottom"),r.classes.push("tml-underline");break;case"\\cancel":r.setAttribute("notation","updiagonalstrike"),r.children.push(new y.MathNode("mrow",[],["tml-cancel","upstrike"]));break;case"\\bcancel":r.setAttribute("notation","downdiagonalstrike"),r.children.push(new y.MathNode("mrow",[],["tml-cancel","downstrike"]));break;case"\\sout":r.setAttribute("notation","horizontalstrike"),r.children.push(new y.MathNode("mrow",[],["tml-cancel","sout"]));break;case"\\xcancel":r.setAttribute("notation","updiagonalstrike downdiagonalstrike"),r.classes.push("tml-xcancel");break;case"\\longdiv":r.setAttribute("notation","longdiv"),r.classes.push("longdiv-top"),r.children.push(new y.MathNode("mrow",[],["longdiv-arc"]));break;case"\\phase":r.setAttribute("notation","phasorangle"),r.classes.push("phasor-bottom"),r.children.push(new y.MathNode("mrow",[],["phasor-angle"]));break;case"\\textcircled":r.setAttribute("notation","circle"),r.classes.push("circle-pad"),r.children.push(new y.MathNode("mrow",[],["textcircle"]));break;case"\\angl":r.setAttribute("notation","actuarial"),r.classes.push("actuarial");break;case"\\boxed":r.setAttribute("notation","box"),r.classes.push("tml-box"),r.setAttribute("scriptlevel","0"),r.setAttribute("displaystyle","true");break;case"\\fbox":r.setAttribute("notation","box"),r.classes.push("tml-fbox");break;case"\\fcolorbox":case"\\colorbox":{const n={padding:"3pt 0 3pt 0"};t.label==="\\fcolorbox"&&(n.border="0.0667em solid "+String(t.borderColor)),r.style=n;break}}return t.backgroundColor&&r.setAttribute("mathbackground",t.backgroundColor),r};$({type:"enclose",names:["\\colorbox"],props:{numArgs:2,numOptionalArgs:1,allowedInText:!0,argTypes:["raw","raw","text"]},handler({parser:t,funcName:e},r,n){const s=n[0]&&V(n[0],"raw").string;let o="";if(s){const c=V(r[0],"raw").string;o=pe(s,c)}else o=we(V(r[0],"raw").string,t.gullet.macros);const l=r[1];return{type:"enclose",mode:t.mode,label:e,backgroundColor:o,body:l}},mathmlBuilder:_e});$({type:"enclose",names:["\\fcolorbox"],props:{numArgs:3,numOptionalArgs:1,allowedInText:!0,argTypes:["raw","raw","raw","text"]},handler({parser:t,funcName:e},r,n){const s=n[0]&&V(n[0],"raw").string;let o="",l;if(s){const h=V(r[0],"raw").string,m=V(r[0],"raw").string;o=pe(s,h),l=pe(s,m)}else o=we(V(r[0],"raw").string,t.gullet.macros),l=we(V(r[1],"raw").string,t.gullet.macros);const c=r[2];return{type:"enclose",mode:t.mode,label:e,backgroundColor:l,borderColor:o,body:c}},mathmlBuilder:_e});$({type:"enclose",names:["\\fbox"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!0},handler({parser:t},e){return{type:"enclose",mode:t.mode,label:"\\fbox",body:e[0]}}});$({type:"enclose",names:["\\angl","\\cancel","\\bcancel","\\xcancel","\\sout","\\overline","\\boxed","\\longdiv","\\phase"],props:{numArgs:1},handler({parser:t,funcName:e},r){const n=r[0];return{type:"enclose",mode:t.mode,label:e,body:n}},mathmlBuilder:_e});$({type:"enclose",names:["\\underline"],props:{numArgs:1,allowedInText:!0},handler({parser:t,funcName:e},r){const n=r[0];return{type:"enclose",mode:t.mode,label:e,body:n}},mathmlBuilder:_e});$({type:"enclose",names:["\\textcircled"],props:{numArgs:1,argTypes:["text"],allowedInArgument:!0,allowedInText:!0},handler({parser:t,funcName:e},r){const n=r[0];return{type:"enclose",mode:t.mode,label:e,body:n}},mathmlBuilder:_e});const ls={};function Gt({type:t,names:e,props:r,handler:n,mathmlBuilder:s}){const o={type:t,numArgs:r.numArgs||0,allowedInText:!1,numOptionalArgs:0,handler:n};for(let l=0;l<e.length;++l)ls[e[l]]=o;s&&(ze[t]=s)}const bt={DISPLAY:0,TEXT:1,SCRIPT:2,SCRIPTSCRIPT:3},cs={};function u(t,e){cs[t]=e}const $a=cs;u("\\noexpand",function(t){const e=t.popToken();return t.isExpandable(e.text)&&(e.noexpand=!0,e.treatAsRelax=!0),{tokens:[e],numArgs:0}});u("\\expandafter",function(t){const e=t.popToken();return t.expandOnce(!0),{tokens:[e],numArgs:0}});u("\\@firstoftwo",function(t){return{tokens:t.consumeArgs(2)[0],numArgs:0}});u("\\@secondoftwo",function(t){return{tokens:t.consumeArgs(2)[1],numArgs:0}});u("\\@ifnextchar",function(t){const e=t.consumeArgs(3);t.consumeSpaces();const r=t.future();return e[0].length===1&&e[0][0].text===r.text?{tokens:e[1],numArgs:0}:{tokens:e[2],numArgs:0}});u("\\@ifstar","\\@ifnextchar *{\\@firstoftwo{#1}}");u("\\TextOrMath",function(t){const e=t.consumeArgs(2);return t.mode==="text"?{tokens:e[0],numArgs:0}:{tokens:e[1],numArgs:0}});const _r=t=>{let e="";for(let r=t.length-1;r>-1;r--)e+=t[r].text;return e},Er={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15},dn=t=>{const e=t.future().text;return e==="EOF"?[null,""]:[Er[e.charAt(0)],e]},pn=(t,e,r)=>{for(let n=1;n<e.length;n++){const s=Er[e.charAt(n)];t*=r,t+=s}return t};u("\\char",function(t){let e=t.popToken(),r,n="";if(e.text==="'")r=8,e=t.popToken();else if(e.text==='"')r=16,e=t.popToken();else if(e.text==="`")if(e=t.popToken(),e.text[0]==="\\")n=e.text.charCodeAt(1);else{if(e.text==="EOF")throw new M("\\char` missing argument");n=e.text.charCodeAt(0)}else r=10;if(r){let s=e.text;if(n=Er[s.charAt(0)],n==null||n>=r)throw new M(`Invalid base-${r} digit ${e.text}`);n=pn(n,s,r);let o;for([o,s]=dn(t);o!=null&&o<r;)n*=r,n+=o,n=pn(n,s,r),t.popToken(),[o,s]=dn(t)}return`\\@char{${n}}`});function zr(t){const e=t.consumeArgs(1)[0];let r="",n=e[e.length-1].loc.start;for(let s=e.length-1;s>=0;s--){const o=e[s].loc.start;o>n&&(r+=" ",n=o),r+=e[s].text,n+=e[s].text.length}return r}u("\\surd","\\sqrt{\\vphantom{|}}");u("âŠ•","\\oplus");u("\\long","");u("\\bgroup","{");u("\\egroup","}");u("~","\\nobreakspace");u("\\lq","`");u("\\rq","'");u("\\aa","\\r a");u("\\Bbbk","\\Bbb{k}");u("\\mathstrut","\\vphantom{(}");u("\\underbar","\\underline{\\text{#1}}");u("\\vdots","{\\varvdots\\rule{0pt}{15pt}}");u("â‹®","\\vdots");u("\\arraystretch","1");u("\\arraycolsep","6pt");u("\\substack","\\begin{subarray}{c}#1\\end{subarray}");u("\\iff","\\DOTSB\\;\\Longleftrightarrow\\;");u("\\implies","\\DOTSB\\;\\Longrightarrow\\;");u("\\impliedby","\\DOTSB\\;\\Longleftarrow\\;");const mn={",":"\\dotsc","\\not":"\\dotsb","+":"\\dotsb","=":"\\dotsb","<":"\\dotsb",">":"\\dotsb","-":"\\dotsb","*":"\\dotsb",":":"\\dotsb","\\DOTSB":"\\dotsb","\\coprod":"\\dotsb","\\bigvee":"\\dotsb","\\bigwedge":"\\dotsb","\\biguplus":"\\dotsb","\\bigcap":"\\dotsb","\\bigcup":"\\dotsb","\\prod":"\\dotsb","\\sum":"\\dotsb","\\bigotimes":"\\dotsb","\\bigoplus":"\\dotsb","\\bigodot":"\\dotsb","\\bigsqcap":"\\dotsb","\\bigsqcup":"\\dotsb","\\bigtimes":"\\dotsb","\\And":"\\dotsb","\\longrightarrow":"\\dotsb","\\Longrightarrow":"\\dotsb","\\longleftarrow":"\\dotsb","\\Longleftarrow":"\\dotsb","\\longleftrightarrow":"\\dotsb","\\Longleftrightarrow":"\\dotsb","\\mapsto":"\\dotsb","\\longmapsto":"\\dotsb","\\hookrightarrow":"\\dotsb","\\doteq":"\\dotsb","\\mathbin":"\\dotsb","\\mathrel":"\\dotsb","\\relbar":"\\dotsb","\\Relbar":"\\dotsb","\\xrightarrow":"\\dotsb","\\xleftarrow":"\\dotsb","\\DOTSI":"\\dotsi","\\int":"\\dotsi","\\oint":"\\dotsi","\\iint":"\\dotsi","\\iiint":"\\dotsi","\\iiiint":"\\dotsi","\\idotsint":"\\dotsi","\\DOTSX":"\\dotsx"};u("\\dots",function(t){let e="\\dotso";const r=t.expandAfterFuture().text;return r in mn?e=mn[r]:(r.slice(0,4)==="\\not"||r in xt.math&&["bin","rel"].includes(xt.math[r].group))&&(e="\\dotsb"),e});const Dr={")":!0,"]":!0,"\\rbrack":!0,"\\}":!0,"\\rbrace":!0,"\\rangle":!0,"\\rceil":!0,"\\rfloor":!0,"\\rgroup":!0,"\\rmoustache":!0,"\\right":!0,"\\bigr":!0,"\\biggr":!0,"\\Bigr":!0,"\\Biggr":!0,$:!0,";":!0,".":!0,",":!0};u("\\dotso",function(t){return t.future().text in Dr?"\\ldots\\,":"\\ldots"});u("\\dotsc",function(t){const e=t.future().text;return e in Dr&&e!==","?"\\ldots\\,":"\\ldots"});u("\\cdots",function(t){return t.future().text in Dr?"\\@cdots\\,":"\\@cdots"});u("\\dotsb","\\cdots");u("\\dotsm","\\cdots");u("\\dotsi","\\!\\cdots");u("\\idotsint","\\dotsi");u("\\dotsx","\\ldots\\,");u("\\DOTSI","\\relax");u("\\DOTSB","\\relax");u("\\DOTSX","\\relax");u("\\tmspace","\\TextOrMath{\\kern#1#3}{\\mskip#1#2}\\relax");u("\\,","{\\tmspace+{3mu}{.1667em}}");u("\\thinspace","\\,");u("\\>","\\mskip{4mu}");u("\\:","{\\tmspace+{4mu}{.2222em}}");u("\\medspace","\\:");u("\\;","{\\tmspace+{5mu}{.2777em}}");u("\\thickspace","\\;");u("\\!","{\\tmspace-{3mu}{.1667em}}");u("\\negthinspace","\\!");u("\\negmedspace","{\\tmspace-{4mu}{.2222em}}");u("\\negthickspace","{\\tmspace-{5mu}{.277em}}");u("\\enspace","\\kern.5em ");u("\\enskip","\\hskip.5em\\relax");u("\\quad","\\hskip1em\\relax");u("\\qquad","\\hskip2em\\relax");u("\\AA","\\TextOrMath{\\Angstrom}{\\mathring{A}}\\relax");u("\\tag","\\@ifstar\\tag@literal\\tag@paren");u("\\tag@paren","\\tag@literal{({#1})}");u("\\tag@literal",t=>{if(t.macros.get("\\df@tag"))throw new M("Multiple \\tag");return"\\def\\df@tag{\\text{#1}}"});u("\\bmod","\\mathbin{\\text{mod}}");u("\\pod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern8mu}{\\mkern8mu}{\\mkern8mu}(#1)");u("\\pmod","\\pod{{\\rm mod}\\mkern6mu#1}");u("\\mod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern12mu}{\\mkern12mu}{\\mkern12mu}{\\rm mod}\\,\\,#1");u("\\newline","\\\\\\relax");u("\\TeX","\\textrm{T}\\kern-.1667em\\raisebox{-.5ex}{E}\\kern-.125em\\textrm{X}");u("\\LaTeX","\\textrm{L}\\kern-.35em\\raisebox{0.2em}{\\scriptstyle A}\\kern-.15em\\TeX");u("\\Temml","\\textrm{T}\\kern-0.2em\\lower{0.2em}{\\textrm{E}}\\kern-0.08em{\\textrm{M}\\kern-0.08em\\raise{0.2em}\\textrm{M}\\kern-0.08em\\textrm{L}}");u("\\hspace","\\@ifstar\\@hspacer\\@hspace");u("\\@hspace","\\hskip #1\\relax");u("\\@hspacer","\\rule{0pt}{0pt}\\hskip #1\\relax");u("\\colon",'\\mathpunct{\\char"3a}');u("\\prescript","\\pres@cript{_{#1}^{#2}}{}{#3}");u("\\ordinarycolon",'\\char"3a');u("\\vcentcolon","\\mathrel{\\raisebox{0.035em}{\\ordinarycolon}}");u("\\coloneq",'\\mathrel{\\raisebox{0.035em}{\\ordinarycolon}\\char"2212}');u("\\Coloneq",'\\mathrel{\\char"2237\\char"2212}');u("\\Eqqcolon",'\\mathrel{\\char"3d\\char"2237}');u("\\Eqcolon",'\\mathrel{\\char"2212\\char"2237}');u("\\colonapprox",'\\mathrel{\\raisebox{0.035em}{\\ordinarycolon}\\char"2248}');u("\\Colonapprox",'\\mathrel{\\char"2237\\char"2248}');u("\\colonsim",'\\mathrel{\\raisebox{0.035em}{\\ordinarycolon}\\char"223c}');u("\\Colonsim",'\\mathrel{\\raisebox{0.035em}{\\ordinarycolon}\\char"223c}');u("\\ratio","\\vcentcolon");u("\\coloncolon","\\dblcolon");u("\\colonequals","\\coloneqq");u("\\coloncolonequals","\\Coloneqq");u("\\equalscolon","\\eqqcolon");u("\\equalscoloncolon","\\Eqqcolon");u("\\colonminus","\\coloneq");u("\\coloncolonminus","\\Coloneq");u("\\minuscolon","\\eqcolon");u("\\minuscoloncolon","\\Eqcolon");u("\\coloncolonapprox","\\Colonapprox");u("\\coloncolonsim","\\Colonsim");u("\\notni","\\mathrel{\\char`âˆŒ}");u("\\limsup","\\DOTSB\\operatorname*{lim\\,sup}");u("\\liminf","\\DOTSB\\operatorname*{lim\\,inf}");u("\\injlim","\\DOTSB\\operatorname*{inj\\,lim}");u("\\projlim","\\DOTSB\\operatorname*{proj\\,lim}");u("\\varlimsup","\\DOTSB\\operatorname*{\\overline{\\text{lim}}}");u("\\varliminf","\\DOTSB\\operatorname*{\\underline{\\text{lim}}}");u("\\varinjlim","\\DOTSB\\operatorname*{\\underrightarrow{\\text{lim}}}");u("\\varprojlim","\\DOTSB\\operatorname*{\\underleftarrow{\\text{lim}}}");u("\\centerdot","{\\medspace\\rule{0.167em}{0.189em}\\medspace}");u("\\argmin","\\DOTSB\\operatorname*{arg\\,min}");u("\\argmax","\\DOTSB\\operatorname*{arg\\,max}");u("\\plim","\\DOTSB\\operatorname*{plim}");u("\\leftmodels","\\mathop{\\reflectbox{$\\models$}}");u("\\bra","\\mathinner{\\langle{#1}|}");u("\\ket","\\mathinner{|{#1}\\rangle}");u("\\braket","\\mathinner{\\langle{#1}\\rangle}");u("\\Bra","\\left\\langle#1\\right|");u("\\Ket","\\left|#1\\right\\rangle");const us=(t,e)=>{const r=`}\\,\\middle${e[0]==="|"?"\\vert":"\\Vert"}\\,{`;return t.slice(0,e.index)+r+t.slice(e.index+e[0].length)};u("\\Braket",function(t){let e=zr(t);const r=/\|\||\||\\\|/g;let n;for(;(n=r.exec(e))!==null;)e=us(e,n);return"\\left\\langle{"+e+"}\\right\\rangle"});u("\\Set",function(t){let e=zr(t);const r=/\|\||\||\\\|/.exec(e);return r&&(e=us(e,r)),"\\left\\{\\:{"+e+"}\\:\\right\\}"});u("\\set",function(t){return"\\{{"+zr(t).replace(/\|/,"}\\mid{")+"}\\}"});u("\\angln","{\\angl n}");u("\\odv","\\@ifstar\\odv@next\\odv@numerator");u("\\odv@numerator","\\frac{\\mathrm{d}#1}{\\mathrm{d}#2}");u("\\odv@next","\\frac{\\mathrm{d}}{\\mathrm{d}#2}#1");u("\\pdv","\\@ifstar\\pdv@next\\pdv@numerator");const hs=t=>{const e=t[0][0].text,r=_r(t[1]).split(","),n=String(r.length),s=n==="1"?"\\partial":`\\partial^${n}`;let o="";return r.map(l=>{o+="\\partial "+l.trim()+"\\,"}),[e,s,o.replace(/\\,$/,"")]};u("\\pdv@numerator",function(t){const[e,r,n]=hs(t.consumeArgs(2));return`\\frac{${r} ${e}}{${n}}`});u("\\pdv@next",function(t){const[e,r,n]=hs(t.consumeArgs(2));return`\\frac{${r}}{${n}} ${e}`});u("\\upalpha","\\up@greek{\\alpha}");u("\\upbeta","\\up@greek{\\beta}");u("\\upgamma","\\up@greek{\\gamma}");u("\\updelta","\\up@greek{\\delta}");u("\\upepsilon","\\up@greek{\\epsilon}");u("\\upzeta","\\up@greek{\\zeta}");u("\\upeta","\\up@greek{\\eta}");u("\\uptheta","\\up@greek{\\theta}");u("\\upiota","\\up@greek{\\iota}");u("\\upkappa","\\up@greek{\\kappa}");u("\\uplambda","\\up@greek{\\lambda}");u("\\upmu","\\up@greek{\\mu}");u("\\upnu","\\up@greek{\\nu}");u("\\upxi","\\up@greek{\\xi}");u("\\upomicron","\\up@greek{\\omicron}");u("\\uppi","\\up@greek{\\pi}");u("\\upalpha","\\up@greek{\\alpha}");u("\\uprho","\\up@greek{\\rho}");u("\\upsigma","\\up@greek{\\sigma}");u("\\uptau","\\up@greek{\\tau}");u("\\upupsilon","\\up@greek{\\upsilon}");u("\\upphi","\\up@greek{\\phi}");u("\\upchi","\\up@greek{\\chi}");u("\\uppsi","\\up@greek{\\psi}");u("\\upomega","\\up@greek{\\omega}");u("\\invamp",'\\mathbin{\\char"214b}');u("\\parr",'\\mathbin{\\char"214b}');u("\\with",'\\mathbin{\\char"26}');u("\\multimapinv",'\\mathrel{\\char"27dc}');u("\\multimapboth",'\\mathrel{\\char"29df}');u("\\scoh",'{\\mkern5mu\\char"2322\\mkern5mu}');u("\\sincoh",'{\\mkern5mu\\char"2323\\mkern5mu}');u("\\coh",`{\\mkern5mu\\rule{}{0.7em}\\mathrlap{\\smash{\\raise2mu{\\char"2322}}}
{\\smash{\\lower4mu{\\char"2323}}}\\mkern5mu}`);u("\\incoh",`{\\mkern5mu\\rule{}{0.7em}\\mathrlap{\\smash{\\raise2mu{\\char"2323}}}
{\\smash{\\lower4mu{\\char"2322}}}\\mkern5mu}`);u("\\standardstate","\\text{\\tiny\\char`â¦µ}");u("\\ce",function(t){return ds(t.consumeArgs(1)[0],"ce")});u("\\pu",function(t){return ds(t.consumeArgs(1)[0],"pu")});u("\\uniDash","{\\rule{0.672em}{0.06em}}");u("\\triDash","{\\rule{0.15em}{0.06em}\\kern2mu\\rule{0.15em}{0.06em}\\kern2mu\\rule{0.15em}{0.06em}}");u("\\tripleDash","\\kern0.075em\\raise0.25em{\\triDash}\\kern0.075em");u("\\tripleDashOverLine","\\kern0.075em\\mathrlap{\\raise0.125em{\\uniDash}}\\raise0.34em{\\triDash}\\kern0.075em");u("\\tripleDashOverDoubleLine","\\kern0.075em\\mathrlap{\\mathrlap{\\raise0.48em{\\triDash}}\\raise0.27em{\\uniDash}}{\\raise0.05em{\\uniDash}}\\kern0.075em");u("\\tripleDashBetweenDoubleLine","\\kern0.075em\\mathrlap{\\mathrlap{\\raise0.48em{\\uniDash}}\\raise0.27em{\\triDash}}{\\raise0.05em{\\uniDash}}\\kern0.075em");var ds=function(t,e){for(var r="",n=t.length&&t[t.length-1].loc.start,s=t.length-1;s>=0;s--)t[s].loc.start>n&&(r+=" ",n=t[s].loc.start),r+=t[s].text,n+=t[s].text.length;var o=dt.go(T.go(r,e));return o},T={go:function(t,e){if(!t)return[];e===void 0&&(e="ce");var r="0",n={};n.parenthesisLevel=0,t=t.replace(/\n/g," "),t=t.replace(/[\u2212\u2013\u2014\u2010]/g,"-"),t=t.replace(/[\u2026]/g,"...");for(var s,o=10,l=[];;){s!==t?(o=10,s=t):o--;var c=T.stateMachines[e],h=c.transitions[r]||c.transitions["*"];t:for(var m=0;m<h.length;m++){var x=T.patterns.match_(h[m].pattern,t);if(x){for(var N=h[m].task,b=0;b<N.action_.length;b++){var q;if(c.actions[N.action_[b].type_])q=c.actions[N.action_[b].type_](n,x.match_,N.action_[b].option);else if(T.actions[N.action_[b].type_])q=T.actions[N.action_[b].type_](n,x.match_,N.action_[b].option);else throw["MhchemBugA","mhchem bug A. Please report. ("+N.action_[b].type_+")"];T.concatArray(l,q)}if(r=N.nextState||r,t.length>0){if(N.revisit||(t=x.remainder),!N.toContinue)break t}else return l}}if(o<=0)throw["MhchemBugU","mhchem bug U. Please report."]}},concatArray:function(t,e){if(e)if(Array.isArray(e))for(var r=0;r<e.length;r++)t.push(e[r]);else t.push(e)},patterns:{patterns:{empty:/^$/,else:/^./,else2:/^./,space:/^\s/,"space A":/^\s(?=[A-Z\\$])/,space$:/^\s$/,"a-z":/^[a-z]/,x:/^x/,x$:/^x$/,i$:/^i$/,letters:/^(?:[a-zA-Z\u03B1-\u03C9\u0391-\u03A9?@]|(?:\\(?:alpha|beta|gamma|delta|epsilon|zeta|eta|theta|iota|kappa|lambda|mu|nu|xi|omicron|pi|rho|sigma|tau|upsilon|phi|chi|psi|omega|Gamma|Delta|Theta|Lambda|Xi|Pi|Sigma|Upsilon|Phi|Psi|Omega)(?:\s+|\{\}|(?![a-zA-Z]))))+/,"\\greek":/^\\(?:alpha|beta|gamma|delta|epsilon|zeta|eta|theta|iota|kappa|lambda|mu|nu|xi|omicron|pi|rho|sigma|tau|upsilon|phi|chi|psi|omega|Gamma|Delta|Theta|Lambda|Xi|Pi|Sigma|Upsilon|Phi|Psi|Omega)(?:\s+|\{\}|(?![a-zA-Z]))/,"one lowercase latin letter $":/^(?:([a-z])(?:$|[^a-zA-Z]))$/,"$one lowercase latin letter$ $":/^\$(?:([a-z])(?:$|[^a-zA-Z]))\$$/,"one lowercase greek letter $":/^(?:\$?[\u03B1-\u03C9]\$?|\$?\\(?:alpha|beta|gamma|delta|epsilon|zeta|eta|theta|iota|kappa|lambda|mu|nu|xi|omicron|pi|rho|sigma|tau|upsilon|phi|chi|psi|omega)\s*\$?)(?:\s+|\{\}|(?![a-zA-Z]))$/,digits:/^[0-9]+/,"-9.,9":/^[+\-]?(?:[0-9]+(?:[,.][0-9]+)?|[0-9]*(?:\.[0-9]+))/,"-9.,9 no missing 0":/^[+\-]?[0-9]+(?:[.,][0-9]+)?/,"(-)(9.,9)(e)(99)":function(t){var e=t.match(/^(\+\-|\+\/\-|\+|\-|\\pm\s?)?([0-9]+(?:[,.][0-9]+)?|[0-9]*(?:\.[0-9]+))?(\((?:[0-9]+(?:[,.][0-9]+)?|[0-9]*(?:\.[0-9]+))\))?(?:([eE]|\s*(\*|x|\\times|\u00D7)\s*10\^)([+\-]?[0-9]+|\{[+\-]?[0-9]+\}))?/);return e&&e[0]?{match_:e.splice(1),remainder:t.substr(e[0].length)}:null},"(-)(9)^(-9)":function(t){var e=t.match(/^(\+\-|\+\/\-|\+|\-|\\pm\s?)?([0-9]+(?:[,.][0-9]+)?|[0-9]*(?:\.[0-9]+)?)\^([+\-]?[0-9]+|\{[+\-]?[0-9]+\})/);return e&&e[0]?{match_:e.splice(1),remainder:t.substr(e[0].length)}:null},"state of aggregation $":function(t){var e=T.patterns.findObserveGroups(t,"",/^\([a-z]{1,3}(?=[\),])/,")","");if(e&&e.remainder.match(/^($|[\s,;\)\]\}])/))return e;var r=t.match(/^(?:\((?:\\ca\s?)?\$[amothc]\$\))/);return r?{match_:r[0],remainder:t.substr(r[0].length)}:null},"_{(state of aggregation)}$":/^_\{(\([a-z]{1,3}\))\}/,"{[(":/^(?:\\\{|\[|\()/,")]}":/^(?:\)|\]|\\\})/,", ":/^[,;]\s*/,",":/^[,;]/,".":/^[.]/,". ":/^([.\u22C5\u00B7\u2022])\s*/,"...":/^\.\.\.(?=$|[^.])/,"* ":/^([*])\s*/,"^{(...)}":function(t){return T.patterns.findObserveGroups(t,"^{","","","}")},"^($...$)":function(t){return T.patterns.findObserveGroups(t,"^","$","$","")},"^a":/^\^([0-9]+|[^\\_])/,"^\\x{}{}":function(t){return T.patterns.findObserveGroups(t,"^",/^\\[a-zA-Z]+\{/,"}","","","{","}","",!0)},"^\\x{}":function(t){return T.patterns.findObserveGroups(t,"^",/^\\[a-zA-Z]+\{/,"}","")},"^\\x":/^\^(\\[a-zA-Z]+)\s*/,"^(-1)":/^\^(-?\d+)/,"'":/^'/,"_{(...)}":function(t){return T.patterns.findObserveGroups(t,"_{","","","}")},"_($...$)":function(t){return T.patterns.findObserveGroups(t,"_","$","$","")},_9:/^_([+\-]?[0-9]+|[^\\])/,"_\\x{}{}":function(t){return T.patterns.findObserveGroups(t,"_",/^\\[a-zA-Z]+\{/,"}","","","{","}","",!0)},"_\\x{}":function(t){return T.patterns.findObserveGroups(t,"_",/^\\[a-zA-Z]+\{/,"}","")},"_\\x":/^_(\\[a-zA-Z]+)\s*/,"^_":/^(?:\^(?=_)|\_(?=\^)|[\^_]$)/,"{}":/^\{\}/,"{...}":function(t){return T.patterns.findObserveGroups(t,"","{","}","")},"{(...)}":function(t){return T.patterns.findObserveGroups(t,"{","","","}")},"$...$":function(t){return T.patterns.findObserveGroups(t,"","$","$","")},"${(...)}$":function(t){return T.patterns.findObserveGroups(t,"${","","","}$")},"$(...)$":function(t){return T.patterns.findObserveGroups(t,"$","","","$")},"=<>":/^[=<>]/,"#":/^[#\u2261]/,"+":/^\+/,"-$":/^-(?=[\s_},;\]/]|$|\([a-z]+\))/,"-9":/^-(?=[0-9])/,"- orbital overlap":/^-(?=(?:[spd]|sp)(?:$|[\s,;\)\]\}]))/,"-":/^-/,"pm-operator":/^(?:\\pm|\$\\pm\$|\+-|\+\/-)/,operator:/^(?:\+|(?:[\-=<>]|<<|>>|\\approx|\$\\approx\$)(?=\s|$|-?[0-9]))/,arrowUpDown:/^(?:v|\(v\)|\^|\(\^\))(?=$|[\s,;\)\]\}])/,"\\bond{(...)}":function(t){return T.patterns.findObserveGroups(t,"\\bond{","","","}")},"->":/^(?:<->|<-->|->|<-|<=>>|<<=>|<=>|[\u2192\u27F6\u21CC])/,CMT:/^[CMT](?=\[)/,"[(...)]":function(t){return T.patterns.findObserveGroups(t,"[","","","]")},"1st-level escape":/^(&|\\\\|\\hline)\s*/,"\\,":/^(?:\\[,\ ;:])/,"\\x{}{}":function(t){return T.patterns.findObserveGroups(t,"",/^\\[a-zA-Z]+\{/,"}","","","{","}","",!0)},"\\x{}":function(t){return T.patterns.findObserveGroups(t,"",/^\\[a-zA-Z]+\{/,"}","")},"\\ca":/^\\ca(?:\s+|(?![a-zA-Z]))/,"\\x":/^(?:\\[a-zA-Z]+\s*|\\[_&{}%])/,orbital:/^(?:[0-9]{1,2}[spdfgh]|[0-9]{0,2}sp)(?=$|[^a-zA-Z])/,others:/^[\/~|]/,"\\frac{(...)}":function(t){return T.patterns.findObserveGroups(t,"\\frac{","","","}","{","","","}")},"\\overset{(...)}":function(t){return T.patterns.findObserveGroups(t,"\\overset{","","","}","{","","","}")},"\\underset{(...)}":function(t){return T.patterns.findObserveGroups(t,"\\underset{","","","}","{","","","}")},"\\underbrace{(...)}":function(t){return T.patterns.findObserveGroups(t,"\\underbrace{","","","}_","{","","","}")},"\\color{(...)}0":function(t){return T.patterns.findObserveGroups(t,"\\color{","","","}")},"\\color{(...)}{(...)}1":function(t){return T.patterns.findObserveGroups(t,"\\color{","","","}","{","","","}")},"\\color(...){(...)}2":function(t){return T.patterns.findObserveGroups(t,"\\color","\\","",/^(?=\{)/,"{","","","}")},"\\ce{(...)}":function(t){return T.patterns.findObserveGroups(t,"\\ce{","","","}")},oxidation$:/^(?:[+-][IVX]+|\\pm\s*0|\$\\pm\$\s*0)$/,"d-oxidation$":/^(?:[+-]?\s?[IVX]+|\\pm\s*0|\$\\pm\$\s*0)$/,"roman numeral":/^[IVX]+/,"1/2$":/^[+\-]?(?:[0-9]+|\$[a-z]\$|[a-z])\/[0-9]+(?:\$[a-z]\$|[a-z])?$/,amount:function(t){var e;if(e=t.match(/^(?:(?:(?:\([+\-]?[0-9]+\/[0-9]+\)|[+\-]?(?:[0-9]+|\$[a-z]\$|[a-z])\/[0-9]+|[+\-]?[0-9]+[.,][0-9]+|[+\-]?\.[0-9]+|[+\-]?[0-9]+)(?:[a-z](?=\s*[A-Z]))?)|[+\-]?[a-z](?=\s*[A-Z])|\+(?!\s))/),e)return{match_:e[0],remainder:t.substr(e[0].length)};var r=T.patterns.findObserveGroups(t,"","$","$","");return r&&(e=r.match_.match(/^\$(?:\(?[+\-]?(?:[0-9]*[a-z]?[+\-])?[0-9]*[a-z](?:[+\-][0-9]*[a-z]?)?\)?|\+|-)\$$/),e)?{match_:e[0],remainder:t.substr(e[0].length)}:null},amount2:function(t){return this.amount(t)},"(KV letters),":/^(?:[A-Z][a-z]{0,2}|i)(?=,)/,formula$:function(t){if(t.match(/^\([a-z]+\)$/))return null;var e=t.match(/^(?:[a-z]|(?:[0-9\ \+\-\,\.\(\)]+[a-z])+[0-9\ \+\-\,\.\(\)]*|(?:[a-z][0-9\ \+\-\,\.\(\)]+)+[a-z]?)$/);return e?{match_:e[0],remainder:t.substr(e[0].length)}:null},uprightEntities:/^(?:pH|pOH|pC|pK|iPr|iBu)(?=$|[^a-zA-Z])/,"/":/^\s*(\/)\s*/,"//":/^\s*(\/\/)\s*/,"*":/^\s*[*.]\s*/},findObserveGroups:function(t,e,r,n,s,o,l,c,h,m){var x=function(A,O){if(typeof O=="string")return A.indexOf(O)!==0?null:O;var z=A.match(O);return z?z[0]:null},N=function(A,O,z){for(var W=0;O<A.length;){var H=A.charAt(O),U=x(A.substr(O),z);if(U!==null&&W===0)return{endMatchBegin:O,endMatchEnd:O+U.length};if(H==="{")W++;else if(H==="}"){if(W===0)throw["ExtraCloseMissingOpen","Extra close brace or missing open brace"];W--}O++}return null},b=x(t,e);if(b===null||(t=t.substr(b.length),b=x(t,r),b===null))return null;var q=N(t,b.length,n||s);if(q===null)return null;var P=t.substring(0,n?q.endMatchEnd:q.endMatchBegin);if(o||l){var G=this.findObserveGroups(t.substr(q.endMatchEnd),o,l,c,h);if(G===null)return null;var Z=[P,G.match_];return{match_:m?Z.join(""):Z,remainder:G.remainder}}else return{match_:P,remainder:t.substr(q.endMatchEnd)}},match_:function(t,e){var r=T.patterns.patterns[t];if(r===void 0)throw["MhchemBugP","mhchem bug P. Please report. ("+t+")"];if(typeof r=="function")return T.patterns.patterns[t](e);var n=e.match(r);if(n){var s;return n[2]?s=[n[1],n[2]]:n[1]?s=n[1]:s=n[0],{match_:s,remainder:e.substr(n[0].length)}}return null}},actions:{"a=":function(t,e){t.a=(t.a||"")+e},"b=":function(t,e){t.b=(t.b||"")+e},"p=":function(t,e){t.p=(t.p||"")+e},"o=":function(t,e){t.o=(t.o||"")+e},"q=":function(t,e){t.q=(t.q||"")+e},"d=":function(t,e){t.d=(t.d||"")+e},"rm=":function(t,e){t.rm=(t.rm||"")+e},"text=":function(t,e){t.text_=(t.text_||"")+e},insert:function(t,e,r){return{type_:r}},"insert+p1":function(t,e,r){return{type_:r,p1:e}},"insert+p1+p2":function(t,e,r){return{type_:r,p1:e[0],p2:e[1]}},copy:function(t,e){return e},rm:function(t,e){return{type_:"rm",p1:e||""}},text:function(t,e){return T.go(e,"text")},"{text}":function(t,e){var r=["{"];return T.concatArray(r,T.go(e,"text")),r.push("}"),r},"tex-math":function(t,e){return T.go(e,"tex-math")},"tex-math tight":function(t,e){return T.go(e,"tex-math tight")},bond:function(t,e,r){return{type_:"bond",kind_:r||e}},"color0-output":function(t,e){return{type_:"color0",color:e[0]}},ce:function(t,e){return T.go(e)},"1/2":function(t,e){var r=[];e.match(/^[+\-]/)&&(r.push(e.substr(0,1)),e=e.substr(1));var n=e.match(/^([0-9]+|\$[a-z]\$|[a-z])\/([0-9]+)(\$[a-z]\$|[a-z])?$/);return n[1]=n[1].replace(/\$/g,""),r.push({type_:"frac",p1:n[1],p2:n[2]}),n[3]&&(n[3]=n[3].replace(/\$/g,""),r.push({type_:"tex-math",p1:n[3]})),r},"9,9":function(t,e){return T.go(e,"9,9")}},createTransitions:function(t){var e,r,n,s,o={};for(e in t)for(r in t[e])for(n=r.split("|"),t[e][r].stateArray=n,s=0;s<n.length;s++)o[n[s]]=[];for(e in t)for(r in t[e])for(n=t[e][r].stateArray||[],s=0;s<n.length;s++){var l=t[e][r];if(l.action_){l.action_=[].concat(l.action_);for(var c=0;c<l.action_.length;c++)typeof l.action_[c]=="string"&&(l.action_[c]={type_:l.action_[c]})}else l.action_=[];for(var h=e.split("|"),m=0;m<h.length;m++)if(n[s]==="*")for(var x in o)o[x].push({pattern:h[m],task:l});else o[n[s]].push({pattern:h[m],task:l})}return o},stateMachines:{}};T.stateMachines={ce:{transitions:T.createTransitions({empty:{"*":{action_:"output"}},else:{"0|1|2":{action_:"beginsWithBond=false",revisit:!0,toContinue:!0}},oxidation$:{0:{action_:"oxidation-output"}},CMT:{r:{action_:"rdt=",nextState:"rt"},rd:{action_:"rqt=",nextState:"rdt"}},arrowUpDown:{"0|1|2|as":{action_:["sb=false","output","operator"],nextState:"1"}},uprightEntities:{"0|1|2":{action_:["o=","output"],nextState:"1"}},orbital:{"0|1|2|3":{action_:"o=",nextState:"o"}},"->":{"0|1|2|3":{action_:"r=",nextState:"r"},"a|as":{action_:["output","r="],nextState:"r"},"*":{action_:["output","r="],nextState:"r"}},"+":{o:{action_:"d= kv",nextState:"d"},"d|D":{action_:"d=",nextState:"d"},q:{action_:"d=",nextState:"qd"},"qd|qD":{action_:"d=",nextState:"qd"},dq:{action_:["output","d="],nextState:"d"},3:{action_:["sb=false","output","operator"],nextState:"0"}},amount:{"0|2":{action_:"a=",nextState:"a"}},"pm-operator":{"0|1|2|a|as":{action_:["sb=false","output",{type_:"operator",option:"\\pm"}],nextState:"0"}},operator:{"0|1|2|a|as":{action_:["sb=false","output","operator"],nextState:"0"}},"-$":{"o|q":{action_:["charge or bond","output"],nextState:"qd"},d:{action_:"d=",nextState:"d"},D:{action_:["output",{type_:"bond",option:"-"}],nextState:"3"},q:{action_:"d=",nextState:"qd"},qd:{action_:"d=",nextState:"qd"},"qD|dq":{action_:["output",{type_:"bond",option:"-"}],nextState:"3"}},"-9":{"3|o":{action_:["output",{type_:"insert",option:"hyphen"}],nextState:"3"}},"- orbital overlap":{o:{action_:["output",{type_:"insert",option:"hyphen"}],nextState:"2"},d:{action_:["output",{type_:"insert",option:"hyphen"}],nextState:"2"}},"-":{"0|1|2":{action_:[{type_:"output",option:1},"beginsWithBond=true",{type_:"bond",option:"-"}],nextState:"3"},3:{action_:{type_:"bond",option:"-"}},a:{action_:["output",{type_:"insert",option:"hyphen"}],nextState:"2"},as:{action_:[{type_:"output",option:2},{type_:"bond",option:"-"}],nextState:"3"},b:{action_:"b="},o:{action_:{type_:"- after o/d",option:!1},nextState:"2"},q:{action_:{type_:"- after o/d",option:!1},nextState:"2"},"d|qd|dq":{action_:{type_:"- after o/d",option:!0},nextState:"2"},"D|qD|p":{action_:["output",{type_:"bond",option:"-"}],nextState:"3"}},amount2:{"1|3":{action_:"a=",nextState:"a"}},letters:{"0|1|2|3|a|as|b|p|bp|o":{action_:"o=",nextState:"o"},"q|dq":{action_:["output","o="],nextState:"o"},"d|D|qd|qD":{action_:"o after d",nextState:"o"}},digits:{o:{action_:"q=",nextState:"q"},"d|D":{action_:"q=",nextState:"dq"},q:{action_:["output","o="],nextState:"o"},a:{action_:"o=",nextState:"o"}},"space A":{"b|p|bp":{}},space:{a:{nextState:"as"},0:{action_:"sb=false"},"1|2":{action_:"sb=true"},"r|rt|rd|rdt|rdq":{action_:"output",nextState:"0"},"*":{action_:["output","sb=true"],nextState:"1"}},"1st-level escape":{"1|2":{action_:["output",{type_:"insert+p1",option:"1st-level escape"}]},"*":{action_:["output",{type_:"insert+p1",option:"1st-level escape"}],nextState:"0"}},"[(...)]":{"r|rt":{action_:"rd=",nextState:"rd"},"rd|rdt":{action_:"rq=",nextState:"rdq"}},"...":{"o|d|D|dq|qd|qD":{action_:["output",{type_:"bond",option:"..."}],nextState:"3"},"*":{action_:[{type_:"output",option:1},{type_:"insert",option:"ellipsis"}],nextState:"1"}},". |* ":{"*":{action_:["output",{type_:"insert",option:"addition compound"}],nextState:"1"}},"state of aggregation $":{"*":{action_:["output","state of aggregation"],nextState:"1"}},"{[(":{"a|as|o":{action_:["o=","output","parenthesisLevel++"],nextState:"2"},"0|1|2|3":{action_:["o=","output","parenthesisLevel++"],nextState:"2"},"*":{action_:["output","o=","output","parenthesisLevel++"],nextState:"2"}},")]}":{"0|1|2|3|b|p|bp|o":{action_:["o=","parenthesisLevel--"],nextState:"o"},"a|as|d|D|q|qd|qD|dq":{action_:["output","o=","parenthesisLevel--"],nextState:"o"}},", ":{"*":{action_:["output","comma"],nextState:"0"}},"^_":{"*":{}},"^{(...)}|^($...$)":{"0|1|2|as":{action_:"b=",nextState:"b"},p:{action_:"b=",nextState:"bp"},"3|o":{action_:"d= kv",nextState:"D"},q:{action_:"d=",nextState:"qD"},"d|D|qd|qD|dq":{action_:["output","d="],nextState:"D"}},"^a|^\\x{}{}|^\\x{}|^\\x|'":{"0|1|2|as":{action_:"b=",nextState:"b"},p:{action_:"b=",nextState:"bp"},"3|o":{action_:"d= kv",nextState:"d"},q:{action_:"d=",nextState:"qd"},"d|qd|D|qD":{action_:"d="},dq:{action_:["output","d="],nextState:"d"}},"_{(state of aggregation)}$":{"d|D|q|qd|qD|dq":{action_:["output","q="],nextState:"q"}},"_{(...)}|_($...$)|_9|_\\x{}{}|_\\x{}|_\\x":{"0|1|2|as":{action_:"p=",nextState:"p"},b:{action_:"p=",nextState:"bp"},"3|o":{action_:"q=",nextState:"q"},"d|D":{action_:"q=",nextState:"dq"},"q|qd|qD|dq":{action_:["output","q="],nextState:"q"}},"=<>":{"0|1|2|3|a|as|o|q|d|D|qd|qD|dq":{action_:[{type_:"output",option:2},"bond"],nextState:"3"}},"#":{"0|1|2|3|a|as|o":{action_:[{type_:"output",option:2},{type_:"bond",option:"#"}],nextState:"3"}},"{}":{"*":{action_:{type_:"output",option:1},nextState:"1"}},"{...}":{"0|1|2|3|a|as|b|p|bp":{action_:"o=",nextState:"o"},"o|d|D|q|qd|qD|dq":{action_:["output","o="],nextState:"o"}},"$...$":{a:{action_:"a="},"0|1|2|3|as|b|p|bp|o":{action_:"o=",nextState:"o"},"as|o":{action_:"o="},"q|d|D|qd|qD|dq":{action_:["output","o="],nextState:"o"}},"\\bond{(...)}":{"*":{action_:[{type_:"output",option:2},"bond"],nextState:"3"}},"\\frac{(...)}":{"*":{action_:[{type_:"output",option:1},"frac-output"],nextState:"3"}},"\\overset{(...)}":{"*":{action_:[{type_:"output",option:2},"overset-output"],nextState:"3"}},"\\underset{(...)}":{"*":{action_:[{type_:"output",option:2},"underset-output"],nextState:"3"}},"\\underbrace{(...)}":{"*":{action_:[{type_:"output",option:2},"underbrace-output"],nextState:"3"}},"\\color{(...)}{(...)}1|\\color(...){(...)}2":{"*":{action_:[{type_:"output",option:2},"color-output"],nextState:"3"}},"\\color{(...)}0":{"*":{action_:[{type_:"output",option:2},"color0-output"]}},"\\ce{(...)}":{"*":{action_:[{type_:"output",option:2},"ce"],nextState:"3"}},"\\,":{"*":{action_:[{type_:"output",option:1},"copy"],nextState:"1"}},"\\x{}{}|\\x{}|\\x":{"0|1|2|3|a|as|b|p|bp|o|c0":{action_:["o=","output"],nextState:"3"},"*":{action_:["output","o=","output"],nextState:"3"}},others:{"*":{action_:[{type_:"output",option:1},"copy"],nextState:"3"}},else2:{a:{action_:"a to o",nextState:"o",revisit:!0},as:{action_:["output","sb=true"],nextState:"1",revisit:!0},"r|rt|rd|rdt|rdq":{action_:["output"],nextState:"0",revisit:!0},"*":{action_:["output","copy"],nextState:"3"}}}),actions:{"o after d":function(t,e){var r;if((t.d||"").match(/^[0-9]+$/)){var n=t.d;t.d=void 0,r=this.output(t),t.b=n}else r=this.output(t);return T.actions["o="](t,e),r},"d= kv":function(t,e){t.d=e,t.dType="kv"},"charge or bond":function(t,e){if(t.beginsWithBond){var r=[];return T.concatArray(r,this.output(t)),T.concatArray(r,T.actions.bond(t,e,"-")),r}else t.d=e},"- after o/d":function(t,e,r){var n=T.patterns.match_("orbital",t.o||""),s=T.patterns.match_("one lowercase greek letter $",t.o||""),o=T.patterns.match_("one lowercase latin letter $",t.o||""),l=T.patterns.match_("$one lowercase latin letter$ $",t.o||""),c=e==="-"&&(n&&n.remainder===""||s||o||l);c&&!t.a&&!t.b&&!t.p&&!t.d&&!t.q&&!n&&o&&(t.o="$"+t.o+"$");var h=[];return c?(T.concatArray(h,this.output(t)),h.push({type_:"hyphen"})):(n=T.patterns.match_("digits",t.d||""),r&&n&&n.remainder===""?(T.concatArray(h,T.actions["d="](t,e)),T.concatArray(h,this.output(t))):(T.concatArray(h,this.output(t)),T.concatArray(h,T.actions.bond(t,e,"-")))),h},"a to o":function(t){t.o=t.a,t.a=void 0},"sb=true":function(t){t.sb=!0},"sb=false":function(t){t.sb=!1},"beginsWithBond=true":function(t){t.beginsWithBond=!0},"beginsWithBond=false":function(t){t.beginsWithBond=!1},"parenthesisLevel++":function(t){t.parenthesisLevel++},"parenthesisLevel--":function(t){t.parenthesisLevel--},"state of aggregation":function(t,e){return{type_:"state of aggregation",p1:T.go(e,"o")}},comma:function(t,e){var r=e.replace(/\s*$/,""),n=r!==e;return n&&t.parenthesisLevel===0?{type_:"comma enumeration L",p1:r}:{type_:"comma enumeration M",p1:r}},output:function(t,e,r){var n;if(!t.r)n=[],!t.a&&!t.b&&!t.p&&!t.o&&!t.q&&!t.d&&!r||(t.sb&&n.push({type_:"entitySkip"}),!t.o&&!t.q&&!t.d&&!t.b&&!t.p&&r!==2?(t.o=t.a,t.a=void 0):!t.o&&!t.q&&!t.d&&(t.b||t.p)?(t.o=t.a,t.d=t.b,t.q=t.p,t.a=t.b=t.p=void 0):t.o&&t.dType==="kv"&&T.patterns.match_("d-oxidation$",t.d||"")?t.dType="oxidation":t.o&&t.dType==="kv"&&!t.q&&(t.dType=void 0),n.push({type_:"chemfive",a:T.go(t.a,"a"),b:T.go(t.b,"bd"),p:T.go(t.p,"pq"),o:T.go(t.o,"o"),q:T.go(t.q,"pq"),d:T.go(t.d,t.dType==="oxidation"?"oxidation":"bd"),dType:t.dType}));else{var s;t.rdt==="M"?s=T.go(t.rd,"tex-math"):t.rdt==="T"?s=[{type_:"text",p1:t.rd||""}]:s=T.go(t.rd);var o;t.rqt==="M"?o=T.go(t.rq,"tex-math"):t.rqt==="T"?o=[{type_:"text",p1:t.rq||""}]:o=T.go(t.rq),n={type_:"arrow",r:t.r,rd:s,rq:o}}for(var l in t)l!=="parenthesisLevel"&&l!=="beginsWithBond"&&delete t[l];return n},"oxidation-output":function(t,e){var r=["{"];return T.concatArray(r,T.go(e,"oxidation")),r.push("}"),r},"frac-output":function(t,e){return{type_:"frac-ce",p1:T.go(e[0]),p2:T.go(e[1])}},"overset-output":function(t,e){return{type_:"overset",p1:T.go(e[0]),p2:T.go(e[1])}},"underset-output":function(t,e){return{type_:"underset",p1:T.go(e[0]),p2:T.go(e[1])}},"underbrace-output":function(t,e){return{type_:"underbrace",p1:T.go(e[0]),p2:T.go(e[1])}},"color-output":function(t,e){return{type_:"color",color1:e[0],color2:T.go(e[1])}},"r=":function(t,e){t.r=e},"rdt=":function(t,e){t.rdt=e},"rd=":function(t,e){t.rd=e},"rqt=":function(t,e){t.rqt=e},"rq=":function(t,e){t.rq=e},operator:function(t,e,r){return{type_:"operator",kind_:r||e}}}},a:{transitions:T.createTransitions({empty:{"*":{}},"1/2$":{0:{action_:"1/2"}},else:{0:{nextState:"1",revisit:!0}},"$(...)$":{"*":{action_:"tex-math tight",nextState:"1"}},",":{"*":{action_:{type_:"insert",option:"commaDecimal"}}},else2:{"*":{action_:"copy"}}}),actions:{}},o:{transitions:T.createTransitions({empty:{"*":{}},"1/2$":{0:{action_:"1/2"}},else:{0:{nextState:"1",revisit:!0}},letters:{"*":{action_:"rm"}},"\\ca":{"*":{action_:{type_:"insert",option:"circa"}}},"\\x{}{}|\\x{}|\\x":{"*":{action_:"copy"}},"${(...)}$|$(...)$":{"*":{action_:"tex-math"}},"{(...)}":{"*":{action_:"{text}"}},else2:{"*":{action_:"copy"}}}),actions:{}},text:{transitions:T.createTransitions({empty:{"*":{action_:"output"}},"{...}":{"*":{action_:"text="}},"${(...)}$|$(...)$":{"*":{action_:"tex-math"}},"\\greek":{"*":{action_:["output","rm"]}},"\\,|\\x{}{}|\\x{}|\\x":{"*":{action_:["output","copy"]}},else:{"*":{action_:"text="}}}),actions:{output:function(t){if(t.text_){var e={type_:"text",p1:t.text_};for(var r in t)delete t[r];return e}}}},pq:{transitions:T.createTransitions({empty:{"*":{}},"state of aggregation $":{"*":{action_:"state of aggregation"}},i$:{0:{nextState:"!f",revisit:!0}},"(KV letters),":{0:{action_:"rm",nextState:"0"}},formula$:{0:{nextState:"f",revisit:!0}},"1/2$":{0:{action_:"1/2"}},else:{0:{nextState:"!f",revisit:!0}},"${(...)}$|$(...)$":{"*":{action_:"tex-math"}},"{(...)}":{"*":{action_:"text"}},"a-z":{f:{action_:"tex-math"}},letters:{"*":{action_:"rm"}},"-9.,9":{"*":{action_:"9,9"}},",":{"*":{action_:{type_:"insert+p1",option:"comma enumeration S"}}},"\\color{(...)}{(...)}1|\\color(...){(...)}2":{"*":{action_:"color-output"}},"\\color{(...)}0":{"*":{action_:"color0-output"}},"\\ce{(...)}":{"*":{action_:"ce"}},"\\,|\\x{}{}|\\x{}|\\x":{"*":{action_:"copy"}},else2:{"*":{action_:"copy"}}}),actions:{"state of aggregation":function(t,e){return{type_:"state of aggregation subscript",p1:T.go(e,"o")}},"color-output":function(t,e){return{type_:"color",color1:e[0],color2:T.go(e[1],"pq")}}}},bd:{transitions:T.createTransitions({empty:{"*":{}},x$:{0:{nextState:"!f",revisit:!0}},formula$:{0:{nextState:"f",revisit:!0}},else:{0:{nextState:"!f",revisit:!0}},"-9.,9 no missing 0":{"*":{action_:"9,9"}},".":{"*":{action_:{type_:"insert",option:"electron dot"}}},"a-z":{f:{action_:"tex-math"}},x:{"*":{action_:{type_:"insert",option:"KV x"}}},letters:{"*":{action_:"rm"}},"'":{"*":{action_:{type_:"insert",option:"prime"}}},"${(...)}$|$(...)$":{"*":{action_:"tex-math"}},"{(...)}":{"*":{action_:"text"}},"\\color{(...)}{(...)}1|\\color(...){(...)}2":{"*":{action_:"color-output"}},"\\color{(...)}0":{"*":{action_:"color0-output"}},"\\ce{(...)}":{"*":{action_:"ce"}},"\\,|\\x{}{}|\\x{}|\\x":{"*":{action_:"copy"}},else2:{"*":{action_:"copy"}}}),actions:{"color-output":function(t,e){return{type_:"color",color1:e[0],color2:T.go(e[1],"bd")}}}},oxidation:{transitions:T.createTransitions({empty:{"*":{}},"roman numeral":{"*":{action_:"roman-numeral"}},"${(...)}$|$(...)$":{"*":{action_:"tex-math"}},else:{"*":{action_:"copy"}}}),actions:{"roman-numeral":function(t,e){return{type_:"roman numeral",p1:e||""}}}},"tex-math":{transitions:T.createTransitions({empty:{"*":{action_:"output"}},"\\ce{(...)}":{"*":{action_:["output","ce"]}},"{...}|\\,|\\x{}{}|\\x{}|\\x":{"*":{action_:"o="}},else:{"*":{action_:"o="}}}),actions:{output:function(t){if(t.o){var e={type_:"tex-math",p1:t.o};for(var r in t)delete t[r];return e}}}},"tex-math tight":{transitions:T.createTransitions({empty:{"*":{action_:"output"}},"\\ce{(...)}":{"*":{action_:["output","ce"]}},"{...}|\\,|\\x{}{}|\\x{}|\\x":{"*":{action_:"o="}},"-|+":{"*":{action_:"tight operator"}},else:{"*":{action_:"o="}}}),actions:{"tight operator":function(t,e){t.o=(t.o||"")+"{"+e+"}"},output:function(t){if(t.o){var e={type_:"tex-math",p1:t.o};for(var r in t)delete t[r];return e}}}},"9,9":{transitions:T.createTransitions({empty:{"*":{}},",":{"*":{action_:"comma"}},else:{"*":{action_:"copy"}}}),actions:{comma:function(){return{type_:"commaDecimal"}}}},pu:{transitions:T.createTransitions({empty:{"*":{action_:"output"}},space$:{"*":{action_:["output","space"]}},"{[(|)]}":{"0|a":{action_:"copy"}},"(-)(9)^(-9)":{0:{action_:"number^",nextState:"a"}},"(-)(9.,9)(e)(99)":{0:{action_:"enumber",nextState:"a"}},space:{"0|a":{}},"pm-operator":{"0|a":{action_:{type_:"operator",option:"\\pm"},nextState:"0"}},operator:{"0|a":{action_:"copy",nextState:"0"}},"//":{d:{action_:"o=",nextState:"/"}},"/":{d:{action_:"o=",nextState:"/"}},"{...}|else":{"0|d":{action_:"d=",nextState:"d"},a:{action_:["space","d="],nextState:"d"},"/|q":{action_:"q=",nextState:"q"}}}),actions:{enumber:function(t,e){var r=[];return e[0]==="+-"||e[0]==="+/-"?r.push("\\pm "):e[0]&&r.push(e[0]),e[1]&&(T.concatArray(r,T.go(e[1],"pu-9,9")),e[2]&&(e[2].match(/[,.]/)?T.concatArray(r,T.go(e[2],"pu-9,9")):r.push(e[2])),e[3]=e[4]||e[3],e[3]&&(e[3]=e[3].trim(),e[3]==="e"||e[3].substr(0,1)==="*"?r.push({type_:"cdot"}):r.push({type_:"times"}))),e[3]&&r.push("10^{"+e[5]+"}"),r},"number^":function(t,e){var r=[];return e[0]==="+-"||e[0]==="+/-"?r.push("\\pm "):e[0]&&r.push(e[0]),T.concatArray(r,T.go(e[1],"pu-9,9")),r.push("^{"+e[2]+"}"),r},operator:function(t,e,r){return{type_:"operator",kind_:r||e}},space:function(){return{type_:"pu-space-1"}},output:function(t){var e,r=T.patterns.match_("{(...)}",t.d||"");r&&r.remainder===""&&(t.d=r.match_);var n=T.patterns.match_("{(...)}",t.q||"");if(n&&n.remainder===""&&(t.q=n.match_),t.d&&(t.d=t.d.replace(/\u00B0C|\^oC|\^{o}C/g,"{}^{\\circ}C"),t.d=t.d.replace(/\u00B0F|\^oF|\^{o}F/g,"{}^{\\circ}F")),t.q){t.q=t.q.replace(/\u00B0C|\^oC|\^{o}C/g,"{}^{\\circ}C"),t.q=t.q.replace(/\u00B0F|\^oF|\^{o}F/g,"{}^{\\circ}F");var s={d:T.go(t.d,"pu"),q:T.go(t.q,"pu")};t.o==="//"?e={type_:"pu-frac",p1:s.d,p2:s.q}:(e=s.d,s.d.length>1||s.q.length>1?e.push({type_:" / "}):e.push({type_:"/"}),T.concatArray(e,s.q))}else e=T.go(t.d,"pu-2");for(var o in t)delete t[o];return e}}},"pu-2":{transitions:T.createTransitions({empty:{"*":{action_:"output"}},"*":{"*":{action_:["output","cdot"],nextState:"0"}},"\\x":{"*":{action_:"rm="}},space:{"*":{action_:["output","space"],nextState:"0"}},"^{(...)}|^(-1)":{1:{action_:"^(-1)"}},"-9.,9":{0:{action_:"rm=",nextState:"0"},1:{action_:"^(-1)",nextState:"0"}},"{...}|else":{"*":{action_:"rm=",nextState:"1"}}}),actions:{cdot:function(){return{type_:"tight cdot"}},"^(-1)":function(t,e){t.rm+="^{"+e+"}"},space:function(){return{type_:"pu-space-2"}},output:function(t){var e=[];if(t.rm){var r=T.patterns.match_("{(...)}",t.rm||"");r&&r.remainder===""?e=T.go(r.match_,"pu"):e={type_:"rm",p1:t.rm}}for(var n in t)delete t[n];return e}}},"pu-9,9":{transitions:T.createTransitions({empty:{0:{action_:"output-0"},o:{action_:"output-o"}},",":{0:{action_:["output-0","comma"],nextState:"o"}},".":{0:{action_:["output-0","copy"],nextState:"o"}},else:{"*":{action_:"text="}}}),actions:{comma:function(){return{type_:"commaDecimal"}},"output-0":function(t){var e=[];if(t.text_=t.text_||"",t.text_.length>4){var r=t.text_.length%3;r===0&&(r=3);for(var n=t.text_.length-3;n>0;n-=3)e.push(t.text_.substr(n,3)),e.push({type_:"1000 separator"});e.push(t.text_.substr(0,r)),e.reverse()}else e.push(t.text_);for(var s in t)delete t[s];return e},"output-o":function(t){var e=[];if(t.text_=t.text_||"",t.text_.length>4){for(var r=t.text_.length-3,n=0;n<r;n+=3)e.push(t.text_.substr(n,3)),e.push({type_:"1000 separator"});e.push(t.text_.substr(n))}else e.push(t.text_);for(var s in t)delete t[s];return e}}}};var dt={go:function(t,e){if(!t)return"";for(var r="",n=!1,s=0;s<t.length;s++){var o=t[s];typeof o=="string"?r+=o:(r+=dt._go2(o),o.type_==="1st-level escape"&&(n=!0))}return!e&&!n&&r&&(r="{"+r+"}"),r},_goInner:function(t){return t&&dt.go(t,!0)},_go2:function(t){var e;switch(t.type_){case"chemfive":e="";var r={a:dt._goInner(t.a),b:dt._goInner(t.b),p:dt._goInner(t.p),o:dt._goInner(t.o),q:dt._goInner(t.q),d:dt._goInner(t.d)};r.a&&(r.a.match(/^[+\-]/)&&(r.a="{"+r.a+"}"),e+=r.a+"\\,"),(r.b||r.p)&&(e+="{\\vphantom{X}}",e+="^{\\hphantom{"+(r.b||"")+"}}_{\\hphantom{"+(r.p||"")+"}}",e+="{\\vphantom{X}}",e+="^{\\vphantom{2}\\mathllap{"+(r.b||"")+"}}",e+="_{\\vphantom{2}\\mathllap{"+(r.p||"")+"}}"),r.o&&(r.o.match(/^[+\-]/)&&(r.o="{"+r.o+"}"),e+=r.o),t.dType==="kv"?((r.d||r.q)&&(e+="{\\vphantom{X}}"),r.d&&(e+="^{"+r.d+"}"),r.q&&(e+="_{"+r.q+"}")):t.dType==="oxidation"?(r.d&&(e+="{\\vphantom{X}}",e+="^{"+r.d+"}"),r.q&&(e+="{{}}",e+="_{"+r.q+"}")):(r.q&&(e+="{{}}",e+="_{"+r.q+"}"),r.d&&(e+="{{}}",e+="^{"+r.d+"}"));break;case"rm":e="\\mathrm{"+t.p1+"}";break;case"text":t.p1.match(/[\^_]/)?(t.p1=t.p1.replace(" ","~").replace("-","\\text{-}"),e="\\mathrm{"+t.p1+"}"):e="\\text{"+t.p1+"}";break;case"roman numeral":e="\\mathrm{"+t.p1+"}";break;case"state of aggregation":e="\\mskip2mu "+dt._goInner(t.p1);break;case"state of aggregation subscript":e="\\mskip1mu "+dt._goInner(t.p1);break;case"bond":if(e=dt._getBond(t.kind_),!e)throw["MhchemErrorBond","mhchem Error. Unknown bond type ("+t.kind_+")"];break;case"frac":var n="\\frac{"+t.p1+"}{"+t.p2+"}";e="\\mathchoice{\\textstyle"+n+"}{"+n+"}{"+n+"}{"+n+"}";break;case"pu-frac":var s="\\frac{"+dt._goInner(t.p1)+"}{"+dt._goInner(t.p2)+"}";e="\\mathchoice{\\textstyle"+s+"}{"+s+"}{"+s+"}{"+s+"}";break;case"tex-math":e=t.p1+" ";break;case"frac-ce":e="\\frac{"+dt._goInner(t.p1)+"}{"+dt._goInner(t.p2)+"}";break;case"overset":e="\\overset{"+dt._goInner(t.p1)+"}{"+dt._goInner(t.p2)+"}";break;case"underset":e="\\underset{"+dt._goInner(t.p1)+"}{"+dt._goInner(t.p2)+"}";break;case"underbrace":e="\\underbrace{"+dt._goInner(t.p1)+"}_{"+dt._goInner(t.p2)+"}";break;case"color":e="{\\color{"+t.color1+"}{"+dt._goInner(t.color2)+"}}";break;case"color0":e="\\color{"+t.color+"}";break;case"arrow":var o={rd:dt._goInner(t.rd),rq:dt._goInner(t.rq)},l=dt._getArrow(t.r);o.rq&&(l+="[{\\rm "+o.rq+"}]"),o.rd?l+="{\\rm "+o.rd+"}":l+="{}",e=l;break;case"operator":e=dt._getOperator(t.kind_);break;case"1st-level escape":e=t.p1+" ";break;case"space":e=" ";break;case"entitySkip":e="~";break;case"pu-space-1":e="~";break;case"pu-space-2":e="\\mkern3mu ";break;case"1000 separator":e="\\mkern2mu ";break;case"commaDecimal":e="{,}";break;case"comma enumeration L":e="{"+t.p1+"}\\mkern6mu ";break;case"comma enumeration M":e="{"+t.p1+"}\\mkern3mu ";break;case"comma enumeration S":e="{"+t.p1+"}\\mkern1mu ";break;case"hyphen":e="\\text{-}";break;case"addition compound":e="\\,{\\cdot}\\,";break;case"electron dot":e="\\mkern1mu \\text{\\textbullet}\\mkern1mu ";break;case"KV x":e="{\\times}";break;case"prime":e="\\prime ";break;case"cdot":e="\\cdot ";break;case"tight cdot":e="\\mkern1mu{\\cdot}\\mkern1mu ";break;case"times":e="\\times ";break;case"circa":e="{\\sim}";break;case"^":e="uparrow";break;case"v":e="downarrow";break;case"ellipsis":e="\\ldots ";break;case"/":e="/";break;case" / ":e="\\,/\\,";break;default:throw["MhchemBugT","mhchem bug T. Please report."]}return e},_getArrow:function(t){switch(t){case"->":return"\\yields";case"â†’":return"\\yields";case"âŸ¶":return"\\yields";case"<-":return"\\yieldsLeft";case"<->":return"\\mesomerism";case"<-->":return"\\yieldsLeftRight";case"<=>":return"\\equilibrium";case"â‡Œ":return"\\equilibrium";case"<=>>":return"\\equilibriumRight";case"<<=>":return"\\equilibriumLeft";default:throw["MhchemBugT","mhchem bug T. Please report."]}},_getBond:function(t){switch(t){case"-":return"{-}";case"1":return"{-}";case"=":return"{=}";case"2":return"{=}";case"#":return"{\\equiv}";case"3":return"{\\equiv}";case"~":return"{\\tripleDash}";case"~-":return"{\\tripleDashOverLine}";case"~=":return"{\\tripleDashOverDoubleLine}";case"~--":return"{\\tripleDashOverDoubleLine}";case"-~-":return"{\\tripleDashBetweenDoubleLine}";case"...":return"{{\\cdot}{\\cdot}{\\cdot}}";case"....":return"{{\\cdot}{\\cdot}{\\cdot}{\\cdot}}";case"->":return"{\\rightarrow}";case"<-":return"{\\leftarrow}";case"<":return"{<}";case">":return"{>}";default:throw["MhchemBugT","mhchem bug T. Please report."]}},_getOperator:function(t){switch(t){case"+":return" {}+{} ";case"-":return" {}-{} ";case"=":return" {}={} ";case"<":return" {}<{} ";case">":return" {}>{} ";case"<<":return" {}\\ll{} ";case">>":return" {}\\gg{} ";case"\\pm":return" {}\\pm{} ";case"\\approx":return" {}\\approx{} ";case"$\\approx$":return" {}\\approx{} ";case"v":return" \\downarrow{} ";case"(v)":return" \\downarrow{} ";case"^":return" \\uparrow{} ";case"(^)":return" \\uparrow{} ";default:throw["MhchemBugT","mhchem bug T. Please report."]}}};u("\\darr","\\downarrow");u("\\dArr","\\Downarrow");u("\\Darr","\\Downarrow");u("\\lang","\\langle");u("\\rang","\\rangle");u("\\uarr","\\uparrow");u("\\uArr","\\Uparrow");u("\\Uarr","\\Uparrow");u("\\N","\\mathbb{N}");u("\\R","\\mathbb{R}");u("\\Z","\\mathbb{Z}");u("\\alef","\\aleph");u("\\alefsym","\\aleph");u("\\bull","\\bullet");u("\\clubs","\\clubsuit");u("\\cnums","\\mathbb{C}");u("\\Complex","\\mathbb{C}");u("\\Dagger","\\ddagger");u("\\diamonds","\\diamondsuit");u("\\empty","\\emptyset");u("\\exist","\\exists");u("\\harr","\\leftrightarrow");u("\\hArr","\\Leftrightarrow");u("\\Harr","\\Leftrightarrow");u("\\hearts","\\heartsuit");u("\\image","\\Im");u("\\infin","\\infty");u("\\isin","\\in");u("\\larr","\\leftarrow");u("\\lArr","\\Leftarrow");u("\\Larr","\\Leftarrow");u("\\lrarr","\\leftrightarrow");u("\\lrArr","\\Leftrightarrow");u("\\Lrarr","\\Leftrightarrow");u("\\natnums","\\mathbb{N}");u("\\plusmn","\\pm");u("\\rarr","\\rightarrow");u("\\rArr","\\Rightarrow");u("\\Rarr","\\Rightarrow");u("\\real","\\Re");u("\\reals","\\mathbb{R}");u("\\Reals","\\mathbb{R}");u("\\sdot","\\cdot");u("\\sect","\\S");u("\\spades","\\spadesuit");u("\\sub","\\subset");u("\\sube","\\subseteq");u("\\supe","\\supseteq");u("\\thetasym","\\vartheta");u("\\weierp","\\wp");u("\\quantity","{\\left\\{ #1 \\right\\}}");u("\\qty","{\\left\\{ #1 \\right\\}}");u("\\pqty","{\\left( #1 \\right)}");u("\\bqty","{\\left[ #1 \\right]}");u("\\vqty","{\\left\\vert #1 \\right\\vert}");u("\\Bqty","{\\left\\{ #1 \\right\\}}");u("\\absolutevalue","{\\left\\vert #1 \\right\\vert}");u("\\abs","{\\left\\vert #1 \\right\\vert}");u("\\norm","{\\left\\Vert #1 \\right\\Vert}");u("\\evaluated","{\\left.#1 \\right\\vert}");u("\\eval","{\\left.#1 \\right\\vert}");u("\\order","{\\mathcal{O} \\left( #1 \\right)}");u("\\commutator","{\\left[ #1 , #2 \\right]}");u("\\comm","{\\left[ #1 , #2 \\right]}");u("\\anticommutator","{\\left\\{ #1 , #2 \\right\\}}");u("\\acomm","{\\left\\{ #1 , #2 \\right\\}}");u("\\poissonbracket","{\\left\\{ #1 , #2 \\right\\}}");u("\\pb","{\\left\\{ #1 , #2 \\right\\}}");u("\\vectorbold","{\\boldsymbol{ #1 }}");u("\\vb","{\\boldsymbol{ #1 }}");u("\\vectorarrow","{\\vec{\\boldsymbol{ #1 }}}");u("\\va","{\\vec{\\boldsymbol{ #1 }}}");u("\\vectorunit","{{\\boldsymbol{\\hat{ #1 }}}}");u("\\vu","{{\\boldsymbol{\\hat{ #1 }}}}");u("\\dotproduct","\\mathbin{\\boldsymbol\\cdot}");u("\\vdot","{\\boldsymbol\\cdot}");u("\\crossproduct","\\mathbin{\\boldsymbol\\times}");u("\\cross","\\mathbin{\\boldsymbol\\times}");u("\\cp","\\mathbin{\\boldsymbol\\times}");u("\\gradient","{\\boldsymbol\\nabla}");u("\\grad","{\\boldsymbol\\nabla}");u("\\divergence","{\\grad\\vdot}");u("\\curl","{\\grad\\cross}");u("\\laplacian","\\nabla^2");u("\\tr","{\\operatorname{tr}}");u("\\Tr","{\\operatorname{Tr}}");u("\\rank","{\\operatorname{rank}}");u("\\erf","{\\operatorname{erf}}");u("\\Res","{\\operatorname{Res}}");u("\\principalvalue","{\\mathcal{P}}");u("\\pv","{\\mathcal{P}}");u("\\PV","{\\operatorname{P.V.}}");u("\\qqtext","{\\quad\\text{ #1 }\\quad}");u("\\qq","{\\quad\\text{ #1 }\\quad}");u("\\qcomma","{\\text{,}\\quad}");u("\\qc","{\\text{,}\\quad}");u("\\qcc","{\\quad\\text{c.c.}\\quad}");u("\\qif","{\\quad\\text{if}\\quad}");u("\\qthen","{\\quad\\text{then}\\quad}");u("\\qelse","{\\quad\\text{else}\\quad}");u("\\qotherwise","{\\quad\\text{otherwise}\\quad}");u("\\qunless","{\\quad\\text{unless}\\quad}");u("\\qgiven","{\\quad\\text{given}\\quad}");u("\\qusing","{\\quad\\text{using}\\quad}");u("\\qassume","{\\quad\\text{assume}\\quad}");u("\\qsince","{\\quad\\text{since}\\quad}");u("\\qlet","{\\quad\\text{let}\\quad}");u("\\qfor","{\\quad\\text{for}\\quad}");u("\\qall","{\\quad\\text{all}\\quad}");u("\\qeven","{\\quad\\text{even}\\quad}");u("\\qodd","{\\quad\\text{odd}\\quad}");u("\\qinteger","{\\quad\\text{integer}\\quad}");u("\\qand","{\\quad\\text{and}\\quad}");u("\\qor","{\\quad\\text{or}\\quad}");u("\\qas","{\\quad\\text{as}\\quad}");u("\\qin","{\\quad\\text{in}\\quad}");u("\\differential","{\\text{d}}");u("\\dd","{\\text{d}}");u("\\derivative","{\\frac{\\text{d}{ #1 }}{\\text{d}{ #2 }}}");u("\\dv","{\\frac{\\text{d}{ #1 }}{\\text{d}{ #2 }}}");u("\\partialderivative","{\\frac{\\partial{ #1 }}{\\partial{ #2 }}}");u("\\variation","{\\delta}");u("\\var","{\\delta}");u("\\functionalderivative","{\\frac{\\delta{ #1 }}{\\delta{ #2 }}}");u("\\fdv","{\\frac{\\delta{ #1 }}{\\delta{ #2 }}}");u("\\innerproduct","{\\left\\langle {#1} \\mid { #2} \\right\\rangle}");u("\\outerproduct","{\\left\\vert { #1 } \\right\\rangle\\left\\langle { #2} \\right\\vert}");u("\\dyad","{\\left\\vert { #1 } \\right\\rangle\\left\\langle { #2} \\right\\vert}");u("\\ketbra","{\\left\\vert { #1 } \\right\\rangle\\left\\langle { #2} \\right\\vert}");u("\\op","{\\left\\vert { #1 } \\right\\rangle\\left\\langle { #2} \\right\\vert}");u("\\expectationvalue","{\\left\\langle {#1 } \\right\\rangle}");u("\\expval","{\\left\\langle {#1 } \\right\\rangle}");u("\\ev","{\\left\\langle {#1 } \\right\\rangle}");u("\\matrixelement","{\\left\\langle{ #1 }\\right\\vert{ #2 }\\left\\vert{#3}\\right\\rangle}");u("\\matrixel","{\\left\\langle{ #1 }\\right\\vert{ #2 }\\left\\vert{#3}\\right\\rangle}");u("\\mel","{\\left\\langle{ #1 }\\right\\vert{ #2 }\\left\\vert{#3}\\right\\rangle}");function fn(t){const e=[];t.consumeSpaces();let r=t.fetch().text;for(r==="\\relax"&&(t.consume(),t.consumeSpaces(),r=t.fetch().text);r==="\\hline"||r==="\\hdashline";)t.consume(),e.push(r==="\\hdashline"),t.consumeSpaces(),r=t.fetch().text;return e}const Ae=t=>{if(!t.parser.settings.displayMode)throw new M(`{${t.envName}} can be used only in display mode.`)},Ba=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/,ps=t=>{let e=t.get("\\arraystretch");typeof e!="string"&&(e=_r(e.tokens)),e=isNaN(e)?null:Number(e);let r=t.get("\\arraycolsep");typeof r!="string"&&(r=_r(r.tokens));const n=Ba.exec(r),s=n?{number:+(n[1]+n[2]),unit:n[3]}:null;return[e,s]},La=(t,e,r)=>{let n;const s=t.tags.shift();if(s)if(s.body)n=te(s.body,e,!0),n.classes=["tml-tag"];else return n=new y.MathNode("mtext",[],[]),n;else{if(t.envClasses.includes("multline")&&(t.leqno&&r!==0||!t.leqno&&r!==t.body.length-1))return n=new y.MathNode("mtext",[],[]),n;n=new y.MathNode("mtext",[new Kn(["tml-eqn"])])}return n};function ee(t,{cols:e,envClasses:r,addEqnNum:n,singleRow:s,emptySingleRow:o,maxNumCols:l,leqno:c,arraystretch:h,arraycolsep:m},x){t.gullet.beginGroup(),s||t.gullet.macros.set("\\cr","\\\\\\relax"),n&&(t.gullet.macros.set("\\tag","\\@ifstar\\envtag@literal\\envtag@paren"),t.gullet.macros.set("\\envtag@paren","\\env@tag{{(\\text{#1})}}"),t.gullet.macros.set("\\envtag@literal","\\env@tag{\\text{#1}}"),t.gullet.macros.set("\\notag","\\env@notag"),t.gullet.macros.set("\\nonumber","\\env@notag")),t.gullet.beginGroup();let N=[];const b=[N],q=[],P=[];let G;const Z=[];for(Z.push(fn(t));;){let A=t.parseExpression(!1,s?"\\end":"\\\\");if(n&&!G){for(let z=0;z<A.length;z++)if(A[z].type==="envTag"||A[z].type==="noTag"){G=A[z].type==="envTag"?A.splice(z,1)[0].body.body[0]:{body:null};break}}t.gullet.endGroup(),t.gullet.beginGroup(),A={type:"ordgroup",mode:t.mode,body:A,semisimple:!0},N.push(A);const O=t.fetch().text;if(O==="&"){if(l&&N.length===l)if(r.includes("array")){if(t.settings.strict)throw new M("Too few columns specified in the {array} column argument.",t.nextToken)}else throw l===2?new M("The split environment accepts no more than two columns",t.nextToken):new M("The equation environment accepts only one column",t.nextToken);t.consume()}else if(O==="\\end"){N.length===1&&A.body.length===0&&(b.length>1||!o)&&b.pop(),Z.length<b.length+1&&Z.push([]);break}else if(O==="\\\\"){t.consume();let z;t.gullet.future().text!==" "&&(z=t.parseSizeGroup(!0)),q.push(z?z.value:null),P.push(G),Z.push(fn(t)),N=[],G=null,b.push(N)}else throw new M("Expected & or \\\\ or \\cr or \\end",t.nextToken)}return t.gullet.endGroup(),t.gullet.endGroup(),P.push(G),{type:"array",mode:t.mode,body:b,cols:e,rowGaps:q,hLinesBeforeRow:Z,envClasses:r,addEqnNum:n,scriptLevel:x,tags:P,leqno:c,arraystretch:h,arraycolsep:m}}function ms(t){return t.slice(0,1)==="d"?"display":"text"}const Ea={c:"center ",l:"left ",r:"right "},gn=t=>{const e=new y.MathNode("mtd",[]);return e.style={padding:"0",width:"50%"},t.envClasses.includes("multline")&&(e.style.width="7.5%"),e},Ft=function(t,e){const r=[],n=t.body.length,s=t.hLinesBeforeRow;for(let c=0;c<n;c++){const h=t.body[c],m=[],x=t.scriptLevel==="text"?bt.TEXT:t.scriptLevel==="script"?bt.SCRIPT:bt.DISPLAY;for(let b=0;b<h.length;b++){const q=new y.MathNode("mtd",[ut(h[b],e.withLevel(x))]);if(t.envClasses.includes("multline")){const P=c===0?"left":c===n-1?"right":"center";q.setAttribute("columnalign",P),P!=="center"&&q.classes.push("tml-"+P)}m.push(q)}if(t.addEqnNum){m.unshift(gn(t)),m.push(gn(t));const b=La(t,e.withLevel(x),c);t.leqno?(m[0].children.push(b),m[0].classes.push("tml-left")):(m[m.length-1].children.push(b),m[m.length-1].classes.push("tml-right"))}const N=new y.MathNode("mtr",m,[]);c===0&&s[0].length>0&&(s[0].length===2?N.children.forEach(b=>{b.style.borderTop="0.15em double"}):N.children.forEach(b=>{b.style.borderTop=s[0][0]?"0.06em dashed":"0.06em solid"})),s[c+1].length>0&&(s[c+1].length===2?N.children.forEach(b=>{b.style.borderBottom="0.15em double"}):N.children.forEach(b=>{b.style.borderBottom=s[c+1][0]?"0.06em dashed":"0.06em solid"})),r.push(N)}if(t.envClasses.length>0){let c=t.envClasses.includes("jot")?"0.7":t.envClasses.includes("small")?"0.35":"0.5";t.arraystretch&&t.arraystretch!==1&&(c=String(1.4*t.arraystretch-.8));let h=t.envClasses.includes("abut")||t.envClasses.includes("cases")?"0":t.envClasses.includes("small")?"0.1389":t.envClasses.includes("cd")?"0.25":"0.4",m="em";if(t.arraycolsep){const q=Wt(t.arraycolsep,e);h=q.number,m=q.unit}const x=r.length===0?0:r[0].children.length,N=(q,P)=>q===0&&P===0||q===x-1&&P===1?"0":t.envClasses[0]!=="align"?h:P===1?"0":t.addEqnNum?q%2?"1":"0":q%2?"0":"1";for(let q=0;q<r.length;q++)for(let P=0;P<r[q].children.length;P++)r[q].children[P].style.padding=`${c}ex ${N(P,1)}${m} ${c}ex ${N(P,0)}${m}`;const b=t.envClasses.includes("align")||t.envClasses.includes("alignat");for(let q=0;q<r.length;q++){const P=r[q];if(b){for(let G=0;G<P.children.length;G++)P.children[G].classes=["tml-"+(G%2?"left":"right")];if(t.addEqnNum){const G=t.leqno?0:P.children.length-1;P.children[G].classes=["tml-"+(t.leqno?"left":"right")]}}if(P.children.length>1&&t.envClasses.includes("cases")&&(P.children[1].style.padding=P.children[1].style.padding.replace(/0em$/,"1em")),t.envClasses.includes("cases")||t.envClasses.includes("subarray"))for(const G of P.children)G.classes.push("tml-left")}}else for(let c=0;c<r.length;c++)r[c].children[0].style.paddingLeft="0em",r[c].children.length===r[0].children.length&&(r[c].children[r[c].children.length-1].style.paddingRight="0em");let o=new y.MathNode("mtable",r);t.scriptLevel==="display"&&o.setAttribute("displaystyle","true"),(t.addEqnNum||t.envClasses.includes("multline"))&&(o.style.width="100%");let l="";if(t.cols&&t.cols.length>0){const c=t.cols;let h=!1,m=0,x=c.length;for(;c[m].type==="separator";)m+=1;for(;c[x-1].type==="separator";)x-=1;if(c[0].type==="separator"){const b=c[1].type==="separator"?"0.15em double":c[0].separator==="|"?"0.06em solid ":"0.06em dashed ";for(const q of o.children)q.children[0].style.borderLeft=b}let N=t.addEqnNum?0:-1;for(let b=m;b<x;b++)if(c[b].type==="align"){const q=Ea[c[b].align];l+=q,N+=1;for(const P of o.children)q.trim()!=="center"&&N<P.children.length&&(P.children[N].classes=["tml-"+q.trim()]);h=!0}else if(c[b].type==="separator"){if(h){const q=c[b+1].type==="separator"?"0.15em double":c[b].separator==="|"?"0.06em solid":"0.06em dashed";for(const P of o.children)N<P.children.length&&(P.children[N].style.borderRight=q)}h=!1}if(c[c.length-1].type==="separator"){const b=c[c.length-2].type==="separator"?"0.15em double":c[c.length-1].separator==="|"?"0.06em solid":"0.06em dashed";for(const q of o.children)q.children[q.children.length-1].style.borderRight=b,q.children[q.children.length-1].style.paddingRight="0.4em"}}return t.addEqnNum&&(l="left "+(l.length>0?l:"center ")+"right "),l&&o.setAttribute("columnalign",l.trim()),t.envClasses.includes("small")&&(o=new y.MathNode("mstyle",[o]),o.setAttribute("scriptlevel","1")),o},fs=function(t,e){t.envName.indexOf("ed")===-1&&Ae(t);const r=[],n=ee(t.parser,{cols:r,addEqnNum:t.envName==="align"||t.envName==="alignat",emptySingleRow:!0,envClasses:["abut","jot"],maxNumCols:t.envName==="split"?2:void 0,leqno:t.parser.settings.leqno},"display");let s,o=0;const l=t.envName.indexOf("at")>-1;if(e[0]&&l){let c="";for(let h=0;h<e[0].body.length;h++){const m=V(e[0].body[h],"textord");c+=m.text}if(isNaN(c))throw new M("The alignat enviroment requires a numeric first argument.");s=Number(c),o=s*2}n.body.forEach(function(c){if(l){const h=c.length/2;if(s<h)throw new M(`Too many math in a row: expected ${s}, but got ${h}`,c[0])}else o<c.length&&(o=c.length)});for(let c=0;c<o;++c){let h="r";c%2===1&&(h="l"),r[c]={type:"align",align:h}}return t.envName==="split"||(l?n.envClasses.push("alignat"):n.envClasses[0]="align"),n};Gt({type:"array",names:["array","darray"],props:{numArgs:1},handler(t,e){const r=(Ve(e[0])?[e[0]]:V(e[0],"ordgroup").body).map(function(l){const c=Lr(l).text;if("lcr".indexOf(c)!==-1)return{type:"align",align:c};if(c==="|")return{type:"separator",separator:"|"};if(c===":")return{type:"separator",separator:":"};throw new M("Unknown column alignment: "+c,l)}),[n,s]=ps(t.parser.gullet.macros),o={cols:r,envClasses:["array"],maxNumCols:r.length,arraystretch:n,arraycolsep:s};return ee(t.parser,o,ms(t.envName))},mathmlBuilder:Ft});Gt({type:"array",names:["matrix","pmatrix","bmatrix","Bmatrix","vmatrix","Vmatrix","matrix*","pmatrix*","bmatrix*","Bmatrix*","vmatrix*","Vmatrix*"],props:{numArgs:0},handler(t){const e={matrix:null,pmatrix:["(",")"],bmatrix:["[","]"],Bmatrix:["\\{","\\}"],vmatrix:["|","|"],Vmatrix:["\\Vert","\\Vert"]}[t.envName.replace("*","")];let r="c";const n={envClasses:[],cols:[]};if(t.envName.charAt(t.envName.length-1)==="*"){const c=t.parser;if(c.consumeSpaces(),c.fetch().text==="["){if(c.consume(),c.consumeSpaces(),r=c.fetch().text,"lcr".indexOf(r)===-1)throw new M("Expected l or c or r",c.nextToken);c.consume(),c.consumeSpaces(),c.expect("]"),c.consume(),n.cols=[]}}const s=ee(t.parser,n,"text");s.cols=new Array(s.body[0].length).fill({type:"align",align:r});const[o,l]=ps(t.parser.gullet.macros);return e?{type:"leftright",mode:t.mode,body:[s],left:e[0],right:e[1],rightColor:void 0,arraystretch:o,arraycolsep:l}:s},mathmlBuilder:Ft});Gt({type:"array",names:["smallmatrix"],props:{numArgs:0},handler(t){const e={type:"small"},r=ee(t.parser,e,"script");return r.envClasses=["small"],r},mathmlBuilder:Ft});Gt({type:"array",names:["subarray"],props:{numArgs:1},handler(t,e){const r=(Ve(e[0])?[e[0]]:V(e[0],"ordgroup").body).map(function(s){const o=Lr(s).text;if("lc".indexOf(o)!==-1)return{type:"align",align:o};throw new M("Unknown column alignment: "+o,s)});if(r.length>1)throw new M("{subarray} can contain only one column");let n={cols:r,envClasses:["small"]};if(n=ee(t.parser,n,"script"),n.body.length>0&&n.body[0].length>1)throw new M("{subarray} can contain only one column");return n},mathmlBuilder:Ft});Gt({type:"array",names:["cases","dcases","rcases","drcases"],props:{numArgs:0},handler(t){const e={cols:[],envClasses:["cases"]},r=ee(t.parser,e,ms(t.envName));return{type:"leftright",mode:t.mode,body:[r],left:t.envName.indexOf("r")>-1?".":"\\{",right:t.envName.indexOf("r")>-1?"\\}":".",rightColor:void 0}},mathmlBuilder:Ft});Gt({type:"array",names:["align","align*","aligned","split"],props:{numArgs:0},handler:fs,mathmlBuilder:Ft});Gt({type:"array",names:["alignat","alignat*","alignedat"],props:{numArgs:1},handler:fs,mathmlBuilder:Ft});Gt({type:"array",names:["gathered","gather","gather*"],props:{numArgs:0},handler(t){t.envName!=="gathered"&&Ae(t);const e={cols:[],envClasses:["abut","jot"],addEqnNum:t.envName==="gather",emptySingleRow:!0,leqno:t.parser.settings.leqno};return ee(t.parser,e,"display")},mathmlBuilder:Ft});Gt({type:"array",names:["equation","equation*"],props:{numArgs:0},handler(t){Ae(t);const e={addEqnNum:t.envName==="equation",emptySingleRow:!0,singleRow:!0,maxNumCols:1,envClasses:["align"],leqno:t.parser.settings.leqno};return ee(t.parser,e,"display")},mathmlBuilder:Ft});Gt({type:"array",names:["multline","multline*"],props:{numArgs:0},handler(t){Ae(t);const e={addEqnNum:t.envName==="multline",maxNumCols:1,envClasses:["jot","multline"],leqno:t.parser.settings.leqno};return ee(t.parser,e,"display")},mathmlBuilder:Ft});Gt({type:"array",names:["CD"],props:{numArgs:0},handler(t){return Ae(t),Sa(t.parser)},mathmlBuilder:Ft});$({type:"text",names:["\\hline","\\hdashline"],props:{numArgs:0,allowedInText:!0,allowedInMath:!0},handler(t,e){throw new M(`${t.funcName} valid only within array environment`)}});const bn=ls;$({type:"environment",names:["\\begin","\\end"],props:{numArgs:1,argTypes:["text"]},handler({parser:t,funcName:e},r){const n=r[0];if(n.type!=="ordgroup")throw new M("Invalid environment name",n);let s="";for(let o=0;o<n.body.length;++o)s+=V(n.body[o],"textord").text;if(e==="\\begin"){if(!Object.prototype.hasOwnProperty.call(bn,s))throw new M("No such environment: "+s,n);const o=bn[s],{args:l,optArgs:c}=t.parseArguments("\\begin{"+s+"}",o),h={mode:t.mode,envName:s,parser:t},m=o.handler(h,l,c);t.expect("\\end",!1);const x=t.nextToken,N=V(t.parseFunction(),"environment");if(N.name!==s)throw new M(`Mismatch: \\begin{${s}} matched by \\end{${N.name}}`,x);return m}return{type:"environment",mode:t.mode,name:s,nameGroup:n}}});$({type:"envTag",names:["\\env@tag"],props:{numArgs:1,argTypes:["math"]},handler({parser:t},e){return{type:"envTag",mode:t.mode,body:e[0]}},mathmlBuilder(t,e){return new y.MathNode("mrow")}});$({type:"noTag",names:["\\env@notag"],props:{numArgs:0},handler({parser:t}){return{type:"noTag",mode:t.mode}},mathmlBuilder(t,e){return new y.MathNode("mrow")}});const za=(t,e)=>{if(e!=="mathrm"||t.body.type!=="ordgroup"||t.body.body.length===1||t.body.body[0].type!=="mathord")return!1;for(let r=1;r<t.body.body.length;r++){const n=t.body.body[r].type;if(!(n==="mathord"||n==="textord"&&!isNaN(t.body.body[r].text)))return!1}return!0},gs=(t,e)=>{const r=t.font,n=e.withFont(r),s=ut(t.body,n);if(s.children.length===0)return s;if(r==="boldsymbol"&&["mo","mpadded","mrow"].includes(s.type))return s.style.fontWeight="bold",s;if(za(t,r)){const c=s.children[0].children[0];delete c.attributes.mathvariant;for(let m=1;m<s.children.length;m++)c.children[0].text+=s.children[m].type==="mn"?s.children[m].children[0].text:s.children[m].children[0].children[0].text;const h=new y.MathNode("mtext",new y.TextNode("â€‹"));return new y.MathNode("mrow",[h,c])}let o=s.children[0].type==="mo";for(let c=1;c<s.children.length;c++)s.children[c].type==="mo"&&r==="boldsymbol"&&(s.children[c].style.fontWeight="bold"),s.children[c].type!=="mi"&&(o=!1),(s.children[c].attributes&&s.children[c].attributes.mathvariant||"")!=="normal"&&(o=!1);if(!o)return s;const l=s.children[0];for(let c=1;c<s.children.length;c++)l.children.push(s.children[c].children[0]);if(l.attributes.mathvariant&&l.attributes.mathvariant==="normal"){const c=new y.MathNode("mtext",new y.TextNode("â€‹"));return new y.MathNode("mrow",[c,l])}return l},xn={"\\Bbb":"\\mathbb","\\bold":"\\mathbf","\\frak":"\\mathfrak","\\bm":"\\boldsymbol"};$({type:"font",names:["\\mathrm","\\mathit","\\mathbf","\\mathnormal","\\up@greek","\\boldsymbol","\\mathbb","\\mathcal","\\mathfrak","\\mathscr","\\mathsf","\\mathtt","\\Bbb","\\bm","\\bold","\\frak"],props:{numArgs:1,allowedInArgument:!0},handler:({parser:t,funcName:e},r)=>{const n=ye(r[0]);let s=e;return s in xn&&(s=xn[s]),{type:"font",mode:t.mode,font:s.slice(1),body:n}},mathmlBuilder:gs});$({type:"font",names:["\\rm","\\sf","\\tt","\\bf","\\it","\\cal"],props:{numArgs:0,allowedInText:!0},handler:({parser:t,funcName:e,breakOnTokenText:r},n)=>{const{mode:s}=t,o=t.parseExpression(!0,r,!0),l=`math${e.slice(1)}`;return{type:"font",mode:s,font:l,body:{type:"ordgroup",mode:t.mode,body:o}}},mathmlBuilder:gs});const yn=["display","text","script","scriptscript"],Da={auto:-1,display:0,text:0,script:1,scriptscript:2},jr=(t,e)=>{const r=t.scriptLevel==="auto"?e.incrementLevel():t.scriptLevel==="display"?e.withLevel(bt.TEXT):t.scriptLevel==="text"?e.withLevel(bt.SCRIPT):e.withLevel(bt.SCRIPTSCRIPT);let n=new y.MathNode("mfrac",[ut(t.numer,r),ut(t.denom,r)]);if(!t.hasBarLine)n.setAttribute("linethickness","0px");else if(t.barSize){const s=Wt(t.barSize,e);n.setAttribute("linethickness",s.number+s.unit)}if(t.leftDelim!=null||t.rightDelim!=null){const s=[];if(t.leftDelim!=null){const o=new y.MathNode("mo",[new y.TextNode(t.leftDelim.replace("\\",""))]);o.setAttribute("fence","true"),s.push(o)}if(s.push(n),t.rightDelim!=null){const o=new y.MathNode("mo",[new y.TextNode(t.rightDelim.replace("\\",""))]);o.setAttribute("fence","true"),s.push(o)}n=Br(s)}return t.scriptLevel!=="auto"&&(n=new y.MathNode("mstyle",[n]),n.setAttribute("displaystyle",String(t.scriptLevel==="display")),n.setAttribute("scriptlevel",Da[t.scriptLevel])),n};$({type:"genfrac",names:["\\dfrac","\\frac","\\tfrac","\\dbinom","\\binom","\\tbinom","\\\\atopfrac","\\\\bracefrac","\\\\brackfrac"],props:{numArgs:2,allowedInArgument:!0},handler:({parser:t,funcName:e},r)=>{const n=r[0],s=r[1];let o=!1,l=null,c=null,h="auto";switch(e){case"\\dfrac":case"\\frac":case"\\tfrac":o=!0;break;case"\\\\atopfrac":o=!1;break;case"\\dbinom":case"\\binom":case"\\tbinom":l="(",c=")";break;case"\\\\bracefrac":l="\\{",c="\\}";break;case"\\\\brackfrac":l="[",c="]";break;default:throw new Error("Unrecognized genfrac command")}switch(e){case"\\dfrac":case"\\dbinom":h="display";break;case"\\tfrac":case"\\tbinom":h="text";break}return{type:"genfrac",mode:t.mode,continued:!1,numer:n,denom:s,hasBarLine:o,leftDelim:l,rightDelim:c,scriptLevel:h,barSize:null}},mathmlBuilder:jr});$({type:"genfrac",names:["\\cfrac"],props:{numArgs:2},handler:({parser:t,funcName:e},r)=>{const n=r[0],s=r[1];return{type:"genfrac",mode:t.mode,continued:!0,numer:n,denom:s,hasBarLine:!0,leftDelim:null,rightDelim:null,scriptLevel:"display",barSize:null}}});$({type:"infix",names:["\\over","\\choose","\\atop","\\brace","\\brack"],props:{numArgs:0,infix:!0},handler({parser:t,funcName:e,token:r}){let n;switch(e){case"\\over":n="\\frac";break;case"\\choose":n="\\binom";break;case"\\atop":n="\\\\atopfrac";break;case"\\brace":n="\\\\bracefrac";break;case"\\brack":n="\\\\brackfrac";break;default:throw new Error("Unrecognized infix genfrac command")}return{type:"infix",mode:t.mode,replaceWith:n,token:r}}});const wn=function(t){let e=null;return t.length>0&&(e=t,e=e==="."?null:e),e};$({type:"genfrac",names:["\\genfrac"],props:{numArgs:6,allowedInArgument:!0,argTypes:["math","math","size","text","math","math"]},handler({parser:t},e){const r=e[4],n=e[5],s=ye(e[0]),o=s.type==="atom"&&s.family==="open"?wn(s.text):null,l=ye(e[1]),c=l.type==="atom"&&l.family==="close"?wn(l.text):null,h=V(e[2],"size");let m,x=null;h.isBlank?m=!0:(x=h.value,m=x.number>0);let N="auto",b=e[3];if(b.type==="ordgroup"){if(b.body.length>0){const q=V(b.body[0],"textord");N=yn[Number(q.text)]}}else b=V(b,"textord"),N=yn[Number(b.text)];return{type:"genfrac",mode:t.mode,numer:r,denom:n,continued:!1,hasBarLine:m,barSize:x,leftDelim:o,rightDelim:c,scriptLevel:N}},mathmlBuilder:jr});$({type:"infix",names:["\\above"],props:{numArgs:1,argTypes:["size"],infix:!0},handler({parser:t,funcName:e,token:r},n){return{type:"infix",mode:t.mode,replaceWith:"\\\\abovefrac",barSize:V(n[0],"size").value,token:r}}});$({type:"genfrac",names:["\\\\abovefrac"],props:{numArgs:3,argTypes:["math","size","math"]},handler:({parser:t,funcName:e},r)=>{const n=r[0],s=Hs(V(r[1],"infix").barSize),o=r[2],l=s.number>0;return{type:"genfrac",mode:t.mode,numer:n,denom:o,continued:!1,hasBarLine:l,barSize:s,leftDelim:null,rightDelim:null,scriptLevel:"auto"}},mathmlBuilder:jr});$({type:"hbox",names:["\\hbox"],props:{numArgs:1,argTypes:["hbox"],allowedInArgument:!0,allowedInText:!1},handler({parser:t},e){return{type:"hbox",mode:t.mode,body:ft(e[0])}},mathmlBuilder(t,e){const r=e.withLevel(bt.TEXT),n=te(t.body,r);return $r(n)}});const ja=(t,e)=>{const r=Ue.mathMLnode(t.label);return r.style["math-depth"]=0,new y.MathNode(t.isOver?"mover":"munder",[ut(t.base,e),r])};$({type:"horizBrace",names:["\\overbrace","\\underbrace"],props:{numArgs:1},handler({parser:t,funcName:e},r){return{type:"horizBrace",mode:t.mode,label:e,isOver:/^\\over/.test(e),base:r[0]}},mathmlBuilder:ja});$({type:"href",names:["\\href"],props:{numArgs:2,argTypes:["url","original"],allowedInText:!0},handler:({parser:t,token:e},r)=>{const n=r[1],s=V(r[0],"url").url;if(!t.settings.isTrusted({command:"\\href",url:s}))throw new M('Function "\\href" is not trusted',e);return{type:"href",mode:t.mode,href:s,body:ft(n)}},mathmlBuilder:(t,e)=>{let r=te(t.body,e);return r instanceof Mt||(r=new Mt("mrow",[r])),r.setAttribute("href",t.href),r}});$({type:"href",names:["\\url"],props:{numArgs:1,argTypes:["url"],allowedInText:!0},handler:({parser:t,token:e},r)=>{const n=V(r[0],"url").url;if(!t.settings.isTrusted({command:"\\url",url:n}))throw new M('Function "\\url" is not trusted',e);const s=[];for(let l=0;l<n.length;l++){let c=n[l];c==="~"&&(c="\\textasciitilde"),s.push({type:"textord",mode:"text",text:c})}const o={type:"text",mode:t.mode,font:"\\texttt",body:s};return{type:"href",mode:t.mode,href:n,body:ft(o)}}});$({type:"html",names:["\\class","\\id","\\style","\\data"],props:{numArgs:2,argTypes:["raw","original"],allowedInText:!0},handler:({parser:t,funcName:e,token:r},n)=>{const s=V(n[0],"raw").string,o=n[1];if(t.settings.strict)throw new M(`Function "${e}" is disabled in strict mode`,r);let l;const c={};switch(e){case"\\class":c.class=s,l={command:"\\class",class:s};break;case"\\id":c.id=s,l={command:"\\id",id:s};break;case"\\style":c.style=s,l={command:"\\style",style:s};break;case"\\data":{const h=s.split(",");for(let m=0;m<h.length;m++){const x=h[m].split("=");if(x.length!==2)throw new M("Error parsing key-value for \\data");c["data-"+x[0].trim()]=x[1].trim()}l={command:"\\data",attributes:c};break}default:throw new Error("Unrecognized html command")}if(!t.settings.isTrusted(l))throw new M(`Function "${e}" is not trusted`,r);return{type:"html",mode:t.mode,attributes:c,body:ft(o)}},mathmlBuilder:(t,e)=>{const r=te(t.body,e),n=[];t.attributes.class&&n.push(...t.attributes.class.trim().split(/\s+/)),r.classes=n;for(const s in t.attributes)s!=="class"&&Object.prototype.hasOwnProperty.call(t.attributes,s)&&r.setAttribute(s,t.attributes[s]);return r}});const sr=function(t){if(/^[-+]? *(\d+(\.\d*)?|\.\d+)$/.test(t))return{number:+t,unit:"bp"};{const e=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(t);if(!e)throw new M("Invalid size: '"+t+"' in \\includegraphics");const r={number:+(e[1]+e[2]),unit:e[3]};if(!ns(r))throw new M("Invalid unit: '"+r.unit+"' in \\includegraphics.");return r}};$({type:"includegraphics",names:["\\includegraphics"],props:{numArgs:1,numOptionalArgs:1,argTypes:["raw","url"],allowedInText:!1},handler:({parser:t,token:e},r,n)=>{let s={number:0,unit:"em"},o={number:.9,unit:"em"},l={number:0,unit:"em"},c="";if(n[0]){const m=V(n[0],"raw").string.split(",");for(let x=0;x<m.length;x++){const N=m[x].split("=");if(N.length===2){const b=N[1].trim();switch(N[0].trim()){case"alt":c=b;break;case"width":s=sr(b);break;case"height":o=sr(b);break;case"totalheight":l=sr(b);break;default:throw new M("Invalid key: '"+N[0]+"' in \\includegraphics.")}}}}const h=V(r[0],"url").url;if(c===""&&(c=h,c=c.replace(/^.*[\\/]/,""),c=c.substring(0,c.lastIndexOf("."))),!t.settings.isTrusted({command:"\\includegraphics",url:h}))throw new M('Function "\\includegraphics" is not trusted',e);return{type:"includegraphics",mode:t.mode,alt:c,width:s,height:o,totalheight:l,src:h}},mathmlBuilder:(t,e)=>{const r=Wt(t.height,e),n={number:0,unit:"em"};t.totalheight.number>0&&t.totalheight.unit===r.unit&&t.totalheight.number>r.number&&(n.number=t.totalheight.number-r.number,n.unit=r.unit);let s=0;t.width.number>0&&(s=Wt(t.width,e));const o={height:r.number+n.number+"em"};s.number>0&&(o.width=s.number+s.unit),n.number>0&&(o.verticalAlign=-n.number+n.unit);const l=new ea(t.src,t.alt,o);return l.height=r,l.depth=n,new y.MathNode("mtext",[l])}});$({type:"kern",names:["\\kern","\\mkern","\\hskip","\\mskip"],props:{numArgs:1,argTypes:["size"],primitive:!0,allowedInText:!0},handler({parser:t,funcName:e,token:r},n){const s=V(n[0],"size");if(t.settings.strict){const o=e[1]==="m",l=s.value.unit==="mu";if(o){if(!l)throw new M(`LaTeX's ${e} supports only mu units, not ${s.value.unit} units`,r);if(t.mode!=="math")throw new M(`LaTeX's ${e} works only in math mode`,r)}else if(l)throw new M(`LaTeX's ${e} doesn't support mu units`,r)}return{type:"kern",mode:t.mode,dimension:s.value}},mathmlBuilder(t,e){const r=Wt(t.dimension,e),n=r.unit==="em"?bs(r.number):"";if(t.mode==="text"&&n.length>0){const s=new y.TextNode(n);return new y.MathNode("mtext",[s])}else{const s=new y.MathNode("mspace");return s.setAttribute("width",r.number+r.unit),r.number<0&&(s.style.marginLeft=r.number+r.unit),s}}});const bs=function(t){return t>=.05555&&t<=.05556?"â€Š":t>=.1666&&t<=.1667?"â€‰":t>=.2222&&t<=.2223?"â€…":t>=.2777&&t<=.2778?"â€…â€Š":""},xs=/[^A-Za-z_0-9-]/g;$({type:"label",names:["\\label"],props:{numArgs:1,argTypes:["raw"]},handler({parser:t},e){return{type:"label",mode:t.mode,string:e[0].string.replace(xs,"")}},mathmlBuilder(t,e){const r=new y.MathNode("mrow",[],["tml-label"]);return t.string.length>0&&r.setAttribute("id",t.string),r}});const Ra=["\\clap","\\llap","\\rlap"];$({type:"lap",names:["\\mathllap","\\mathrlap","\\mathclap","\\clap","\\llap","\\rlap"],props:{numArgs:1,allowedInText:!0},handler:({parser:t,funcName:e,token:r},n)=>{if(Ra.includes(e)){if(t.settings.strict&&t.mode!=="text")throw new M(`{${e}} can be used only in text mode.
 Try \\math${e.slice(1)}`,r);e=e.slice(1)}else e=e.slice(5);const s=n[0];return{type:"lap",mode:t.mode,alignment:e,body:s}},mathmlBuilder:(t,e)=>{let r;if(t.alignment==="llap"){const o=Ct(ft(t.body),e),l=new y.MathNode("mphantom",o);r=new y.MathNode("mpadded",[l]),r.setAttribute("width","0px")}const n=ut(t.body,e);let s;if(t.alignment==="llap"?(n.style.position="absolute",n.style.right="0",n.style.bottom="0",s=new y.MathNode("mpadded",[r,n])):s=new y.MathNode("mpadded",[n]),t.alignment==="rlap")t.body.body.length>0&&t.body.body[0].type==="genfrac"&&s.setAttribute("lspace","0.16667em");else{const o=t.alignment==="llap"?"-1":"-0.5";s.setAttribute("lspace",o+"width"),t.alignment==="llap"?s.style.position="relative":(s.style.display="flex",s.style.justifyContent="center")}return s.setAttribute("width","0px"),s}});$({type:"ordgroup",names:["\\(","$"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler({funcName:t,parser:e},r){const n=e.mode;e.switchMode("math");const s=t==="\\("?"\\)":"$",o=e.parseExpression(!1,s);return e.expect(s),e.switchMode(n),{type:"ordgroup",mode:e.mode,body:o}}});$({type:"text",names:["\\)","\\]"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler(t,e){throw new M(`Mismatched ${t.funcName}`,e)}});const Ga=(t,e)=>{switch(e.level){case bt.DISPLAY:return t.display;case bt.TEXT:return t.text;case bt.SCRIPT:return t.script;case bt.SCRIPTSCRIPT:return t.scriptscript;default:return t.text}};$({type:"mathchoice",names:["\\mathchoice"],props:{numArgs:4,primitive:!0},handler:({parser:t},e)=>({type:"mathchoice",mode:t.mode,display:ft(e[0]),text:ft(e[1]),script:ft(e[2]),scriptscript:ft(e[3])}),mathmlBuilder:(t,e)=>{const r=Ga(t,e);return te(r,e)}});const Fa=["text","textord","mathord","atom"],ae=t=>{const e=new y.MathNode("mspace");return e.setAttribute("width",t+"em"),e};function ys(t,e){let r;const n=Ct(t.body,e);if(t.mclass==="minner")r=new y.MathNode("mpadded",n);else if(t.mclass==="mord")t.isCharacterBox||n[0].type==="mathord"?(r=n[0],r.type="mi",r.children.length===1&&r.children[0].text&&r.children[0].text==="âˆ‡"&&r.setAttribute("mathvariant","normal")):r=new y.MathNode("mi",n);else{r=new y.MathNode("mrow",n),t.mustPromote?(r=n[0],r.type="mo",t.isCharacterBox&&t.body[0].text&&/[A-Za-z]/.test(t.body[0].text)&&r.setAttribute("mathvariant","italic")):r=new y.MathNode("mrow",n);const s=e.level<2;r.type==="mrow"?s&&(t.mclass==="mbin"?(r.children.unshift(ae(.2222)),r.children.push(ae(.2222))):t.mclass==="mrel"?(r.children.unshift(ae(.2778)),r.children.push(ae(.2778))):t.mclass==="mpunct"?r.children.push(ae(.1667)):t.mclass==="minner"&&(r.children.unshift(ae(.0556)),r.children.push(ae(.0556)))):t.mclass==="mbin"?(r.attributes.lspace=s?"0.2222em":"0",r.attributes.rspace=s?"0.2222em":"0"):t.mclass==="mrel"?(r.attributes.lspace=s?"0.2778em":"0",r.attributes.rspace=s?"0.2778em":"0"):t.mclass==="mpunct"?(r.attributes.lspace="0em",r.attributes.rspace=s?"0.1667em":"0"):t.mclass==="mopen"||t.mclass==="mclose"?(r.attributes.lspace="0em",r.attributes.rspace="0em"):t.mclass==="minner"&&s&&(r.attributes.lspace="0.0556em",r.attributes.width="+0.1111em"),t.mclass==="mopen"||t.mclass==="mclose"||(delete r.attributes.stretchy,delete r.attributes.form)}return r}$({type:"mclass",names:["\\mathord","\\mathbin","\\mathrel","\\mathopen","\\mathclose","\\mathpunct","\\mathinner"],props:{numArgs:1,primitive:!0},handler({parser:t,funcName:e},r){const n=r[0],s=it.isCharacterBox(n);let o=!0;const l={type:"mathord",text:"",mode:t.mode},c=n.body?n.body:[n];for(const h of c)if(Fa.includes(h.type))xt[t.mode][h.text]?l.text+=xt[t.mode][h.text].replace:h.text?l.text+=h.text:h.body&&h.body.map(m=>{l.text+=m.text});else{o=!1;break}return{type:"mclass",mode:t.mode,mclass:"m"+e.slice(5),body:ft(o?l:n),isCharacterBox:s,mustPromote:o}},mathmlBuilder:ys});const Ua=t=>{const e=t.type==="ordgroup"&&t.body.length?t.body[0]:t;return e.type==="atom"&&(e.family==="bin"||e.family==="rel")?"m"+e.family:"mord"};$({type:"mclass",names:["\\@binrel"],props:{numArgs:2},handler({parser:t},e){return{type:"mclass",mode:t.mode,mclass:Ua(e[0]),body:ft(e[1]),isCharacterBox:it.isCharacterBox(e[1])}}});$({type:"mclass",names:["\\stackrel","\\overset","\\underset"],props:{numArgs:2},handler({parser:t,funcName:e},r){const n=r[1],s=r[0],o={type:"op",mode:n.mode,limits:!0,alwaysHandleSupSub:!0,parentIsSupSub:!1,symbol:!1,stack:!0,suppressBaseShift:e!=="\\stackrel",body:ft(n)};return{type:"supsub",mode:s.mode,base:o,sup:e==="\\underset"?null:s,sub:e==="\\underset"?s:null}},mathmlBuilder:ys});const Oe=(t,e,r)=>{if(!t)return r;const n=ut(t,e);return n.type==="mrow"&&n.children.length===0?r:n};$({type:"multiscript",names:["\\sideset","\\pres@cript"],props:{numArgs:3},handler({parser:t,funcName:e,token:r},n){if(n[2].body.length===0)throw new M(e+"cannot parse an empty base.");const s=n[2].body[0];if(t.settings.strict&&e==="\\sideset"&&!s.symbol)throw new M("The base of \\sideset must be a big operator. Try \\prescript.");if(n[0].body.length>0&&n[0].body[0].type!=="supsub"||n[1].body.length>0&&n[1].body[0].type!=="supsub")throw new M("\\sideset can parse only subscripts and superscripts in its first two arguments",r);const o=n[0].body.length>0?n[0].body[0]:null,l=n[1].body.length>0?n[1].body[0]:null;return!o&&!l?s:o?{type:"multiscript",mode:t.mode,isSideset:e==="\\sideset",prescripts:o,postscripts:l,base:s}:{type:"styling",mode:t.mode,scriptLevel:"text",body:[{type:"supsub",mode:t.mode,base:s,sup:l.sup,sub:l.sub}]}},mathmlBuilder(t,e){const r=ut(t.base,e),n=new y.MathNode("mprescripts"),s=new y.MathNode("none");let o=[];const l=Oe(t.prescripts.sub,e,s),c=Oe(t.prescripts.sup,e,s);if(t.isSideset&&(l.setAttribute("style","text-align: left;"),c.setAttribute("style","text-align: left;")),t.postscripts){const h=Oe(t.postscripts.sub,e,s),m=Oe(t.postscripts.sup,e,s);o=[r,h,m,n,l,c]}else o=[r,n,l,c];return new y.MathNode("mmultiscripts",o)}});$({type:"not",names:["\\not"],props:{numArgs:1,primitive:!0,allowedInText:!1},handler({parser:t},e){const r=it.isCharacterBox(e[0]);let n;return r?(n=ft(e[0]),n[0].text.charAt(0)==="\\"&&(n[0].text=xt.math[n[0].text].replace),n[0].text=n[0].text.slice(0,1)+"Ì¸"+n[0].text.slice(1)):n=[{type:"textord",mode:"math",text:"Ì¸"},{type:"kern",mode:"math",dimension:{number:-.6,unit:"em"}},e[0]],{type:"not",mode:t.mode,body:n,isCharacterBox:r}},mathmlBuilder(t,e){return t.isCharacterBox?Ct(t.body,e,!0)[0]:te(t.body,e)}});const Va=["textord","mathord","atom"],Za=["\\smallint"],Rr=["textord","mathord","ordgroup","close","leftright","font"],vn=t=>{t.attributes.lspace="0.1667em",t.attributes.rspace="0.1667em"},Se=(t,e)=>{let r;if(t.symbol)r=new Mt("mo",[Pt(t.name,t.mode)]),Za.includes(t.name)?r.setAttribute("largeop","false"):t.limits?r.setAttribute("stretchy","true"):r.setAttribute("movablelimits","false"),t.fromMathOp&&vn(r);else if(t.body)r=new Mt("mo",Ct(t.body,e)),t.fromMathOp&&vn(r);else if(r=new Mt("mi",[new Jn(t.name.slice(1))]),!t.parentIsSupSub){const n=new Mt("mo",[Pt("â¡","text")]),s=[r,n];if(t.needsLeadingSpace){const o=new Mt("mspace");o.setAttribute("width","0.1667em"),s.unshift(o)}if(!t.isFollowedByDelimiter){const o=new Mt("mspace");o.setAttribute("width","0.1667em"),s.push(o)}r=new Mt("mrow",s)}return r},Wa={"âˆ":"\\prod","âˆ":"\\coprod","âˆ‘":"\\sum","â‹€":"\\bigwedge","â‹":"\\bigvee","â‹‚":"\\bigcap","â‹ƒ":"\\bigcup","â¨€":"\\bigodot","â¨":"\\bigoplus","â¨‚":"\\bigotimes","â¨„":"\\biguplus","â¨…":"\\bigsqcap","â¨†":"\\bigsqcup","â¨ƒ":"\\bigcupdot","â¨‡":"\\bigdoublevee","â¨ˆ":"\\bigdoublewedge","â¨‰":"\\bigtimes"};$({type:"op",names:["\\coprod","\\bigvee","\\bigwedge","\\biguplus","\\bigcupplus","\\bigcupdot","\\bigcap","\\bigcup","\\bigdoublevee","\\bigdoublewedge","\\intop","\\prod","\\sum","\\bigotimes","\\bigoplus","\\bigodot","\\bigsqcap","\\bigsqcup","\\bigtimes","\\smallint","âˆ","âˆ","âˆ‘","â‹€","â‹","â‹‚","â‹ƒ","â¨€","â¨","â¨‚","â¨„","â¨†"],props:{numArgs:0},handler:({parser:t,funcName:e},r)=>{let n=e;return n.length===1&&(n=Wa[n]),{type:"op",mode:t.mode,limits:!0,parentIsSupSub:!1,symbol:!0,stack:!1,name:n}},mathmlBuilder:Se});$({type:"op",names:["\\mathop"],props:{numArgs:1,primitive:!0},handler:({parser:t},e)=>{const r=e[0],n=r.body?r.body:[r],s=n.length===1&&Va.includes(n[0].type);return{type:"op",mode:t.mode,limits:!0,parentIsSupSub:!1,symbol:s,fromMathOp:!0,stack:!1,name:s?n[0].text:null,body:s?null:ft(r)}},mathmlBuilder:Se});const Ha={"âˆ«":"\\int","âˆ¬":"\\iint","âˆ­":"\\iiint","âˆ®":"\\oint","âˆ¯":"\\oiint","âˆ°":"\\oiiint","âˆ±":"\\intclockwise","âˆ²":"\\varointclockwise","â¨Œ":"\\iiiint","â¨":"\\intbar","â¨":"\\intBar","â¨":"\\fint","â¨’":"\\rppolint","â¨“":"\\scpolint","â¨•":"\\pointint","â¨–":"\\sqint","â¨—":"\\intlarhk","â¨˜":"\\intx","â¨™":"\\intcap","â¨š":"\\intcup"};$({type:"op",names:["\\arcsin","\\arccos","\\arctan","\\arctg","\\arcctg","\\arg","\\ch","\\cos","\\cosec","\\cosh","\\cot","\\cotg","\\coth","\\csc","\\ctg","\\cth","\\deg","\\dim","\\exp","\\hom","\\ker","\\lg","\\ln","\\log","\\sec","\\sin","\\sinh","\\sh","\\sgn","\\tan","\\tanh","\\tg","\\th"],props:{numArgs:0},handler({parser:t,funcName:e}){const r=t.prevAtomType,n=t.gullet.future().text;return{type:"op",mode:t.mode,limits:!1,parentIsSupSub:!1,symbol:!1,stack:!1,isFollowedByDelimiter:Ze(n),needsLeadingSpace:r.length>0&&Rr.includes(r),name:e}},mathmlBuilder:Se});$({type:"op",names:["\\det","\\gcd","\\inf","\\lim","\\max","\\min","\\Pr","\\sup"],props:{numArgs:0},handler({parser:t,funcName:e}){const r=t.prevAtomType,n=t.gullet.future().text;return{type:"op",mode:t.mode,limits:!0,parentIsSupSub:!1,symbol:!1,stack:!1,isFollowedByDelimiter:Ze(n),needsLeadingSpace:r.length>0&&Rr.includes(r),name:e}},mathmlBuilder:Se});$({type:"op",names:["\\int","\\iint","\\iiint","\\iiiint","\\oint","\\oiint","\\oiiint","\\intclockwise","\\varointclockwise","\\intbar","\\intBar","\\fint","\\rppolint","\\scpolint","\\pointint","\\sqint","\\intlarhk","\\intx","\\intcap","\\intcup","âˆ«","âˆ¬","âˆ­","âˆ®","âˆ¯","âˆ°","âˆ±","âˆ²","â¨Œ","â¨","â¨","â¨","â¨’","â¨“","â¨•","â¨–","â¨—","â¨˜","â¨™","â¨š"],props:{numArgs:0},handler({parser:t,funcName:e}){let r=e;return r.length===1&&(r=Ha[r]),{type:"op",mode:t.mode,limits:!1,parentIsSupSub:!1,symbol:!0,stack:!1,name:r}},mathmlBuilder:Se});const Xa=(t,e)=>{let r=Ct(t.body,e.withFont("mathrm")),n=!0;for(let o=0;o<r.length;o++){let l=r[o];if(l instanceof y.MathNode)switch(l.type==="mrow"&&l.children.length===1&&l.children[0]instanceof y.MathNode&&(l=l.children[0]),l.type){case"mi":case"mn":case"ms":case"mtext":break;case"mspace":if(l.attributes.width){const c=l.attributes.width.replace("em",""),h=bs(Number(c));h===""?n=!1:r[o]=new y.MathNode("mtext",[new y.TextNode(h)])}break;case"mo":{const c=l.children[0];l.children.length===1&&c instanceof y.TextNode?c.text=c.text.replace(/\u2212/,"-").replace(/\u2217/,"*"):n=!1;break}default:n=!1}else n=!1}if(n){const o=r.map(l=>l.toText()).join("");r=[new y.TextNode(o)]}else if(r.length===1&&["mover","munder"].includes(r[0].type)&&(r[0].children[0].type==="mi"||r[0].children[0].type==="mtext")){if(r[0].children[0].type="mi",t.parentIsSupSub)return new y.MathNode("mrow",r);{const o=new y.MathNode("mo",[Pt("â¡","text")]);return y.newDocumentFragment([r[0],o])}}let s;if(n?(s=new y.MathNode("mi",r),r[0].text.length===1&&s.setAttribute("mathvariant","normal")):s=new y.MathNode("mrow",r),!t.parentIsSupSub){const o=new y.MathNode("mo",[Pt("â¡","text")]),l=[s,o];if(t.needsLeadingSpace){const c=new y.MathNode("mspace");c.setAttribute("width","0.1667em"),l.unshift(c)}if(!t.isFollowedByDelimiter){const c=new y.MathNode("mspace");c.setAttribute("width","0.1667em"),l.push(c)}return y.newDocumentFragment(l)}return s};$({type:"operatorname",names:["\\operatorname@","\\operatornamewithlimits"],props:{numArgs:1,allowedInArgument:!0},handler:({parser:t,funcName:e},r)=>{const n=r[0],s=t.prevAtomType,o=t.gullet.future().text;return{type:"operatorname",mode:t.mode,body:ft(n),alwaysHandleSupSub:e==="\\operatornamewithlimits",limits:!1,parentIsSupSub:!1,isFollowedByDelimiter:Ze(o),needsLeadingSpace:s.length>0&&Rr.includes(s)}},mathmlBuilder:Xa});u("\\operatorname","\\@ifstar\\operatornamewithlimits\\operatorname@");ce({type:"ordgroup",mathmlBuilder(t,e){return te(t.body,e,t.semisimple)}});$({type:"phantom",names:["\\phantom"],props:{numArgs:1,allowedInText:!0},handler:({parser:t},e)=>{const r=e[0];return{type:"phantom",mode:t.mode,body:ft(r)}},mathmlBuilder:(t,e)=>{const r=Ct(t.body,e);return new y.MathNode("mphantom",r)}});$({type:"hphantom",names:["\\hphantom"],props:{numArgs:1,allowedInText:!0},handler:({parser:t},e)=>{const r=e[0];return{type:"hphantom",mode:t.mode,body:r}},mathmlBuilder:(t,e)=>{const r=Ct(ft(t.body),e),n=new y.MathNode("mphantom",r),s=new y.MathNode("mpadded",[n]);return s.setAttribute("height","0px"),s.setAttribute("depth","0px"),s}});$({type:"vphantom",names:["\\vphantom"],props:{numArgs:1,allowedInText:!0},handler:({parser:t},e)=>{const r=e[0];return{type:"vphantom",mode:t.mode,body:r}},mathmlBuilder:(t,e)=>{const r=Ct(ft(t.body),e),n=new y.MathNode("mphantom",r),s=new y.MathNode("mpadded",[n]);return s.setAttribute("width","0px"),s}});$({type:"pmb",names:["\\pmb"],props:{numArgs:1,allowedInText:!0},handler({parser:t},e){return{type:"pmb",mode:t.mode,body:ft(e[0])}},mathmlBuilder(t,e){const r=Ct(t.body,e),n=Pr(r);return n.setAttribute("style","font-weight:bold"),n}});const ws=(t,e)=>{const r=e.withLevel(bt.TEXT),n=new y.MathNode("mpadded",[ut(t.body,r)]),s=Wt(t.dy,e);return n.setAttribute("voffset",s.number+s.unit),s.number>0?n.style.padding=s.number+s.unit+" 0 0 0":n.style.padding="0 0 "+Math.abs(s.number)+s.unit+" 0",n};$({type:"raise",names:["\\raise","\\lower"],props:{numArgs:2,argTypes:["size","primitive"],primitive:!0},handler({parser:t,funcName:e},r){const n=V(r[0],"size").value;e==="\\lower"&&(n.number*=-1);const s=r[1];return{type:"raise",mode:t.mode,dy:n,body:s}},mathmlBuilder:ws});$({type:"raise",names:["\\raisebox"],props:{numArgs:2,argTypes:["size","hbox"],allowedInText:!0},handler({parser:t,funcName:e},r){const n=V(r[0],"size").value,s=r[1];return{type:"raise",mode:t.mode,dy:n,body:s}},mathmlBuilder:ws});$({type:"ref",names:["\\ref","\\eqref"],props:{numArgs:1,argTypes:["raw"]},handler({parser:t,funcName:e},r){return{type:"ref",mode:t.mode,funcName:e,string:r[0].string.replace(xs,"")}},mathmlBuilder(t,e){const r=t.funcName==="\\ref"?["tml-ref"]:["tml-ref","tml-eqref"],n=new y.MathNode("mtext",[new y.TextNode("")],r);return n.setAttribute("href","#"+t.string),n}});$({type:"reflect",names:["\\reflectbox"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!0},handler({parser:t},e){return{type:"reflect",mode:t.mode,body:e[0]}},mathmlBuilder(t,e){const r=ut(t.body,e);return r.style.transform="scaleX(-1)",r}});$({type:"internal",names:["\\relax"],props:{numArgs:0,allowedInText:!0},handler({parser:t}){return{type:"internal",mode:t.mode}}});$({type:"rule",names:["\\rule"],props:{numArgs:2,numOptionalArgs:1,argTypes:["size","size","size"]},handler({parser:t},e,r){const n=r[0],s=V(e[0],"size"),o=V(e[1],"size");return{type:"rule",mode:t.mode,shift:n&&V(n,"size").value,width:s.value,height:o.value}},mathmlBuilder(t,e){const r=Wt(t.width,e),n=Wt(t.height,e),s=t.shift?Wt(t.shift,e):{number:0,unit:"em"},o=e.color&&e.getColor()||"black",l=new y.MathNode("mspace");if(r.number>0&&n.number>0&&l.setAttribute("mathbackground",o),l.setAttribute("width",r.number+r.unit),l.setAttribute("height",n.number+n.unit),s.number===0)return l;const c=new y.MathNode("mpadded",[l]);return s.number>=0?c.setAttribute("height","+"+s.number+s.unit):(c.setAttribute("height",s.number+s.unit),c.setAttribute("depth","+"+-s.number+s.unit)),c.setAttribute("voffset",s.number+s.unit),c}});const kn={"\\tiny":.5,"\\sixptsize":.6,"\\Tiny":.6,"\\scriptsize":.7,"\\footnotesize":.8,"\\small":.9,"\\normalsize":1,"\\large":1.2,"\\Large":1.44,"\\LARGE":1.728,"\\huge":2.074,"\\Huge":2.488};$({type:"sizing",names:["\\tiny","\\sixptsize","\\Tiny","\\scriptsize","\\footnotesize","\\small","\\normalsize","\\large","\\Large","\\LARGE","\\huge","\\Huge"],props:{numArgs:0,allowedInText:!0},handler:({breakOnTokenText:t,funcName:e,parser:r},n)=>{r.settings.strict&&r.mode==="math"&&console.log(`Temml strict-mode warning: Command ${e} is invalid in math mode.`);const s=r.parseExpression(!1,t,!0);return{type:"sizing",mode:r.mode,funcName:e,body:s}},mathmlBuilder:(t,e)=>{const r=e.withFontSize(kn[t.funcName]),n=Ct(t.body,r),s=Pr(n),o=(kn[t.funcName]/e.fontSize).toFixed(4);return s.setAttribute("mathsize",o+"em"),s}});$({type:"smash",names:["\\smash"],props:{numArgs:1,numOptionalArgs:1,allowedInText:!0},handler:({parser:t},e,r)=>{let n=!1,s=!1;const o=r[0]&&V(r[0],"ordgroup");if(o){let c="";for(let h=0;h<o.body.length;++h)if(c=o.body[h].text,c==="t")n=!0;else if(c==="b")s=!0;else{n=!1,s=!1;break}}else n=!0,s=!0;const l=e[0];return{type:"smash",mode:t.mode,body:l,smashHeight:n,smashDepth:s}},mathmlBuilder:(t,e)=>{const r=new y.MathNode("mpadded",[ut(t.body,e)]);return t.smashHeight&&r.setAttribute("height","0px"),t.smashDepth&&r.setAttribute("depth","0px"),r}});$({type:"sqrt",names:["\\sqrt"],props:{numArgs:1,numOptionalArgs:1},handler({parser:t},e,r){const n=r[0],s=e[0];return{type:"sqrt",mode:t.mode,body:s,index:n}},mathmlBuilder(t,e){const{body:r,index:n}=t;return n?new y.MathNode("mroot",[ut(r,e),ut(n,e.incrementLevel())]):new y.MathNode("msqrt",[ut(r,e)])}});const Qa={display:0,text:1,script:2,scriptscript:3},Ya={display:["0","true"],text:["0","false"],script:["1","false"],scriptscript:["2","false"]};$({type:"styling",names:["\\displaystyle","\\textstyle","\\scriptstyle","\\scriptscriptstyle"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler({breakOnTokenText:t,funcName:e,parser:r},n){const s=r.parseExpression(!0,t,!0),o=e.slice(1,e.length-5);return{type:"styling",mode:r.mode,scriptLevel:o,body:s}},mathmlBuilder(t,e){const r=e.withLevel(Qa[t.scriptLevel]),n=Ct(t.body,r),s=Pr(n),o=Ya[t.scriptLevel];return s.setAttribute("scriptlevel",o[0]),s.setAttribute("displaystyle",o[1]),s}});const Ka=/^m(over|under|underover)$/;ce({type:"supsub",mathmlBuilder(t,e){let r=!1,n,s,o=!1,l=!1,c=!1;t.base&&t.base.type==="horizBrace"&&(s=!!t.sup,s===t.base.isOver&&(r=!0,n=t.base.isOver)),t.base&&!t.base.stack&&(t.base.type==="op"||t.base.type==="operatorname")&&(t.base.parentIsSupSub=!0,o=!t.base.symbol,l=o&&!t.isFollowedByDelimiter,c=t.base.needsLeadingSpace);const h=t.base&&t.base.stack?[ut(t.base.body[0],e)]:[ut(t.base,e)],m=e.inSubOrSup();if(t.sub&&h.push(ut(t.sub,m)),t.sup){const b=ut(t.sup,m),q=b.type==="mrow"?b.children[0]:b;q&&q.type==="mo"&&q.classes.includes("tml-prime")&&t.base&&t.base.text&&t.base.text==="f"&&q.classes.push("prime-pad"),h.push(b)}let x;if(r)x=n?"mover":"munder";else if(t.sub)if(t.sup){const b=t.base;b&&(b.type==="op"&&b.limits||b.type==="multiscript")&&(e.level===bt.DISPLAY||b.alwaysHandleSupSub)||b&&b.type==="operatorname"&&b.alwaysHandleSupSub&&(e.level===bt.DISPLAY||b.limits)?x="munderover":x="msubsup"}else{const b=t.base;b&&b.type==="op"&&b.limits&&(e.level===bt.DISPLAY||b.alwaysHandleSupSub)||b&&b.type==="operatorname"&&b.alwaysHandleSupSub&&(b.limits||e.level===bt.DISPLAY)?x="munder":x="msub"}else{const b=t.base;b&&b.type==="op"&&b.limits&&(e.level===bt.DISPLAY||b.alwaysHandleSupSub)||b&&b.type==="operatorname"&&b.alwaysHandleSupSub&&(b.limits||e.level===bt.DISPLAY)?x="mover":x="msup"}let N=new y.MathNode(x,h);if(o){const b=new y.MathNode("mo",[Pt("â¡","text")]);if(c){const q=new y.MathNode("mspace");q.setAttribute("width","0.1667em"),N=y.newDocumentFragment([q,N,b])}else N=y.newDocumentFragment([N,b]);if(l){const q=new y.MathNode("mspace");q.setAttribute("width","0.1667em"),N.children.push(q)}}else Ka.test(x)&&(N=new y.MathNode("mrow",[N]));return N}});const Ja=["\\shortmid","\\nshortmid","\\shortparallel","\\nshortparallel","\\smallsetminus"],to=["\\Rsh","\\Lsh","\\restriction"],eo=t=>{if(t.length===1){const e=t.codePointAt(0);return 8591<e&&e<8704}return t.indexOf("arrow")>-1||t.indexOf("harpoon")>-1||to.includes(t)};ce({type:"atom",mathmlBuilder(t,e){const r=new y.MathNode("mo",[Pt(t.text,t.mode)]);return t.family==="punct"?r.setAttribute("separator","true"):t.family==="open"||t.family==="close"?t.family==="open"?(r.setAttribute("form","prefix"),r.setAttribute("stretchy","false")):t.family==="close"&&(r.setAttribute("form","postfix"),r.setAttribute("stretchy","false")):t.text==="\\mid"?(r.setAttribute("lspace","0.22em"),r.setAttribute("rspace","0.22em"),r.setAttribute("stretchy","false")):t.family==="rel"&&eo(t.text)?r.setAttribute("stretchy","false"):Ja.includes(t.text)?r.setAttribute("mathsize","70%"):t.text===":"&&(r.attributes.lspace="0.2222em",r.attributes.rspace="0.2222em"),r}});const _n={mathbf:"bold",mathrm:"normal",textit:"italic",mathit:"italic",mathnormal:"italic",mathbb:"double-struck",mathcal:"script",mathfrak:"fraktur",mathscr:"script",mathsf:"sans-serif",mathtt:"monospace"},vs=function(t,e){if(e.fontFamily==="texttt")return"monospace";if(e.fontFamily==="textsc")return"normal";if(e.fontFamily==="textsf")return e.fontShape==="textit"&&e.fontWeight==="textbf"?"sans-serif-bold-italic":e.fontShape==="textit"?"sans-serif-italic":e.fontWeight==="textbf"?"sans-serif-bold":"sans-serif";if(e.fontShape==="textit"&&e.fontWeight==="textbf")return"bold-italic";if(e.fontShape==="textit")return"italic";if(e.fontWeight==="textbf")return"bold";const r=e.font;if(!r||r==="mathnormal")return null;const n=t.mode;switch(r){case"mathit":return"italic";case"mathrm":{const o=t.text.codePointAt(0);return 939<o&&o<975?"italic":"normal"}case"greekItalic":return"italic";case"up@greek":return"normal";case"boldsymbol":case"mathboldsymbol":return"bold-italic";case"mathbf":return"bold";case"mathbb":return"double-struck";case"mathfrak":return"fraktur";case"mathscr":case"mathcal":return"script";case"mathsf":return"sans-serif";case"mathtt":return"monospace"}let s=t.text;return xt[n][s]&&xt[n][s].replace&&(s=xt[n][s].replace),Object.prototype.hasOwnProperty.call(_n,r)?_n[r]:null},An=Object.freeze({B:8426,E:8427,F:8427,H:8387,I:8391,L:8390,M:8422,R:8393,e:8394,g:8355,o:8389}),ro=Object.freeze({C:8426,H:8388,I:8392,R:8394,Z:8398}),no=Object.freeze({C:8383,H:8389,N:8391,P:8393,Q:8393,R:8395,Z:8394}),ks=Object.freeze({"Ïµ":119527,Ï‘:119564,Ï°:119534,Ï†:119577,Ï±:119535,Ï–:119563}),so=Object.freeze({"Ïµ":119643,Ï‘:119680,Ï°:119650,Ï†:119693,Ï±:119651,Ï–:119679}),Sn=Object.freeze({"Ïµ":119701,Ï‘:119738,Ï°:119708,Ï†:119751,Ï±:119709,Ï–:119737}),ao=Object.freeze({"Ïµ":119759,Ï‘:119796,Ï°:119766,Ï†:119809,Ï±:119767,Ï–:119795}),oo=Object.freeze({upperCaseLatin:{normal:t=>0,bold:t=>119743,italic:t=>119795,"bold-italic":t=>119847,script:t=>An[t]||119899,"script-bold":t=>119951,fraktur:t=>ro[t]||120003,"fraktur-bold":t=>120107,"double-struck":t=>no[t]||120055,"sans-serif":t=>120159,"sans-serif-bold":t=>120211,"sans-serif-italic":t=>120263,"sans-serif-bold-italic":t=>120380,monospace:t=>120367},lowerCaseLatin:{normal:t=>0,bold:t=>119737,italic:t=>t==="h"?8358:119789,"bold-italic":t=>119841,script:t=>An[t]||119893,"script-bold":t=>119945,fraktur:t=>119997,"fraktur-bold":t=>120101,"double-struck":t=>120049,"sans-serif":t=>120153,"sans-serif-bold":t=>120205,"sans-serif-italic":t=>120257,"sans-serif-bold-italic":t=>120309,monospace:t=>120361},upperCaseGreek:{normal:t=>0,bold:t=>119575,italic:t=>119633,"bold-italic":t=>119575,script:t=>0,"script-bold":t=>0,fraktur:t=>0,"fraktur-bold":t=>0,"double-struck":t=>0,"sans-serif":t=>119749,"sans-serif-bold":t=>119749,"sans-serif-italic":t=>0,"sans-serif-bold-italic":t=>119807,monospace:t=>0},lowerCaseGreek:{normal:t=>0,bold:t=>119569,italic:t=>119627,"bold-italic":t=>t==="Ï•"?119678:119685,script:t=>0,"script-bold":t=>0,fraktur:t=>0,"fraktur-bold":t=>0,"double-struck":t=>0,"sans-serif":t=>119743,"sans-serif-bold":t=>119743,"sans-serif-italic":t=>0,"sans-serif-bold-italic":t=>119801,monospace:t=>0},varGreek:{normal:t=>0,bold:t=>ks[t]||-51,italic:t=>0,"bold-italic":t=>so[t]||58,script:t=>0,"script-bold":t=>0,fraktur:t=>0,"fraktur-bold":t=>0,"double-struck":t=>0,"sans-serif":t=>Sn[t]||116,"sans-serif-bold":t=>Sn[t]||116,"sans-serif-italic":t=>0,"sans-serif-bold-italic":t=>ao[t]||174,monospace:t=>0},numeral:{normal:t=>0,bold:t=>120734,italic:t=>0,"bold-italic":t=>0,script:t=>0,"script-bold":t=>0,fraktur:t=>0,"fraktur-bold":t=>0,"double-struck":t=>120744,"sans-serif":t=>120754,"sans-serif-bold":t=>120764,"sans-serif-italic":t=>0,"sans-serif-bold-italic":t=>0,monospace:t=>120774}}),xe=(t,e)=>{const r=t.codePointAt(0),n=64<r&&r<91?"upperCaseLatin":96<r&&r<123?"lowerCaseLatin":912<r&&r<938?"upperCaseGreek":944<r&&r<970||t==="Ï•"?"lowerCaseGreek":120545<r&&r<120572||ks[t]?"varGreek":47<r&&r<58?"numeral":"other";return n==="other"?t:String.fromCodePoint(r+oo[n][e](t))},io=Object.freeze({a:"á´€",b:"Ê™",c:"á´„",d:"á´…",e:"á´‡",f:"êœ°",g:"É¢",h:"Êœ",i:"Éª",j:"á´Š",k:"á´‹",l:"ÊŸ",m:"á´",n:"É´",o:"á´",p:"á´˜",q:"Ç«",r:"Ê€",s:"s",t:"á´›",u:"á´œ",v:"á´ ",w:"á´¡",x:"x",y:"Ê",z:"á´¢"}),lo=/^\d(?:[\d,.]*\d)?$/,co=/[A-Ba-z]/,uo=new Set(["\\prime","\\dprime","\\trprime","\\qprime","\\backprime","\\backdprime","\\backtrprime"]),ho=(t,e,r)=>{const n=new y.MathNode(r,[t]),s=new y.MathNode("mstyle",[n]);return s.style["font-style"]="italic",s.style["font-family"]="Cambria, 'Times New Roman', serif",e==="bold-italic"&&(s.style["font-weight"]="bold"),s};ce({type:"mathord",mathmlBuilder(t,e){const r=Pt(t.text,t.mode,e),n=r.text.codePointAt(0),s=912<n&&n<938?"normal":"italic",o=vs(t,e)||s;if(o==="script")return r.text=xe(r.text,o),new y.MathNode("mi",[r],[e.font]);o!=="italic"&&(r.text=xe(r.text,o));let l=new y.MathNode("mi",[r]);return o==="normal"&&(l.setAttribute("mathvariant","normal"),r.text.length===1&&(l=new y.MathNode("mrow",[l]))),l}});ce({type:"textord",mathmlBuilder(t,e){let r=t.text;const n=r.codePointAt(0);e.fontFamily==="textsc"&&96<n&&n<123&&(r=io[r]);const s=Pt(r,t.mode,e),o=vs(t,e)||"normal";let l;if(lo.test(t.text)){const c=t.mode==="text"?"mtext":"mn";if(o==="italic"||o==="bold-italic")return ho(s,o,c);o!=="normal"&&(s.text=s.text.split("").map(h=>xe(h,o)).join("")),l=new y.MathNode(c,[s])}else if(t.mode==="text")o!=="normal"&&(s.text=xe(s.text,o)),l=new y.MathNode("mtext",[s]);else if(uo.has(t.text))l=new y.MathNode("mo",[s]),l.classes.push("tml-prime");else{const c=s.text;o!=="italic"&&(s.text=xe(s.text,o)),l=new y.MathNode("mi",[s]),s.text===c&&co.test(c)&&l.setAttribute("mathvariant","italic")}return l}});const po={"\\nobreak":"nobreak","\\allowbreak":"allowbreak"},mo={" ":{},"\\ ":{},"~":{className:"nobreak"},"\\space":{},"\\nobreakspace":{className:"nobreak"}};ce({type:"spacing",mathmlBuilder(t,e){let r;if(Object.prototype.hasOwnProperty.call(mo,t.text))r=new y.MathNode("mtext",[new y.TextNode("Â ")]);else if(Object.prototype.hasOwnProperty.call(po,t.text))r=new y.MathNode("mo"),t.text==="\\nobreak"&&r.setAttribute("linebreak","nobreak");else throw new M(`Unknown type of space "${t.text}"`);return r}});ce({type:"tag"});const Nn={"\\text":void 0,"\\textrm":"textrm","\\textsf":"textsf","\\texttt":"texttt","\\textnormal":"textrm","\\textsc":"textsc"},qn={"\\textbf":"textbf","\\textmd":"textmd"},fo={"\\textit":"textit","\\textup":"textup"},go=(t,e)=>{const r=t.font;if(r){if(Nn[r])return e.withTextFontFamily(Nn[r]);if(qn[r])return e.withTextFontWeight(qn[r]);if(r==="\\emph")return e.fontShape==="textit"?e.withTextFontShape("textup"):e.withTextFontShape("textit")}else return e;return e.withTextFontShape(fo[r])};$({type:"text",names:["\\text","\\textrm","\\textsf","\\texttt","\\textnormal","\\textsc","\\textbf","\\textmd","\\textit","\\textup","\\emph"],props:{numArgs:1,argTypes:["text"],allowedInArgument:!0,allowedInText:!0},handler({parser:t,funcName:e},r){const n=r[0];return{type:"text",mode:t.mode,body:ft(n),font:e}},mathmlBuilder(t,e){const r=go(t,e),n=te(t.body,r);return $r(n)}});$({type:"verb",names:["\\verb"],props:{numArgs:0,allowedInText:!0},handler(t,e,r){throw new M("\\verb ended by end of line instead of matching delimiter")},mathmlBuilder(t,e){const r=new y.TextNode(bo(t)),n=new y.MathNode("mtext",[r]);return n.setAttribute("mathvariant","monospace"),n}});const bo=t=>t.body.replace(/ /g,t.star?"â£":"Â "),ie=Yn;class Ot{constructor(e,r,n){this.lexer=e,this.start=r,this.end=n}static range(e,r){return r?!e||!e.loc||!r.loc||e.loc.lexer!==r.loc.lexer?null:new Ot(e.loc.lexer,e.loc.start,r.loc.end):e&&e.loc}}class Ht{constructor(e,r){this.text=e,this.loc=r}range(e,r){return new Ht(r,Ot.range(this,e))}}const _s=`[ \r
	]`,xo="\\\\[a-zA-Z@]+",yo="\\\\[^\uD800-\uDFFF]",wo=`(${xo})${_s}*`,vo=`\\\\(
|[ \r	]+
?)[ \r	]*`,Ar="[Ì€-Í¯]",Tn=new RegExp(`${Ar}+$`),ko=`(${_s}+)|${vo}|([!-\\[\\]-â€§â€ª-íŸ¿ï¤€-ï¿¿]${Ar}*|[\uD800-\uDBFF][\uDC00-\uDFFF]${Ar}*|\\\\verb\\*([^]).*?\\4|\\\\verb([^*a-zA-Z]).*?\\5|${wo}|${yo})`;class Mn{constructor(e,r){this.input=e,this.settings=r,this.tokenRegex=new RegExp(ko,"g"),this.catcodes={"%":14,"~":13}}setCatcode(e,r){this.catcodes[e]=r}lex(){const e=this.input,r=this.tokenRegex.lastIndex;if(r===e.length)return new Ht("EOF",new Ot(this,r,r));const n=this.tokenRegex.exec(e);if(n===null||n.index!==r)throw new M(`Unexpected character: '${e[r]}'`,new Ht(e[r],new Ot(this,r,r+1)));const s=n[6]||n[3]||(n[2]?"\\ ":" ");if(this.catcodes[s]===14){const o=e.indexOf(`
`,this.tokenRegex.lastIndex);if(o===-1){if(this.tokenRegex.lastIndex=e.length,this.settings.strict)throw new M("% comment has no terminating newline; LaTeX would fail because of commenting the end of math mode")}else this.tokenRegex.lastIndex=o+1;return this.lex()}return new Ht(s,new Ot(this,r,this.tokenRegex.lastIndex))}}class _o{constructor(e={},r={}){this.current=r,this.builtins=e,this.undefStack=[]}beginGroup(){this.undefStack.push({})}endGroup(){if(this.undefStack.length===0)throw new M("Unbalanced namespace destruction: attempt to pop global namespace; please report this as a bug");const e=this.undefStack.pop();for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(e[r]===void 0?delete this.current[r]:this.current[r]=e[r])}has(e){return Object.prototype.hasOwnProperty.call(this.current,e)||Object.prototype.hasOwnProperty.call(this.builtins,e)}get(e){return Object.prototype.hasOwnProperty.call(this.current,e)?this.current[e]:this.builtins[e]}set(e,r,n=!1){if(n){for(let s=0;s<this.undefStack.length;s++)delete this.undefStack[s][e];this.undefStack.length>0&&(this.undefStack[this.undefStack.length-1][e]=r)}else{const s=this.undefStack[this.undefStack.length-1];s&&!Object.prototype.hasOwnProperty.call(s,e)&&(s[e]=this.current[e])}this.current[e]=r}}const As={"^":!0,_:!0,"\\limits":!0,"\\nolimits":!0};class Ao{constructor(e,r,n){this.settings=r,this.expansionCount=0,this.feed(e),this.macros=new _o($a,r.macros),this.mode=n,this.stack=[]}feed(e){this.lexer=new Mn(e,this.settings)}switchMode(e){this.mode=e}beginGroup(){this.macros.beginGroup()}endGroup(){this.macros.endGroup()}future(){return this.stack.length===0&&this.pushToken(this.lexer.lex()),this.stack[this.stack.length-1]}popToken(){return this.future(),this.stack.pop()}pushToken(e){this.stack.push(e)}pushTokens(e){this.stack.push(...e)}scanArgument(e){let r,n,s;if(e){if(this.consumeSpaces(),this.future().text!=="[")return null;r=this.popToken(),{tokens:s,end:n}=this.consumeArg(["]"])}else({tokens:s,start:r,end:n}=this.consumeArg());return this.pushToken(new Ht("EOF",n.loc)),this.pushTokens(s),r.range(n,"")}consumeSpaces(){for(;this.future().text===" ";)this.stack.pop()}consumeArg(e){const r=[],n=e&&e.length>0;n||this.consumeSpaces();const s=this.future();let o,l=0,c=0;do{if(o=this.popToken(),r.push(o),o.text==="{")++l;else if(o.text==="}"){if(--l,l===-1)throw new M("Extra }",o)}else if(o.text==="EOF")throw new M("Unexpected end of input in a macro argument, expected '"+(e&&n?e[c]:"}")+"'",o);if(e&&n)if((l===0||l===1&&e[c]==="{")&&o.text===e[c]){if(++c,c===e.length){r.splice(-c,c);break}}else c=0}while(l!==0||n);return s.text==="{"&&r[r.length-1].text==="}"&&(r.pop(),r.shift()),r.reverse(),{tokens:r,start:s,end:o}}consumeArgs(e,r){if(r){if(r.length!==e+1)throw new M("The length of delimiters doesn't match the number of args!");const s=r[0];for(let o=0;o<s.length;o++){const l=this.popToken();if(s[o]!==l.text)throw new M("Use of the macro doesn't match its definition",l)}}const n=[];for(let s=0;s<e;s++)n.push(this.consumeArg(r&&r[s+1]).tokens);return n}expandOnce(e){const r=this.popToken(),n=r.text,s=r.noexpand?null:this._getExpansion(n);if(s==null||e&&s.unexpandable){if(e&&s==null&&n[0]==="\\"&&!this.isDefined(n))throw new M("Undefined control sequence: "+n);return this.pushToken(r),!1}if(this.expansionCount++,this.expansionCount>this.settings.maxExpand)throw new M("Too many expansions: infinite loop or need to increase maxExpand setting");let o=s.tokens;const l=this.consumeArgs(s.numArgs,s.delimiters);if(s.numArgs){o=o.slice();for(let c=o.length-1;c>=0;--c){let h=o[c];if(h.text==="#"){if(c===0)throw new M("Incomplete placeholder at end of macro body",h);if(h=o[--c],h.text==="#")o.splice(c+1,1);else if(/^[1-9]$/.test(h.text))o.splice(c,2,...l[+h.text-1]);else throw new M("Not a valid argument number",h)}}}return this.pushTokens(o),o.length}expandAfterFuture(){return this.expandOnce(),this.future()}expandNextToken(){for(;;)if(this.expandOnce()===!1){const e=this.stack.pop();return e.treatAsRelax&&(e.text="\\relax"),e}throw new Error}expandMacro(e){return this.macros.has(e)?this.expandTokens([new Ht(e)]):void 0}expandTokens(e){const r=[],n=this.stack.length;for(this.pushTokens(e);this.stack.length>n;)if(this.expandOnce(!0)===!1){const s=this.stack.pop();s.treatAsRelax&&(s.noexpand=!1,s.treatAsRelax=!1),r.push(s)}return r}expandMacroAsText(e){const r=this.expandMacro(e);return r&&r.map(n=>n.text).join("")}_getExpansion(e){const r=this.macros.get(e);if(r==null)return r;if(e.length===1){const s=this.lexer.catcodes[e];if(s!=null&&s!==13)return}const n=typeof r=="function"?r(this):r;if(typeof n=="string"){let s=0;if(n.indexOf("#")!==-1){const h=n.replace(/##/g,"");for(;h.indexOf("#"+(s+1))!==-1;)++s}const o=new Mn(n,this.settings),l=[];let c=o.lex();for(;c.text!=="EOF";)l.push(c),c=o.lex();return l.reverse(),{tokens:l,numArgs:s}}return n}isDefined(e){return this.macros.has(e)||Object.prototype.hasOwnProperty.call(ie,e)||Object.prototype.hasOwnProperty.call(xt.math,e)||Object.prototype.hasOwnProperty.call(xt.text,e)||Object.prototype.hasOwnProperty.call(As,e)}isExpandable(e){const r=this.macros.get(e);return r!=null?typeof r=="string"||typeof r=="function"||!r.unexpandable:Object.prototype.hasOwnProperty.call(ie,e)&&!ie[e].primitive}}const Cn=/^[â‚Šâ‚‹â‚Œâ‚â‚â‚€â‚â‚‚â‚ƒâ‚„â‚…â‚†â‚‡â‚ˆâ‚‰â‚â‚‘â‚•áµ¢â±¼â‚–â‚—â‚˜â‚™â‚’â‚šáµ£â‚›â‚œáµ¤áµ¥â‚“áµ¦áµ§áµ¨áµ©áµª]/,Pe=Object.freeze({"â‚Š":"+","â‚‹":"-","â‚Œ":"=","â‚":"(","â‚":")","â‚€":"0","â‚":"1","â‚‚":"2","â‚ƒ":"3","â‚„":"4","â‚…":"5","â‚†":"6","â‚‡":"7","â‚ˆ":"8","â‚‰":"9","â‚":"a","â‚‘":"e","â‚•":"h","áµ¢":"i","â±¼":"j","â‚–":"k","â‚—":"l","â‚˜":"m","â‚™":"n","â‚’":"o","â‚š":"p","áµ£":"r","â‚›":"s","â‚œ":"t","áµ¤":"u","áµ¥":"v","â‚“":"x","áµ¦":"Î²","áµ§":"Î³","áµ¨":"Ï","áµ©":"Ï•","áµª":"Ï‡","âº":"+","â»":"-","â¼":"=","â½":"(","â¾":")","â°":"0","Â¹":"1","Â²":"2","Â³":"3","â´":"4","âµ":"5","â¶":"6","â·":"7","â¸":"8","â¹":"9","á´¬":"A","á´®":"B","á´°":"D","á´±":"E","á´³":"G","á´´":"H","á´µ":"I","á´¶":"J","á´·":"K","á´¸":"L","á´¹":"M","á´º":"N","á´¼":"O","á´¾":"P","á´¿":"R","áµ€":"T","áµ":"U","â±½":"V","áµ‚":"W","áµƒ":"a","áµ‡":"b","á¶œ":"c","áµˆ":"d","áµ‰":"e","á¶ ":"f","áµ":"g",Ê°:"h","â±":"i",Ê²:"j","áµ":"k",Ë¡:"l","áµ":"m",â¿:"n","áµ’":"o","áµ–":"p",Ê³:"r",Ë¢:"s","áµ—":"t","áµ˜":"u","áµ›":"v",Ê·:"w",Ë£:"x",Ê¸:"y","á¶»":"z","áµ":"Î²","áµ":"Î³","áµŸ":"Î´","áµ ":"Ï•","áµ¡":"Ï‡","á¶¿":"Î¸"}),In=Object.freeze({"ğ’œ":"A",â„¬:"B","ğ’":"C","ğ’Ÿ":"D",â„°:"E",â„±:"F","ğ’¢":"G",â„‹:"H",â„:"I","ğ’¥":"J","ğ’¦":"K",â„’:"L",â„³:"M","ğ’©":"N","ğ’ª":"O","ğ’«":"P","ğ’¬":"Q",â„›:"R","ğ’®":"S","ğ’¯":"T","ğ’°":"U","ğ’±":"V","ğ’²":"W","ğ’³":"X","ğ’´":"Y","ğ’µ":"Z"});var ar={"Ì":{text:"\\'",math:"\\acute"},"Ì€":{text:"\\`",math:"\\grave"},"Ìˆ":{text:'\\"',math:"\\ddot"},"Ìƒ":{text:"\\~",math:"\\tilde"},"Ì„":{text:"\\=",math:"\\bar"},"Ì†":{text:"\\u",math:"\\breve"},"ÌŒ":{text:"\\v",math:"\\check"},"Ì‚":{text:"\\^",math:"\\hat"},"Ì‡":{text:"\\.",math:"\\dot"},"ÌŠ":{text:"\\r",math:"\\mathring"},"Ì‹":{text:"\\H"},"Ì§":{text:"\\c"}},On={Ã¡:"aÌ",Ã :"aÌ€",Ã¤:"aÌˆ",ÇŸ:"aÌˆÌ„",Ã£:"aÌƒ",Ä:"aÌ„",Äƒ:"aÌ†",áº¯:"aÌ†Ì",áº±:"aÌ†Ì€",áºµ:"aÌ†Ìƒ",Ç:"aÌŒ",Ã¢:"aÌ‚",áº¥:"aÌ‚Ì",áº§:"aÌ‚Ì€",áº«:"aÌ‚Ìƒ",È§:"aÌ‡",Ç¡:"aÌ‡Ì„",Ã¥:"aÌŠ",Ç»:"aÌŠÌ",á¸ƒ:"bÌ‡",Ä‡:"cÌ",Ä:"cÌŒ",Ä‰:"cÌ‚",Ä‹:"cÌ‡",Ä:"dÌŒ",á¸‹:"dÌ‡",Ã©:"eÌ",Ã¨:"eÌ€",Ã«:"eÌˆ",áº½:"eÌƒ",Ä“:"eÌ„",á¸—:"eÌ„Ì",á¸•:"eÌ„Ì€",Ä•:"eÌ†",Ä›:"eÌŒ",Ãª:"eÌ‚",áº¿:"eÌ‚Ì",á»:"eÌ‚Ì€",á»…:"eÌ‚Ìƒ",Ä—:"eÌ‡",á¸Ÿ:"fÌ‡",Çµ:"gÌ",á¸¡:"gÌ„",ÄŸ:"gÌ†",Ç§:"gÌŒ",Ä:"gÌ‚",Ä¡:"gÌ‡",á¸§:"hÌˆ",ÈŸ:"hÌŒ",Ä¥:"hÌ‚",á¸£:"hÌ‡",Ã­:"iÌ",Ã¬:"iÌ€",Ã¯:"iÌˆ",á¸¯:"iÌˆÌ",Ä©:"iÌƒ",Ä«:"iÌ„",Ä­:"iÌ†",Ç:"iÌŒ",Ã®:"iÌ‚",Ç°:"jÌŒ",Äµ:"jÌ‚",á¸±:"kÌ",Ç©:"kÌŒ",Äº:"lÌ",Ä¾:"lÌŒ",á¸¿:"mÌ",á¹:"mÌ‡",Å„:"nÌ",Ç¹:"nÌ€",Ã±:"nÌƒ",Åˆ:"nÌŒ",á¹…:"nÌ‡",Ã³:"oÌ",Ã²:"oÌ€",Ã¶:"oÌˆ",È«:"oÌˆÌ„",Ãµ:"oÌƒ",á¹:"oÌƒÌ",á¹:"oÌƒÌˆ",È­:"oÌƒÌ„",Å:"oÌ„",á¹“:"oÌ„Ì",á¹‘:"oÌ„Ì€",Å:"oÌ†",Ç’:"oÌŒ",Ã´:"oÌ‚",á»‘:"oÌ‚Ì",á»“:"oÌ‚Ì€",á»—:"oÌ‚Ìƒ",È¯:"oÌ‡",È±:"oÌ‡Ì„",Å‘:"oÌ‹",á¹•:"pÌ",á¹—:"pÌ‡",Å•:"rÌ",Å™:"rÌŒ",á¹™:"rÌ‡",Å›:"sÌ",á¹¥:"sÌÌ‡",Å¡:"sÌŒ",á¹§:"sÌŒÌ‡",Å:"sÌ‚",á¹¡:"sÌ‡",áº—:"tÌˆ",Å¥:"tÌŒ",á¹«:"tÌ‡",Ãº:"uÌ",Ã¹:"uÌ€",Ã¼:"uÌˆ",Ç˜:"uÌˆÌ",Çœ:"uÌˆÌ€",Ç–:"uÌˆÌ„",Çš:"uÌˆÌŒ",Å©:"uÌƒ",á¹¹:"uÌƒÌ",Å«:"uÌ„",á¹»:"uÌ„Ìˆ",Å­:"uÌ†",Ç”:"uÌŒ",Ã»:"uÌ‚",Å¯:"uÌŠ",Å±:"uÌ‹",á¹½:"vÌƒ",áºƒ:"wÌ",áº:"wÌ€",áº…:"wÌˆ",Åµ:"wÌ‚",áº‡:"wÌ‡",áº˜:"wÌŠ",áº:"xÌˆ",áº‹:"xÌ‡",Ã½:"yÌ",á»³:"yÌ€",Ã¿:"yÌˆ",á»¹:"yÌƒ",È³:"yÌ„",Å·:"yÌ‚",áº:"yÌ‡",áº™:"yÌŠ",Åº:"zÌ",Å¾:"zÌŒ",áº‘:"zÌ‚",Å¼:"zÌ‡",Ã:"AÌ",Ã€:"AÌ€",Ã„:"AÌˆ",Ç:"AÌˆÌ„",Ãƒ:"AÌƒ",Ä€:"AÌ„",Ä‚:"AÌ†",áº®:"AÌ†Ì",áº°:"AÌ†Ì€",áº´:"AÌ†Ìƒ",Ç:"AÌŒ",Ã‚:"AÌ‚",áº¤:"AÌ‚Ì",áº¦:"AÌ‚Ì€",áºª:"AÌ‚Ìƒ",È¦:"AÌ‡",Ç :"AÌ‡Ì„",Ã…:"AÌŠ",Çº:"AÌŠÌ",á¸‚:"BÌ‡",Ä†:"CÌ",ÄŒ:"CÌŒ",Äˆ:"CÌ‚",ÄŠ:"CÌ‡",Ä:"DÌŒ",á¸Š:"DÌ‡",Ã‰:"EÌ",Ãˆ:"EÌ€",Ã‹:"EÌˆ",áº¼:"EÌƒ",Ä’:"EÌ„",á¸–:"EÌ„Ì",á¸”:"EÌ„Ì€",Ä”:"EÌ†",Äš:"EÌŒ",ÃŠ:"EÌ‚",áº¾:"EÌ‚Ì",á»€:"EÌ‚Ì€",á»„:"EÌ‚Ìƒ",Ä–:"EÌ‡",á¸:"FÌ‡",Ç´:"GÌ",á¸ :"GÌ„",Ä:"GÌ†",Ç¦:"GÌŒ",Äœ:"GÌ‚",Ä :"GÌ‡",á¸¦:"HÌˆ",È:"HÌŒ",Ä¤:"HÌ‚",á¸¢:"HÌ‡",Ã:"IÌ",ÃŒ:"IÌ€",Ã:"IÌˆ",á¸®:"IÌˆÌ",Ä¨:"IÌƒ",Äª:"IÌ„",Ä¬:"IÌ†",Ç:"IÌŒ",Ã:"IÌ‚",Ä°:"IÌ‡",Ä´:"JÌ‚",á¸°:"KÌ",Ç¨:"KÌŒ",Ä¹:"LÌ",Ä½:"LÌŒ",á¸¾:"MÌ",á¹€:"MÌ‡",Åƒ:"NÌ",Ç¸:"NÌ€",Ã‘:"NÌƒ",Å‡:"NÌŒ",á¹„:"NÌ‡",Ã“:"OÌ",Ã’:"OÌ€",Ã–:"OÌˆ",Èª:"OÌˆÌ„",Ã•:"OÌƒ",á¹Œ:"OÌƒÌ",á¹:"OÌƒÌˆ",È¬:"OÌƒÌ„",ÅŒ:"OÌ„",á¹’:"OÌ„Ì",á¹:"OÌ„Ì€",Å:"OÌ†",Ç‘:"OÌŒ",Ã”:"OÌ‚",á»:"OÌ‚Ì",á»’:"OÌ‚Ì€",á»–:"OÌ‚Ìƒ",È®:"OÌ‡",È°:"OÌ‡Ì„",Å:"OÌ‹",á¹”:"PÌ",á¹–:"PÌ‡",Å”:"RÌ",Å˜:"RÌŒ",á¹˜:"RÌ‡",Åš:"SÌ",á¹¤:"SÌÌ‡",Å :"SÌŒ",á¹¦:"SÌŒÌ‡",Åœ:"SÌ‚",á¹ :"SÌ‡",Å¤:"TÌŒ",á¹ª:"TÌ‡",Ãš:"UÌ",Ã™:"UÌ€",Ãœ:"UÌˆ",Ç—:"UÌˆÌ",Ç›:"UÌˆÌ€",Ç•:"UÌˆÌ„",Ç™:"UÌˆÌŒ",Å¨:"UÌƒ",á¹¸:"UÌƒÌ",Åª:"UÌ„",á¹º:"UÌ„Ìˆ",Å¬:"UÌ†",Ç“:"UÌŒ",Ã›:"UÌ‚",Å®:"UÌŠ",Å°:"UÌ‹",á¹¼:"VÌƒ",áº‚:"WÌ",áº€:"WÌ€",áº„:"WÌˆ",Å´:"WÌ‚",áº†:"WÌ‡",áºŒ:"XÌˆ",áºŠ:"XÌ‡",Ã:"YÌ",á»²:"YÌ€",Å¸:"YÌˆ",á»¸:"YÌƒ",È²:"YÌ„",Å¶:"YÌ‚",áº:"YÌ‡",Å¹:"ZÌ",Å½:"ZÌŒ",áº:"ZÌ‚",Å»:"ZÌ‡",Î¬:"Î±Ì",á½°:"Î±Ì€",á¾±:"Î±Ì„",á¾°:"Î±Ì†",Î­:"ÎµÌ",á½²:"ÎµÌ€",Î®:"Î·Ì",á½´:"Î·Ì€",Î¯:"Î¹Ì",á½¶:"Î¹Ì€",ÏŠ:"Î¹Ìˆ",Î:"Î¹ÌˆÌ",á¿’:"Î¹ÌˆÌ€",á¿‘:"Î¹Ì„",á¿:"Î¹Ì†",ÏŒ:"Î¿Ì",á½¸:"Î¿Ì€",Ï:"Ï…Ì",á½º:"Ï…Ì€",Ï‹:"Ï…Ìˆ",Î°:"Ï…ÌˆÌ",á¿¢:"Ï…ÌˆÌ€",á¿¡:"Ï…Ì„",á¿ :"Ï…Ì†",Ï:"Ï‰Ì",á½¼:"Ï‰Ì€",Î:"Î¥Ì",á¿ª:"Î¥Ì€",Î«:"Î¥Ìˆ",á¿©:"Î¥Ì„",á¿¨:"Î¥Ì†",Î:"Î©Ì",á¿º:"Î©Ì€"};const So=["bin","op","open","punct","rel"],No=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/;class We{constructor(e,r,n=!1){this.mode="math",this.gullet=new Ao(e,r,this.mode),this.settings=r,this.isPreamble=n,this.leftrightDepth=0,this.prevAtomType=""}expect(e,r=!0){if(this.fetch().text!==e)throw new M(`Expected '${e}', got '${this.fetch().text}'`,this.fetch());r&&this.consume()}consume(){this.nextToken=null}fetch(){return this.nextToken==null&&(this.nextToken=this.gullet.expandNextToken()),this.nextToken}switchMode(e){this.mode=e,this.gullet.switchMode(e)}parse(){this.gullet.beginGroup(),this.settings.colorIsTextColor&&this.gullet.macros.set("\\color","\\textcolor");const e=this.parseExpression(!1);if(this.expect("EOF"),this.isPreamble){const n=Object.create(null);return Object.entries(this.gullet.macros.current).forEach(([s,o])=>{n[s]=o}),this.gullet.endGroup(),n}const r=this.gullet.macros.get("\\df@tag");return this.gullet.endGroup(),r&&(this.gullet.macros.current["\\df@tag"]=r),e}static get endOfExpression(){return["}","\\endgroup","\\end","\\right","\\endtoggle","&"]}subparse(e){const r=this.nextToken;this.consume(),this.gullet.pushToken(new Ht("}")),this.gullet.pushTokens(e);const n=this.parseExpression(!1);return this.expect("}"),this.nextToken=r,n}parseExpression(e,r,n){const s=[];for(;;){this.mode==="math"&&this.consumeSpaces();const o=this.fetch();if(We.endOfExpression.indexOf(o.text)!==-1||r&&o.text===r||n&&o.text==="\\middle"||e&&ie[o.text]&&ie[o.text].infix)break;const l=this.parseAtom(r);if(l){if(l.type==="internal")continue}else break;s.push(l),this.prevAtomType=l.type==="atom"?l.family:l.type}return this.mode==="text"&&this.formLigatures(s),this.handleInfixNodes(s)}handleInfixNodes(e){let r=-1,n;for(let s=0;s<e.length;s++)if(e[s].type==="infix"){if(r!==-1)throw new M("only one infix operator per group",e[s].token);r=s,n=e[s].replaceWith}if(r!==-1&&n){let s,o;const l=e.slice(0,r),c=e.slice(r+1);l.length===1&&l[0].type==="ordgroup"?s=l[0]:s={type:"ordgroup",mode:this.mode,body:l},c.length===1&&c[0].type==="ordgroup"?o=c[0]:o={type:"ordgroup",mode:this.mode,body:c};let h;return n==="\\\\abovefrac"?h=this.callFunction(n,[s,e[r],o],[]):h=this.callFunction(n,[s,o],[]),[h]}else return e}handleSupSubscript(e){const r=this.fetch(),n=r.text;this.consume(),this.consumeSpaces();const s=this.parseGroup(e);if(!s)throw new M("Expected group after '"+n+"'",r);return s}formatUnsupportedCmd(e){const r=[];for(let s=0;s<e.length;s++)r.push({type:"textord",mode:"text",text:e[s]});const n={type:"text",mode:this.mode,body:r};return{type:"color",mode:this.mode,color:this.settings.errorColor,body:[n]}}parseAtom(e){const r=this.parseGroup("atom",e);if(this.mode==="text")return r;let n,s;for(;;){this.consumeSpaces();const o=this.fetch();if(o.text==="\\limits"||o.text==="\\nolimits"){if(r&&r.type==="op"){const l=o.text==="\\limits";r.limits=l,r.alwaysHandleSupSub=!0}else if(r&&r.type==="operatorname")r.alwaysHandleSupSub&&(r.limits=o.text==="\\limits");else throw new M("Limit controls must follow a math operator",o);this.consume()}else if(o.text==="^"){if(n)throw new M("Double superscript",o);n=this.handleSupSubscript("superscript")}else if(o.text==="_"){if(s)throw new M("Double subscript",o);s=this.handleSupSubscript("subscript")}else if(o.text==="'"){if(n)throw new M("Double superscript",o);const l={type:"textord",mode:this.mode,text:"\\prime"},c=[l];for(this.consume();this.fetch().text==="'";)c.push(l),this.consume();this.fetch().text==="^"&&c.push(this.handleSupSubscript("superscript")),n={type:"ordgroup",mode:this.mode,body:c}}else if(Pe[o.text]){const l=Cn.test(o.text),c=[];for(c.push(new Ht(Pe[o.text])),this.consume();;){const m=this.fetch().text;if(!Pe[m]||Cn.test(m)!==l)break;c.unshift(new Ht(Pe[m])),this.consume()}const h=this.subparse(c);l?s={type:"ordgroup",mode:"math",body:h}:n={type:"ordgroup",mode:"math",body:h}}else break}if(n||s){if(r&&r.type==="multiscript"&&!r.postscripts)return r.postscripts={sup:n,sub:s},r;{const o=!r||r.type!=="op"&&r.type!=="operatorname"?void 0:Ze(this.nextToken.text);return{type:"supsub",mode:this.mode,base:r,sup:n,sub:s,isFollowedByDelimiter:o}}}else return r}parseFunction(e,r){const n=this.fetch(),s=n.text,o=ie[s];if(!o)return null;if(this.consume(),r&&r!=="atom"&&!o.allowedInArgument)throw new M("Got function '"+s+"' with no arguments"+(r?" as "+r:""),n);if(this.mode==="text"&&!o.allowedInText)throw new M("Can't use function '"+s+"' in text mode",n);if(this.mode==="math"&&o.allowedInMath===!1)throw new M("Can't use function '"+s+"' in math mode",n);const l=this.prevAtomType,{args:c,optArgs:h}=this.parseArguments(s,o);return this.prevAtomType=l,this.callFunction(s,c,h,n,e)}callFunction(e,r,n,s,o){const l={funcName:e,parser:this,token:s,breakOnTokenText:o},c=ie[e];if(c&&c.handler)return c.handler(l,r,n);throw new M(`No function handler for ${e}`)}parseArguments(e,r){const n=r.numArgs+r.numOptionalArgs;if(n===0)return{args:[],optArgs:[]};const s=[],o=[];for(let l=0;l<n;l++){let c=r.argTypes&&r.argTypes[l];const h=l<r.numOptionalArgs;(r.primitive&&c==null||r.type==="sqrt"&&l===1&&o[0]==null)&&(c="primitive");const m=this.parseGroupOfType(`argument to '${e}'`,c,h);if(h)o.push(m);else if(m!=null)s.push(m);else throw new M("Null argument, please report this as a bug")}return{args:s,optArgs:o}}parseGroupOfType(e,r,n){switch(r){case"size":return this.parseSizeGroup(n);case"url":return this.parseUrlGroup(n);case"math":case"text":return this.parseArgumentGroup(n,r);case"hbox":{const s=this.parseArgumentGroup(n,"text");return s!=null?{type:"styling",mode:s.mode,body:[s],scriptLevel:"text"}:null}case"raw":{const s=this.parseStringGroup("raw",n);return s!=null?{type:"raw",mode:"text",string:s.text}:null}case"primitive":{if(n)throw new M("A primitive argument cannot be optional");const s=this.parseGroup(e);if(s==null)throw new M("Expected group as "+e,this.fetch());return s}case"original":case null:case void 0:return this.parseArgumentGroup(n);default:throw new M("Unknown group type as "+e,this.fetch())}}consumeSpaces(){for(;;){const e=this.fetch().text;if(e===" "||e==="Â "||e==="ï¸")this.consume();else break}}parseStringGroup(e,r){const n=this.gullet.scanArgument(r);if(n==null)return null;let s="",o;for(;(o=this.fetch()).text!=="EOF";)s+=o.text,this.consume();return this.consume(),n.text=s,n}parseRegexGroup(e,r){const n=this.fetch();let s=n,o="",l;for(;(l=this.fetch()).text!=="EOF"&&e.test(o+l.text);)s=l,o+=s.text,this.consume();if(o==="")throw new M("Invalid "+r+": '"+n.text+"'",n);return n.range(s,o)}parseSizeGroup(e){let r,n=!1;if(this.gullet.consumeSpaces(),!e&&this.gullet.future().text!=="{"?r=this.parseRegexGroup(/^[-+]? *(?:$|\d+|\d+\.\d*|\.\d*) *[a-z]{0,2} *$/,"size"):r=this.parseStringGroup("size",e),!r)return null;!e&&r.text.length===0&&(r.text="0pt",n=!0);const s=No.exec(r.text);if(!s)throw new M("Invalid size: '"+r.text+"'",r);const o={number:+(s[1]+s[2]),unit:s[3]};if(!ns(o))throw new M("Invalid unit: '"+o.unit+"'",r);return{type:"size",mode:this.mode,value:o,isBlank:n}}parseUrlGroup(e){this.gullet.lexer.setCatcode("%",13),this.gullet.lexer.setCatcode("~",12);const r=this.parseStringGroup("url",e);if(this.gullet.lexer.setCatcode("%",14),this.gullet.lexer.setCatcode("~",13),r==null)return null;let n=r.text.replace(/\\([#$%&~_^{}])/g,"$1");return n=r.text.replace(/{\u2044}/g,"/"),{type:"url",mode:this.mode,url:n}}parseArgumentGroup(e,r){const n=this.gullet.scanArgument(e);if(n==null)return null;const s=this.mode;r&&this.switchMode(r),this.gullet.beginGroup();const o=this.parseExpression(!1,"EOF");this.expect("EOF"),this.gullet.endGroup();const l={type:"ordgroup",mode:this.mode,loc:n.loc,body:o};return r&&this.switchMode(s),l}parseGroup(e,r){const n=this.fetch(),s=n.text;let o;if(s==="{"||s==="\\begingroup"||s==="\\toggle"){this.consume();const l=s==="{"?"}":s==="\\begingroup"?"\\endgroup":"\\endtoggle";this.gullet.beginGroup();const c=this.parseExpression(!1,l),h=this.fetch();this.expect(l),this.gullet.endGroup(),o={type:h.text==="\\endtoggle"?"toggle":"ordgroup",mode:this.mode,loc:Ot.range(n,h),body:c,semisimple:s==="\\begingroup"||void 0}}else o=this.parseFunction(r,e)||this.parseSymbol(),o==null&&s[0]==="\\"&&!Object.prototype.hasOwnProperty.call(As,s)&&(o=this.formatUnsupportedCmd(s),this.consume());return o}formLigatures(e){let r=e.length-1;for(let n=0;n<r;++n){const s=e[n],o=s.text;o==="-"&&e[n+1].text==="-"&&(n+1<r&&e[n+2].text==="-"?(e.splice(n,3,{type:"textord",mode:"text",loc:Ot.range(s,e[n+2]),text:"---"}),r-=2):(e.splice(n,2,{type:"textord",mode:"text",loc:Ot.range(s,e[n+1]),text:"--"}),r-=1)),(o==="'"||o==="`")&&e[n+1].text===o&&(e.splice(n,2,{type:"textord",mode:"text",loc:Ot.range(s,e[n+1]),text:o+o}),r-=1)}}parseSymbol(){const e=this.fetch();let r=e.text;if(/^\\verb[^a-zA-Z]/.test(r)){this.consume();let o=r.slice(5);const l=o.charAt(0)==="*";if(l&&(o=o.slice(1)),o.length<2||o.charAt(0)!==o.slice(-1))throw new M(`\\verb assertion failed --
                    please report what input caused this bug`);return o=o.slice(1,-1),{type:"verb",mode:"text",body:o,star:l}}if(Object.prototype.hasOwnProperty.call(On,r[0])&&this.mode==="math"&&!xt[this.mode][r[0]]){if(this.settings.strict&&this.mode==="math")throw new M(`Accented Unicode text character "${r[0]}" used in math mode`,e);r=On[r[0]]+r.slice(1)}const n=this.mode==="math"?Tn.exec(r):null;n&&(r=r.substring(0,n.index),r==="i"?r="Ä±":r==="j"&&(r="È·"));let s;if(xt[this.mode][r]){let o=xt[this.mode][r].group;o==="bin"&&So.includes(this.prevAtomType)&&(o="open");const l=Ot.range(e);let c;if(Object.prototype.hasOwnProperty.call(oa,o)){const h=o;c={type:"atom",mode:this.mode,family:h,loc:l,text:r}}else{if(In[r]){this.consume();const h=this.fetch().text.charCodeAt(0),m=h===65025?"mathscr":"mathcal";return(h===65024||h===65025)&&this.consume(),{type:"font",mode:"math",font:m,body:{type:"mathord",mode:"math",loc:l,text:In[r]}}}c={type:o,mode:this.mode,loc:l,text:r}}s=c}else if(r.charCodeAt(0)>=128||Tn.exec(r)){if(this.settings.strict&&this.mode==="math")throw new M(`Unicode text character "${r[0]}" used in math mode`,e);s={type:"textord",mode:"text",loc:Ot.range(e),text:r}}else return null;if(this.consume(),n)for(let o=0;o<n[0].length;o++){const l=n[0][o];if(!ar[l])throw new M(`Unknown accent ' ${l}'`,e);const c=ar[l][this.mode]||ar[l].text;if(!c)throw new M(`Accent ${l} unsupported in ${this.mode} mode`,e);s={type:"accent",mode:this.mode,loc:Ot.range(e),label:c,isStretchy:!1,base:s}}return s}}const Ss=function(t,e){if(!(typeof t=="string"||t instanceof String))throw new TypeError("Temml can only parse string typed expression");const r=new We(t,e);delete r.gullet.macros.current["\\df@tag"];let n=r.parse();if(!(n.length>0&&n[0].type&&n[0].type==="array"&&n[0].addEqnNum)&&r.gullet.macros.get("\\df@tag")){if(!e.displayMode)throw new M("\\tag works only in display mode");r.gullet.feed("\\df@tag"),n=[{type:"tag",mode:"text",body:n,tag:r.parse()}]}return n},qo=[2,2,3,3];class Gr{constructor(e){this.level=e.level,this.color=e.color,this.font=e.font||"",this.fontFamily=e.fontFamily||"",this.fontSize=e.fontSize||1,this.fontWeight=e.fontWeight||"",this.fontShape=e.fontShape||"",this.maxSize=e.maxSize}extend(e){const r={level:this.level,color:this.color,font:this.font,fontFamily:this.fontFamily,fontSize:this.fontSize,fontWeight:this.fontWeight,fontShape:this.fontShape,maxSize:this.maxSize};for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return new Gr(r)}withLevel(e){return this.extend({level:e})}incrementLevel(){return this.extend({level:Math.min(this.level+1,3)})}inSubOrSup(){return this.extend({level:qo[this.level]})}withColor(e){return this.extend({color:e})}withFont(e){return this.extend({font:e})}withTextFontFamily(e){return this.extend({fontFamily:e,font:""})}withFontSize(e){return this.extend({fontSize:e})}withTextFontWeight(e){return this.extend({fontWeight:e,font:""})}withTextFontShape(e){return this.extend({fontShape:e,font:""})}getColor(){return this.color}}const To="0.10.29";function Mo(t){const e={};let r=0;const n=t.getElementsByClassName("tml-tageqn");for(const s of n){const o=s.getElementsByClassName("tml-eqn");o.length>0&&(r+=1,o[0].id="tml-eqn-"+r);const l=s.getElementsByClassName("tml-label");if(l.length!==0)if(o.length>0)e[l[0].id]=String(r);else{const c=s.getElementsByClassName("tml-tag");c.length>0&&(e[l[0].id]=c[0].textContent)}}[...t.getElementsByClassName("tml-ref")].forEach(s=>{let o=e[s.getAttribute("href").slice(1)];s.className.indexOf("tml-eqref")===-1&&(o=o.replace(/^\(/,""),o=o.replace(/\($/,"")),o.charAt(0)!=="("&&(o="("+o),o.slice(-1)!==")"&&(o=o+")"),s.textContent=o})}let Ns=function(t,e,r={}){e.textContent="";const n=e.tagName.toLowerCase()==="math";n&&(r.wrap="none");const s=Fr(t,r);n?(e.textContent="",s.children.forEach(o=>{e.appendChild(o.toNode())})):s.children.length>1?(e.textContent="",s.children.forEach(o=>{e.appendChild(o.toNode())})):e.appendChild(s.toNode())};typeof document<"u"&&document.compatMode!=="CSS1Compat"&&(typeof console<"u"&&console.warn("Warning: Temml doesn't work in quirks mode. Make sure your website has a suitable doctype."),Ns=function(){throw new M("Temml doesn't work in quirks mode.")});const Co=function(t,e){return Fr(t,e).toMarkup()},Io=function(t,e){const r=new Ir(e);return Ss(t,r)},Oo=function(t,e){const r=new Ir(e);if(r.macros={},!(typeof t=="string"||t instanceof String))throw new TypeError("Temml can only parse string typed expression");const n=new We(t,r,!0);return delete n.gullet.macros.current["\\df@tag"],n.parse()},Po=function(t,e,r){if(r.throwOnError||!(t instanceof M))throw t;const n=new Kn(["temml-error"],[new ta(e+`
`+t.toString())]);return n.style.color=r.errorColor,n.style.whiteSpace="pre-line",n},Fr=function(t,e){const r=new Ir(e);try{const n=Ss(t,r),s=new Gr({level:r.displayMode?bt.DISPLAY:bt.TEXT,maxSize:r.maxSize});return fa(n,t,s,r)}catch(n){return Po(n,t,r)}};var $o={version:To,render:Ns,renderToString:Co,postProcess:Mo,ParseError:M,definePreamble:Oo,__parse:Io,__renderToMathMLTree:Fr,__defineSymbol:a,__defineMacro:u},Bo={},He={},Ne={},ne={};Object.defineProperty(ne,"__esModule",{value:!0});ne.Warning=void 0;class Lo{constructor(e,r){this.message=e,typeof r=="number"?this.offset=r:r&&"line"in r&&(this.sourceLoc=r,this.offset=r.offset)}render(){let e=this.message;return this.sourceLoc?e+=` at line ${this.sourceLoc.line}, col ${this.sourceLoc.col}`:this.offset&&(e+=` at offset ${this.offset}`),e}}ne.Warning=Lo;var qe={};Object.defineProperty(qe,"__esModule",{value:!0});qe.AttributeParser=void 0;var L;(function(t){t[t.SCANNING=0]="SCANNING",t[t.SCANNING_ID=1]="SCANNING_ID",t[t.SCANNING_CLASS=2]="SCANNING_CLASS",t[t.SCANNING_KEY=3]="SCANNING_KEY",t[t.SCANNING_VALUE=4]="SCANNING_VALUE",t[t.SCANNING_BARE_VALUE=5]="SCANNING_BARE_VALUE",t[t.SCANNING_QUOTED_VALUE=6]="SCANNING_QUOTED_VALUE",t[t.SCANNING_QUOTED_VALUE_CONTINUATION=7]="SCANNING_QUOTED_VALUE_CONTINUATION",t[t.SCANNING_ESCAPED=8]="SCANNING_ESCAPED",t[t.SCANNING_ESCAPED_IN_CONTINUATION=9]="SCANNING_ESCAPED_IN_CONTINUATION",t[t.SCANNING_COMMENT=10]="SCANNING_COMMENT",t[t.FAIL=11]="FAIL",t[t.DONE=12]="DONE",t[t.START=13]="START"})(L||(L={}));const Eo=/^[a-zA-Z0-9_:-]/,zo=function(t){return Eo.exec(t)!==null},It=[];It[L.START]=function(t,e){return t.subject.charAt(e)==="{"?L.SCANNING:L.FAIL};It[L.FAIL]=function(t,e){return L.FAIL};It[L.DONE]=function(t,e){return L.DONE};It[L.SCANNING]=function(t,e){const r=t.subject.charAt(e);return r===`
`||r==="\r"?L.SCANNING:r===" "||r==="	"?(t.addEvent(e,e,"attr_space"),L.SCANNING):r==="}"?L.DONE:r==="#"?(t.begin=e,t.addEvent(e,e,"attr_id_marker"),L.SCANNING_ID):r==="%"?(t.begin=e,L.SCANNING_COMMENT):r==="."?(t.begin=e,t.addEvent(e,e,"attr_class_marker"),L.SCANNING_CLASS):zo(r)?(t.begin=e,L.SCANNING_KEY):L.FAIL};It[L.SCANNING_COMMENT]=function(t,e){const r=t.subject.charAt(e);return r==="%"?(t.begin&&e>t.begin&&t.addEvent(t.begin,e,"comment"),L.SCANNING):r=="}"?L.DONE:L.SCANNING_COMMENT};It[L.SCANNING_ID]=function(t,e){const r=t.subject.charAt(e);return/^[^\]\[~!@#$%^&*(){}`,.<>\\|=+/?\s]/.exec(r)!==null?L.SCANNING_ID:r==="}"?(t.begin&&t.lastpos&&t.lastpos>t.begin&&t.addEvent(t.begin+1,t.lastpos,"id"),t.begin=null,L.DONE):/^\s/.exec(r)!==null?(t.begin&&t.lastpos&&t.lastpos>t.begin&&t.addEvent(t.begin+1,t.lastpos,"id"),r==="\r"||r===`
`||t.addEvent(e,e,"attr_space"),t.begin=null,L.SCANNING):L.FAIL};It[L.SCANNING_CLASS]=function(t,e){const r=t.subject.charAt(e);return/^\w/.exec(r)!==null||r==="_"||r==="-"||r===":"?L.SCANNING_CLASS:r==="}"?(t.begin&&t.lastpos&&t.lastpos>t.begin&&t.addEvent(t.begin+1,t.lastpos,"class"),t.begin=null,L.DONE):/^\s/.exec(r)!==null?(t.begin&&t.lastpos&&t.lastpos>t.begin&&t.addEvent(t.begin+1,t.lastpos,"class"),r==="\r"||r===`
`||t.addEvent(e,e,"attr_space"),t.begin=null,L.SCANNING):L.FAIL};It[L.SCANNING_KEY]=function(t,e){const r=t.subject.charAt(e);return r==="="&&t.begin&&t.lastpos?(t.addEvent(t.begin,t.lastpos,"key"),t.addEvent(e,e,"attr_equal_marker"),t.begin=null,L.SCANNING_VALUE):/^[a-zA-Z0-9_:-]/.exec(r)!==null?L.SCANNING_KEY:L.FAIL};It[L.SCANNING_VALUE]=function(t,e){const r=t.subject.charAt(e);return r==='"'?(t.begin=e,t.addEvent(e,e,"attr_quote_marker"),L.SCANNING_QUOTED_VALUE):/^[a-zA-Z0-9_:-]/.exec(r)!==null?(t.begin=e,L.SCANNING_BARE_VALUE):L.FAIL};It[L.SCANNING_BARE_VALUE]=function(t,e){const r=t.subject.charAt(e);return/^[a-zA-Z0-9_:-]/.exec(r)!==null?L.SCANNING_BARE_VALUE:r==="}"&&t.begin&&t.lastpos?(t.addEvent(t.begin,t.lastpos,"value"),t.begin=null,L.DONE):/^\s/.exec(r)&&t.begin&&t.lastpos?(t.addEvent(t.begin,t.lastpos,"value"),r==="\r"||r===`
`||t.addEvent(e,e,"attr_space"),t.begin=null,L.SCANNING):L.FAIL};It[L.SCANNING_ESCAPED]=function(t,e){return L.SCANNING_QUOTED_VALUE};It[L.SCANNING_ESCAPED_IN_CONTINUATION]=function(t,e){return L.SCANNING_QUOTED_VALUE_CONTINUATION};It[L.SCANNING_QUOTED_VALUE]=function(t,e){const r=t.subject.charAt(e);return r==='"'&&t.begin&&t.lastpos?(t.addEvent(t.begin+1,t.lastpos,"value"),t.addEvent(e,e,"attr_quote_marker"),t.begin=null,L.SCANNING):r===`
`&&t.begin&&t.lastpos?(t.addEvent(t.begin+1,e,"value"),t.begin=null,L.SCANNING_QUOTED_VALUE_CONTINUATION):r==="\\"?L.SCANNING_ESCAPED:L.SCANNING_QUOTED_VALUE};It[L.SCANNING_QUOTED_VALUE_CONTINUATION]=function(t,e){const r=t.subject.charAt(e);return t.begin===null&&(t.begin=e),r==='"'&&t.begin&&t.lastpos?(t.addEvent(e,e,"attr_quote_marker"),t.addEvent(t.begin,t.lastpos,"value"),t.begin=null,L.SCANNING):r===`
`&&t.begin&&t.lastpos?(t.addEvent(t.begin,e,"value"),t.begin=null,L.SCANNING_QUOTED_VALUE_CONTINUATION):r==="\\"?L.SCANNING_ESCAPED_IN_CONTINUATION:L.SCANNING_QUOTED_VALUE_CONTINUATION};class Do{constructor(e){this.subject=e,this.state=L.START,this.begin=null,this.lastpos=null,this.matches=[]}addEvent(e,r,n){this.matches.push({startpos:e,endpos:r,annot:n})}feed(e,r){let n=e;for(;n<=r;){if(this.state=It[this.state](this,n),this.state===L.DONE)return{status:"done",position:n};if(this.state===L.FAIL)return this.lastpos=n,{status:"fail",position:n};this.lastpos=n,n=n+1}return{status:"continue",position:r}}}qe.AttributeParser=Do;var le={};Object.defineProperty(le,"__esModule",{value:!0});le.find=le.pattern=void 0;const jo=function(t){return new RegExp(t,"yd")};le.pattern=jo;const Ro=function(t,e,r,n){e.lastIndex=r;let s;n!==void 0?s=t.substring(0,n+1):s=t;const o=e.exec(s);if(o!==null){const l=[];if(o.indices.length>1)for(let c=1;c<o.indices.length;c++){const[h,m]=o.indices[c];l.push(s.substring(h,m))}return{startpos:o.indices[0][0],endpos:o.indices[0][1]-1,captures:l}}else return null};le.find=Ro;var Xe={};Object.defineProperty(Xe,"__esModule",{value:!0});Xe.InlineParser=void 0;const Go=qe,Fo=ne,lt=le,Pn=9,Sr=10,Nr=13,or=32,$n=33,Bn=34,Ln=39,ir=40,Uo=41,Vo=42,Zo=43,lr=45,Wo=46,Ho=58,Xo=60,Qo=61,cr=91,ur=92,Yo=93,Ko=94,Jo=95,ti=96,Be=123,Ge=125,ei=126,En=/[\r\n"'()*+.:<=[\\\]^_`${}~-]/g,zn=function(t,e,r){En.lastIndex=e;const n=En.exec(t);return n&&n.index<=r?n.index:null},Dn=(0,lt.pattern)(`[^ 	\r
]`),ri=(0,lt.pattern)("[ \\t]*\\r?\\n"),ni=(0,lt.pattern)("['!\"#$%&\\\\'()\\*+,\\-\\.\\/:;<=>?@\\[\\]\\^_`{|}~']"),si=(0,lt.pattern)("\\<([^<>\\s]+)\\>"),ai=(0,lt.pattern)(`[_*~^+='"-]`),oi=(0,lt.pattern)(":[\\w_+-]+:"),ii=(0,lt.pattern)("\\.\\."),li=(0,lt.pattern)("`*"),ci=(0,lt.pattern)("`+"),ui=(0,lt.pattern)("\\$\\$"),hi=(0,lt.pattern)("\\$"),di=(0,lt.pattern)("\\\\"),pi=(0,lt.pattern)("\\{=[^\\s{}`]+\\}"),mi=(0,lt.pattern)("\\^([^\\]]+)\\]"),hr=function(t,e){return e>0&&t.subject.codePointAt(e-1)===Be||t.subject.codePointAt(e+1)===Ge},ge=function(){return!0},Yt=function(t,e,r,n){return function(s,o,l){const c=s.subject;let h=(0,lt.find)(c,Dn,o+1)!==null&&n(s,o),m=(0,lt.find)(c,Dn,o-1)!==null;const x=s.matches[s.matches.length-1],N=x&&x.annot==="open_marker",b=o+1<=l&&c.codePointAt(o+1)===Ge;let q=o,P=o;N&&(h=!0,m=!1,P=o-1),!N&&b&&(m=!0,h=!1,q=o+1),N&&r.match(/^right/)?r=r.replace(/^right/,"left"):b&&r.match(/^left/)&&(r=r.replace(/^left/,"right"));let G=t;b&&(G="{"+G);const Z=s.openers[G];if(m&&Z&&Z.length>0){const A=Z[Z.length-1];if(A.endpos!==o-1)return s.clearOpeners(A.startpos,o),s.addMatch(A.startpos,A.endpos,"+"+e,A.matchIndex),s.addMatch(o,q,"-"+e),q+1}if(h){let A=t;return N&&(A="{"+A),s.addOpener(A,P,o,r),o+1}else return s.addMatch(o,q,r),q+1}},fi={[ti]:function(t,e,r){const n=t.subject,s=(0,lt.find)(n,li,e,r);if(s===null)return null;const o=s.endpos;return(0,lt.find)(n,ui,e-2)&&!(0,lt.find)(n,di,e-3)?(t.matches.pop(),t.matches.pop(),t.addMatch(e-2,o,"+display_math"),t.verbatimType="display_math"):(0,lt.find)(n,hi,e-1)?(t.matches.pop(),t.addMatch(e-1,o,"+inline_math"),t.verbatimType="inline_math"):(t.addMatch(e,o,"+verbatim"),t.verbatimType="verbatim"),t.verbatim=o-e+1,o+1},[ur]:function(t,e,r){const n=t.subject,s=(0,lt.find)(n,ri,e+1,r);if(s!==null){if(t.matches.length>0){const o=t.matches[t.matches.length-1];if(o.annot==="str"){let l=o.endpos;const c=o.startpos;for(;l>=c&&(n.codePointAt(l)===or||n.codePointAt(l)===Pn);)l=l-1;l<c?t.matches.pop():o.endpos=l}}return t.addMatch(e,e,"escape"),t.addMatch(e+1,s.endpos,"hard_break"),s.endpos+1}else{const o=(0,lt.find)(n,ni,e+1,r);return o!==null?(t.addMatch(e,e,"escape"),t.addMatch(o.startpos,o.endpos,"str"),o.endpos+1):e+1<=r&&n.codePointAt(e+1)===or?(t.addMatch(e,e,"escape"),t.addMatch(e+1,e+1,"non_breaking_space"),e+2):(t.addMatch(e,e,"str"),e+1)}},[Xo]:function(t,e,r){const n=t.subject,s=(0,lt.find)(n,si,e,r);if(s===null)return null;const o=s.endpos,l=s.startpos,c=s.captures[0];return c.match(/[^:]@/)?(t.addMatch(l,l,"+email"),t.addMatch(l+1,o-1,"str"),t.addMatch(o,o,"-email"),o+1):c.match(/[a-zA-Z]:/)?(t.addMatch(l,l,"+url"),t.addMatch(l+1,o-1,"str"),t.addMatch(o,o,"-url"),o+1):null},[ei]:Yt("~","subscript","str",ge),[Ko]:Yt("^","superscript","str",ge),[Jo]:Yt("_","emph","str",ge),[Vo]:Yt("*","strong","str",ge),[Zo]:Yt("+","insert","str",hr),[Qo]:Yt("=","mark","str",hr),[Ln]:Yt("'","single_quoted","right_single_quote",function(t,e){if(e===0)return!0;{const r=t.subject.codePointAt(e-1);return r===or||r===Pn||r===Nr||r===Sr||r===Bn||r===Ln||r===lr||r===ir||r===cr}}),[Bn]:Yt('"',"double_quoted","left_double_quote",ge),[Be]:function(t,e,r){return(0,lt.find)(t.subject,ai,e+1,r)?(t.addMatch(e,e,"open_marker"),e+1):t.allowAttributes?(t.attributeParser=new Go.AttributeParser(t.subject),t.attributeStart=e,t.attributeSlices=[],e):(t.addMatch(e,e,"str"),e+1)},[Ho]:function(t,e,r){const n=(0,lt.find)(t.subject,oi,e,r);return n?(t.addMatch(n.startpos,n.endpos,"symb"),n.endpos+1):(t.addMatch(e,e,"str"),e+1)},[Wo]:function(t,e,r){return(0,lt.find)(t.subject,ii,e+1,r)?(t.addMatch(e,e+2,"ellipses"),e+3):null},[cr]:function(t,e,r){const n=(0,lt.find)(t.subject,mi,e+1,r);return n?(t.addMatch(e,n.endpos,"footnote_reference"),n.endpos+1):(t.addOpener("[",e,e,"str"),e+1)},[Yo]:function(t,e,r){const n=t.openers["["],s=t.subject;if(n&&n.length>0){const o=n[n.length-1];if(o.annot==="reference_link")return t.strMatches((o.subendpos||o.endpos)+1,e-1),s.codePointAt(o.startpos-1)===$n&&s.codePointAt(o.startpos-2)!==ur?(t.addMatch(o.startpos-1,o.startpos-1,"image_marker",o.matchIndex-1),t.addMatch(o.startpos,o.endpos,"+imagetext",o.matchIndex),t.addMatch(o.substartpos||o.startpos,o.substartpos||o.startpos,"-imagetext",o.subMatchIndex)):(t.addMatch(o.startpos,o.endpos,"+linktext",o.matchIndex),t.addMatch(o.substartpos||o.startpos,o.substartpos||o.startpos,"-linktext",o.subMatchIndex)),t.addMatch(o.subendpos||o.endpos,o.subendpos||o.endpos,"+reference",o.subMatchIndex+1),t.addMatch(e,e,"-reference"),t.clearOpeners(o.startpos,e),e+1;if(e+1<=r&&s.codePointAt(e+1)===cr)return o.annot="reference_link",t.addMatch(e,e,"str"),o.subMatchIndex=t.matches.length-1,t.addMatch(e+1,e+1,"str"),o.substartpos=e,o.subendpos=e+1,t.clearOpeners(o.startpos+1,e-1),e+2;if(e+1<=r&&s.codePointAt(e+1)===ir)return t.openers["("]=[],o.annot="explicit_link",t.addMatch(e,e,"str"),o.subMatchIndex=t.matches.length-1,t.addMatch(e+1,e+1,"str"),o.substartpos=e,o.subendpos=e+1,t.destination=!0,t.clearOpeners(o.startpos+1,e-1),e+2;if(e+1<=r&&s.codePointAt(e+1)===Be)return t.addMatch(o.startpos,o.endpos,"+span",o.matchIndex),t.addMatch(e,e,"-span"),t.clearOpeners(o.startpos,e),e+1}return null},[ir]:function(t,e,r){return t.destination?(t.addOpener("(",e,e,"str"),e+1):null},[Uo]:function(t,e,r){if(!t.destination)return null;const n=t.openers["("];if(n&&n.length>0)return n.pop(),t.addMatch(e,e,"str"),e+1;{const s=t.subject,o=t.openers["["],l=o[o.length-1];if(o&&o.length>0&&l.annot==="explicit_link")return t.strMatches((l.subendpos||l.endpos)+1,e-1),s.codePointAt(l.startpos-1)===$n&&s.codePointAt(l.startpos-2)!==ur?(t.addMatch(l.startpos-1,l.startpos-1,"image_marker",l.matchIndex-1),t.addMatch(l.startpos,l.endpos,"+imagetext",l.matchIndex),t.addMatch(l.substartpos||l.startpos,l.substartpos||l.startpos,"-imagetext",l.subMatchIndex)):(t.addMatch(l.startpos,l.endpos,"+linktext",l.matchIndex),t.addMatch(l.substartpos||l.startpos,l.substartpos||l.startpos,"-linktext",l.subMatchIndex)),t.addMatch(l.subendpos||l.endpos,l.subendpos||l.endpos,"+destination",l.subMatchIndex+1),t.addMatch(e,e,"-destination"),t.destination=!1,t.clearOpeners(l.startpos,e),e+1}return null},[lr]:function(t,e,r){const n=t.subject;if(n.codePointAt(e-1)===Be||n.codePointAt(e+1)===Ge){const h=Yt("-","delete","str",hr)(t,e,r);if(h)return h}let s=e,o=0;for(;s<=r&&n.codePointAt(s)===lr;)s++,o++;if(n.codePointAt(s)===Ge&&o--,o===0)return t.addMatch(e,e+1,"str"),e+2;const l=o%3===0,c=o%2===0;for(;o>0;)l?(t.addMatch(e,e+2,"em_dash"),e=e+3,o=o-3):c?(t.addMatch(e,e+1,"en_dash"),e=e+2,o=o-2):o>=3&&(o%2!==0||o>4)?(t.addMatch(e,e+2,"em_dash"),e=e+3,o=o-3):o>=2?(t.addMatch(e,e+1,"en_dash"),e=e+2,o=o-2):(t.addMatch(e,e,"str"),e=e+1,o=o-1);return e}};class gi{constructor(e,r={}){this.options=r,this.warn=r.warn||(()=>{}),this.subject=e,this.matches=[],this.openers={},this.verbatim=0,this.verbatimType="",this.destination=!1,this.firstpos=-1,this.lastpos=0,this.allowAttributes=!0,this.attributeParser=null,this.attributeStart=null,this.attributeSlices=null,this.matchers=fi}addMatch(e,r,n,s){const o={startpos:e,endpos:r,annot:n};s!==void 0?this.matches.splice(s,1,o):this.matches.push(o)}inVerbatim(){return this.verbatim>0}singleChar(e){return this.addMatch(e,e,"str"),e+1}reparseAttributes(){const e=this.attributeSlices;if(e!==null){if(this.allowAttributes=!1,this.attributeParser=null,this.attributeStart=null,e!==null)for(const r of e)this.feed(r.startpos,r.endpos);this.allowAttributes=!0,this.attributeSlices=null}}getMatches(){const e=this.subject;this.attributeParser&&this.reparseAttributes();let r=this.matches.length-1;if(this.matches[r]&&this.matches[r].annot==="soft_break"){this.matches.pop();const n=this.matches[this.matches.length-1];if(n&&n.annot==="str"&&e.codePointAt(n.endpos)===32){for(;n.endpos>=n.startpos&&e.codePointAt(n.endpos)===32;)n.endpos=n.endpos-1;n.endpos<n.startpos&&this.matches.pop()}}if(this.matches.length>0&&this.verbatim>0){const n=this.matches[this.matches.length-1];this.warn(new Fo.Warning("Unclosed verbatim",n.endpos)),this.matches.push({startpos:n.endpos,endpos:n.endpos,annot:"-"+this.verbatimType})}return this.matches}addOpener(e,r,n,s){this.openers[e]||(this.openers[e]=[]),this.openers[e].push({matchIndex:this.matches.length,startpos:r,endpos:n,annot:null,subMatchIndex:this.matches.length,substartpos:null,subendpos:null}),this.addMatch(r,n,s)}clearOpeners(e,r){for(const n in this.openers){const s=this.openers[n];let o=s.length-1;for(;s[o];){const l=s[o];if(l.startpos>=e&&l.endpos<=r)s.splice(o,1);else if(l.substartpos&&l.substartpos>=e&&l.subendpos&&l.subendpos<=r)s[o].substartpos=null,s[o].subendpos=null,s[o].annot=null;else break;o--}}}strMatches(e,r){let n=this.matches.length-1;for(;n>0&&this.matches[n].startpos>=e;)n--;for(this.matches[n].startpos<e&&n++;this.matches[n]&&this.matches[n].endpos<=r;){const s=this.matches[n];s.annot!=="escape"&&s.annot!=="str"&&(s.annot="str"),n++}}feed(e,r){const n=this.subject;(this.firstpos===-1||e<this.firstpos)&&(this.firstpos=e),(this.lastpos===0||r>this.lastpos)&&(this.lastpos=r);let s=e;for(;s<=r;)if(this.attributeParser!==null){const o=s,l=zn(n,s,r);let c;l===null?c=r:c=l;const h=this.attributeParser.feed(o,c),m=h.position;if(h.status==="done"){const x=this.attributeStart;x!==null&&this.addMatch(x,x,"+attributes");const N=this.attributeParser.matches;for(const b of N)this.addMatch(b.startpos,b.endpos,b.annot);this.addMatch(m,m,"-attributes"),this.attributeParser=null,this.attributeStart=null,this.attributeSlices=null,s=m+1}else h.status==="fail"?(this.reparseAttributes(),s=o):h.status==="continue"&&(this.attributeSlices===null&&(this.attributeSlices=[]),this.attributeSlices.push({startpos:o,endpos:m}),s=m+1)}else{const o=zn(n,s,r);let l;if(o===null?l=r+1:l=o,l>s&&(this.addMatch(s,l-1,"str"),s=l,s>r))break;const c=n.codePointAt(s);if(c===void 0)throw new Error("Code point at "+s+" is undefined.");if(c===Nr||c===Sr)c===Nr&&n.codePointAt(s+1)===Sr&&s+1<=r?(this.addMatch(s,s+1,"soft_break"),s=s+2):(this.addMatch(s,s,"soft_break"),s=s+1);else if(this.verbatim>0)if(c===96){const h=(0,lt.find)(n,ci,s,r);if(h){const m=h.endpos;if(h.endpos-s+1===this.verbatim){const x=(0,lt.find)(n,pi,m+1,r);x&&this.verbatimType==="verbatim"?(this.addMatch(s,m,"-"+this.verbatimType),this.addMatch(x.startpos,x.endpos,"raw_format"),s=x.endpos+1):(this.addMatch(s,m,"-"+this.verbatimType),s=m+1),this.verbatim=0,this.verbatimType="verbatim"}else this.addMatch(s,m,"str"),s=m+1}else this.addMatch(s,r,"str"),s=r+1}else this.addMatch(s,s,"str"),s=s+1;else{const h=this.matchers[c];if(h){const m=h(this,s,r);m===null?s=this.singleChar(s):s=m}else s=this.singleChar(s)}}}}Xe.InlineParser=gi;Object.defineProperty(Ne,"__esModule",{value:!0});Ne.parseEvents=void 0;const jn=ne,bi=qe,ct=le,dr=Xe,pr=function(t){return t==="+"||t==="-"||t==="*"||t===":"?[t]:/^[+*-] \[[Xx ]\]/.exec(t)?["X"]:/^[(]?[0-9]+[).]/.exec(t)?[t.replace(/[0-9]+/,"1")]:/^[(]?[ivxlcdm][).]/.exec(t)?[t.replace(/[a-z]+/,"i"),t.replace(/[a-z]+/,"a")]:/^[(]?[IVXLCDM][).]/.exec(t)?[t.replace(/[A-Z]+/,"I"),t.replace(/[A-Z]+/,"A")]:/^[(]?[ivxlcdm]+[).]/.exec(t)?[t.replace(/[a-z]+/,"i")]:/^[(]?[IVXLCDM]+[).]/.exec(t)?[t.replace(/[A-Z]+/,"I")]:/^[(]?[a-z][).]/.exec(t)?[t.replace(/[a-z]/,"a")]:/^[(]?[A-Z][).]/.exec(t)?[t.replace(/[A-Z]/,"A")]:[]},xi=function(t){return t===32||t===9},yi=function(t){return t===10||t===13},Rn=(0,ct.pattern)("[ \\t]*\\r?\\n"),wi=(0,ct.pattern)("^\\w+\\s"),$e=(0,ct.pattern)("[ \\t\\r\\n]"),vi=(0,ct.pattern)("[^ \\t\\r\\n]+"),Gn=(0,ct.pattern)("[>][ \\t\\r\\n]"),Fn=(0,ct.pattern)("#+"),ki=(0,ct.pattern)("(~~~~*|````*)([ \\t]*)([^ \\t\\r\\n`]*)[ \\t]*\\r?\\n"),_i=(0,ct.pattern)("(:?)--*(:?)([ \\t]*\\|[ \\t]*)"),Ai=(0,ct.pattern)("[^`|\\r\\n]*(?:[|]|`+)"),Si=(0,ct.pattern)("\\^[ \\t]+"),Ni=(0,ct.pattern)("\\[\\^([^\\]]+)\\]:[ \\t\\r\\n]"),qi=(0,ct.pattern)("[-*][ 	]*[-*][ \\t]*[-*][-* \\t]*\\r?\\n"),Ti=(0,ct.pattern)("(::::*)[ \\t]*\\r?\\n"),Mi=(0,ct.pattern)("(::::*)[ \\t]*"),Ci=(0,ct.pattern)("([\\w_-]*)[ \\t]*\\r?\\n"),Ii=(0,ct.pattern)("\\[([^\\]\\r\\n]*)\\]:[ \\t]*([^ \\t\\r\\n]*)[\\r\\n]"),Un=(0,ct.pattern)("(\\|[^\\r\\n]*\\|)[ \\t]*\\r?\\n"),mr=(0,ct.pattern)("(:?[-*+:]|\\([0-9]+\\)|[0-9]+[.)]|[ivxlcdmIVXLCDM]+[.)]|\\([ivxlcdmIVXLCDM]+\\)|[a-zA-Z][.)]|\\([a-zA-Z]\\))[ \\t\\r\\n]"),fr=(0,ct.pattern)("[*+-] \\[[Xx ]\\][ \\t\\r\\n]");var K;(function(t){t[t.None=0]="None",t[t.Inline=1]="Inline",t[t.Block=2]="Block",t[t.Text=3]="Text",t[t.Cells=4]="Cells",t[t.Attributes=5]="Attributes",t[t.ListItem=6]="ListItem"})(K||(K={}));class Nt{constructor(e,r){this.name=e.name,this.type=e.type,this.content=e.content,this.continue=e.continue,this.close=e.close,this.indent=0,this.inlineParser=null,this.attributeParser=null,this.extra=r}}class Oi{constructor(e,r={}){e.charAt(e.length-1)!==`
`&&(e=e+`
`),this.subject=e,this.maxoffset=e.length-1,this.options=r,this.warn=r.warn||(()=>{}),this.indent=0,this.startline=0,this.starteol=0,this.endeol=0,this.matches=[],this.containers=[],this.pos=0,this.lastMatchedContainer=0,this.finishedLine=!1,this.returned=0,this.paraSpec={name:"para",type:K.Block,content:K.Inline,continue:n=>this.find($e)===null,open:n=>(this.addContainer(new Nt(n,{})),this.addMatch(this.pos,this.pos,"+para"),!0),close:()=>{this.getInlineMatches(),this.containers.pop();const n=this.matches[this.matches.length-1],s=n&&n.endpos+1||this.pos;this.addMatch(s,s,"-para")}},this.specs=[{name:"block_quote",type:K.Block,content:K.Block,continue:n=>this.find(Gn)!==null?(this.pos=this.pos+1,!0):!1,open:n=>this.find(Gn)!==null?(this.addContainer(new Nt(n,{})),this.addMatch(this.pos,this.pos,"+block_quote"),this.pos=this.pos+1,!0):!1,close:()=>{this.containers.pop(),this.addMatch(this.pos,this.pos,"-block_quote")}},{name:"heading",type:K.Block,content:K.Inline,continue:n=>{const s=this.find(Fn);return s&&n.extra.level===s.endpos-s.startpos+1&&(0,ct.find)(this.subject,$e,s.endpos+1)?(this.pos=s.endpos+1,!0):!1},open:n=>{const s=this.find(Fn);if(s&&(0,ct.find)(this.subject,$e,s.endpos+1)){const o=s.endpos-s.startpos+1;return this.addContainer(new Nt(n,{level:o})),this.addMatch(s.startpos,s.endpos,"+heading"),this.pos=s.endpos+1,!0}else return!1},close:()=>{this.getInlineMatches(),this.containers.pop();const n=this.matches[this.matches.length-1],s=n&&n.endpos+1||this.pos;this.addMatch(s,s,"-heading")}},{name:"caption",type:K.Block,content:K.Inline,continue:n=>(0,ct.find)(this.subject,$e,this.pos)===null,open:n=>{const s=this.find(Si);return s?(this.pos=s.endpos+1,this.addContainer(new Nt(n,{})),this.addMatch(this.pos,this.pos,"+caption"),!0):!1},close:()=>{this.getInlineMatches(),this.containers.pop(),this.addMatch(this.pos-1,this.pos-1,"-caption")}},{name:"footnote",type:K.Block,content:K.Block,continue:n=>this.indent>(n.extra.indent||0)||this.pos===this.starteol,open:n=>{const s=this.find(Ni);if(s){const o=s.startpos,l=s.endpos,c=s.captures[0];return this.addContainer(new Nt(n,{note_label:c,indent:this.indent})),this.addMatch(o,o,"+footnote"),this.addMatch(o+2,l-3,"note_label"),this.pos=l,!0}else return!1},close:()=>{this.containers.pop(),this.addMatch(this.pos,this.pos,"-footnote")}},{name:"reference_definition",type:K.Block,content:K.None,continue:n=>{if(n.extra.indent>=this.indent)return!1;const s=this.find(vi);return this.pos<this.starteol&&s&&s.endpos===this.starteol-1?(this.addMatch(this.pos,this.starteol-1,"reference_value"),this.pos=this.starteol,!0):!1},open:n=>{const s=this.find(Ii);if(s){const o=s.captures[0],l=s.captures[1];return this.addContainer(new Nt(n,{key:o,indent:this.indent})),this.addMatch(s.startpos,s.startpos,"+reference_definition"),this.addMatch(s.startpos,s.startpos+o.length+1,"reference_key"),l.length>0&&this.addMatch(this.starteol-l.length,this.starteol-1,"reference_value"),this.pos=this.starteol-1,!0}else return!1},close:()=>{this.containers.pop(),this.addMatch(this.pos,this.pos,"-reference_definition")}},{name:"thematic_break",type:K.Block,content:K.None,continue:n=>!1,open:n=>{const s=this.find(qi);return s?(this.addContainer(new Nt(n,{})),this.addMatch(s.startpos,s.endpos,"thematic_break"),this.pos=s.endpos,!0):!1},close:()=>{this.containers.pop()}},{name:"list",type:K.Block,content:K.ListItem,continue:n=>{if(this.indent>n.extra.indent||this.pos===this.starteol)return!0;{const s=this.find(mr);if(s===null)return!1;let o=this.subject.substring(s.startpos,s.endpos);const l=this.find(fr);l!==null&&(o=this.subject.substring(l.startpos,l.startpos+5));const c=pr(o),h=[];for(const m of n.extra.styles)c.includes(m)&&h.push(m);if(h.length>0)return n.extra.styles=h,!0}return!1},open:n=>{const s=this.find(mr);if(s===null)return!1;const o=s.startpos,l=s.endpos;let c=this.subject.substring(o,l);const h=this.find(fr);h!==null&&(c=this.subject.substring(h.startpos,h.startpos+5));const m=pr(c);if(m.length===0)return!1;const x={styles:m,indent:this.indent};this.addContainer(new Nt(n,x));let N="+list";for(const b of m)N=N+"|"+b;return this.addMatch(o,l-1,N),!0},close:()=>{this.containers.pop(),this.addMatch(this.pos,this.pos,"-list")}},{name:"list_item",type:K.ListItem,content:K.Block,continue:n=>this.indent>n.extra.indent||this.pos===this.starteol,open:n=>{const s=this.find(mr);if(s===null)return!1;const o=s.startpos,l=s.endpos;let c=this.subject.substring(o,l),h=null;const m=this.find(fr);m!==null&&(c=this.subject.substring(m.startpos,m.startpos+5),h=this.subject.substring(m.startpos+3,m.startpos+4));const x=pr(c);if(x.length===0)return!1;const N={styles:x,indent:this.indent};this.addContainer(new Nt(n,N));let b="+list_item";for(const q of x)b=b+"|"+q;return this.addMatch(o,l-1,b),this.pos=l,h&&(h===" "?this.addMatch(o+2,o+4,"checkbox_unchecked"):this.addMatch(o+2,o+4,"checkbox_checked"),this.pos=o+5),!0},close:()=>{this.containers.pop(),this.addMatch(this.pos,this.pos,"-list_item")}},{name:"table",type:K.Block,content:K.Cells,continue:n=>{const s=this.find(Un);if(s){const o=s.captures[0];return this.parseTableRow(s.startpos,s.startpos+o.length-1)}else return!1},open:n=>{const s=this.find(Un);if(s){this.addContainer(new Nt(n,{columns:0}));const o=s.captures[0];return this.addMatch(s.startpos,s.startpos,"+table"),this.parseTableRow(s.startpos,s.startpos+o.length-1)?!0:(this.matches.pop(),this.containers.pop(),!1)}else return!1},close:()=>{this.containers.pop(),this.addMatch(this.pos,this.pos,"-table")}},{name:"attributes",type:K.Block,content:K.Attributes,open:n=>{if(this.subject.codePointAt(this.pos)===123){const s=new bi.AttributeParser(this.subject),o=s.feed(this.pos,this.starteol);if(o.status==="fail"||o.status==="done"&&(0,ct.find)(this.subject,Rn,o.position+1)===null)return!1;{const l=this.addContainer(new Nt(n,{status:o.status,indent:this.indent,startpos:this.pos,slices:[]}));return l.attributeParser=s,l.extra.slices=[{startpos:this.pos,endpos:this.starteol}],this.pos=this.starteol,!0}}else return!1},continue:n=>{if(n.extra.status==="done")return!1;if(n.attributeParser&&this.indent>n.extra.indent){n.extra.slices.push({startpos:this.pos,endpos:this.starteol});const l=n.attributeParser.feed(this.pos,this.endeol);if(n.extra.status=l.status,l.status!=="fail"||!(0,ct.find)(this.subject,Rn,l.position+1))return this.pos=this.starteol,!0}this.addMatch(n.extra.startpos,n.extra.startpos,"+para");const s=this.containers.pop(),o=this.addContainer(new Nt(this.paraSpec,{}));if(!o.inlineParser||!s)throw new Error("Missing inlineParser or attrContainer");return o.inlineParser.attributeSlices=s.extra.slices,o.inlineParser.reparseAttributes(),this.pos=o.inlineParser.lastpos+1,!0},close:()=>{const n=this.containers.pop();if(n)if(n.extra.status==="continue"){this.addMatch(n.extra.startpos,n.extra.startpos,"+para");const s=this.addContainer(new Nt(this.paraSpec,{}),!0);if(!s||!s.inlineParser)throw new Error("Could not add paragraph");s.inlineParser.attributeSlices=n.extra.slices,s.inlineParser.reparseAttributes(),s.close()}else{if(this.addMatch(n.extra.startpos,n.extra.startpos,"+block_attributes"),n.attributeParser){const s=n.attributeParser.matches;for(const o of s)this.matches.push(o)}this.addMatch(this.pos,this.pos,"-block_attributes")}}},{name:"fenced_div",type:K.Block,content:K.Block,continue:n=>{const s=this.tip();if(s&&s.name==="code_block")return!0;const o=this.find(Ti);if(o&&n.extra.colons){const l=o.captures[0];if(l.length>=n.extra.colons)return n.extra.endFenceStartpos=o.startpos,n.extra.endFenceEndpos=o.startpos+l.length-1,this.pos=o.endpos,!1}return!0},open:n=>{const s=this.find(Mi);if(!s)return!1;const o=s.captures[0],l=(0,ct.find)(this.subject,Ci,s.endpos+1);if(!l)return!1;const c=l.startpos,h=l.captures[0];return this.addContainer(new Nt(n,{colons:o.length})),this.addMatch(s.startpos,s.endpos,"+div"),h.length>0&&this.addMatch(c,c+h.length-1,"class"),this.pos=l.endpos+1,this.finishedLine=!0,!0},close:()=>{const n=this.containers.pop();if(!n)return;const s=n.extra.endFenceStartpos||this.pos,o=n.extra.endFenceEndpos||this.pos;this.addMatch(s,o,"-div"),s===o&&this.warn(new jn.Warning("Unclosed div",this.pos))}},{name:"code_block",type:K.Block,content:K.Text,continue:n=>{const s=this.find(n.extra.closePattern);return s?(n.extra.endFenceStartpos=s.startpos,n.extra.endFenceEndpos=s.startpos+s.captures[0].length-1,this.pos=s.endpos,this.finishedLine=!0,!1):!0},open:n=>{const s=this.find(ki);if(s){const[o,l,c]=s.captures,h=c.charAt(0)==="="&&!0||!1,m=(0,ct.pattern)("("+o+o.substring(0,1)+"*)[ \\t]*[\\r\\n]"),x=this.addContainer(new Nt(n,{closePattern:m}));if(x.indent=this.indent,this.addMatch(s.startpos,s.startpos+o.length-1,"+code_block"),c.length>0){const N=s.startpos+o.length+l.length;h?this.addMatch(N,N+c.length-1,"raw_format"):this.addMatch(N,N+c.length-1,"code_language")}return this.pos=s.endpos,this.finishedLine=!0,!0}else return!1},close:()=>{const n=this.containers.pop();if(!n)return;const s=n.extra.endFenceStartpos||this.pos,o=n.extra.endFenceEndpos||this.pos;this.addMatch(s,o,"-code_block"),s===o&&this.warn(new jn.Warning("Unclosed code block",this.pos))}}]}find(e){return(0,ct.find)(this.subject,e,this.pos)}tip(){return this.containers.length>=1?this.containers[this.containers.length-1]:null}addMatch(e,r,n){this.matches.push({startpos:Math.min(e,this.maxoffset),endpos:Math.min(r,this.maxoffset),annot:n})}getInlineMatches(){var e;const r=(e=this.tip())===null||e===void 0?void 0:e.inlineParser;if(r){let n;for(const s of r.getMatches())n&&n.annot==="str"&&s.annot==="str"&&s.startpos===n.endpos+1?this.matches[this.matches.length-1].endpos=s.endpos:this.matches.push(s),n=s}}closeUnmatchedContainers(){const e=this.lastMatchedContainer;let r=this.tip();for(;r&&this.containers.length-1>e;)r.close(),r=this.tip()}addContainer(e,r){r||this.closeUnmatchedContainers();let n=this.tip();for(;n&&n.content!==e.type;)n.close(),n=this.tip();return e.content===K.Inline&&(e.inlineParser=new dr.InlineParser(this.subject,{warn:this.warn})),this.containers.push(e),e}skipSpace(){const e=this.subject;let r=this.pos;for(;xi(e.codePointAt(r));)r++;this.indent=r-this.startline,this.pos=r}getEol(){const e=this.subject;let r=this.pos;for(;!yi(e.codePointAt(r));)r++;this.starteol=r,e.codePointAt(r)===13&&e.codePointAt(r+1)===10?this.endeol=r+1:this.endeol=r}parseTableCell(){const e=new dr.InlineParser(this.subject,{warn:this.warn});let r=!1;const n=this.pos-1;let s=n;for(this.skipSpace();!r;){const o=this.find(Ai);if(o===null){r=!1;break}else{const l=o.endpos;this.subject.charAt(l)==="`"||e.inVerbatim()?e.feed(this.pos,l):this.subject.charAt(l-1)==="\\"?e.feed(this.pos,l):(e.feed(this.pos,l-1),s=l,r=!0),this.pos=l+1}}if(r){const o=e.getMatches();return{startpos:n,endpos:s,matches:o}}else return null}parseTableRow(e,r){const n=this.matches.length,s=this.pos;this.addMatch(e,e,"+row"),this.pos++;const o=[];let l=this.pos,c=!1;for(;!c;){const h=(0,ct.find)(this.subject,_i,l);if(h!==null){const[m,x,N]=h.captures;let b="separator_default";if(m.length>0&&x.length>0?b="separator_center":x.length>0?b="separator_right":m.length>0&&(b="separator_left"),o.push({startpos:h.startpos,endpos:h.endpos-N.length,annot:b}),l=h.endpos+1,l===this.starteol){c=!0;break}}else break}if(c){for(const h of o)this.addMatch(h.startpos,h.endpos,h.annot);return this.addMatch(this.starteol-1,this.starteol-1,"-row"),this.pos=this.starteol,this.finishedLine=!0,!0}for(;this.pos<=r;){const h=this.parseTableCell();if(h!==null){this.addMatch(h.startpos,h.startpos,"+cell");const m=h.matches;m.forEach((x,N)=>{const b=x.startpos;let q=x.endpos;if(N===m.length-1&&x.annot==="str")for(;this.subject.codePointAt(q)===32&&q>=b;)q=q-1;this.addMatch(b,q,x.annot)}),this.addMatch(h.endpos,h.endpos,"-cell")}else{for(this.pos=s;this.matches.length>n;)this.matches.pop();return!1}}return this.addMatch(this.pos,this.pos,"-row"),this.pos=this.starteol,this.finishedLine=!0,!0}[Symbol.iterator](){const e=this.specs,r=this.subject.length;this.returned=0;const n=this;return{next(){for(;n.pos<r;){if(n.matches.length>0&&n.returned<n.matches.length)return n.returned=n.returned+1,{value:n.matches[n.returned-1],done:!1};n.indent=0,n.startline=n.pos,n.finishedLine=!1,n.getEol(),n.lastMatchedContainer=-1;let s=0;for(;s<n.containers.length;){const o=n.containers[s];if(n.skipSpace(),o.continue(o))n.lastMatchedContainer=s;else break;s=s+1}if(n.finishedLine)for(;n.containers.length>0&&n.lastMatchedContainer<n.containers.length-1;){const o=n.tip();o&&o.close()}if(!n.finishedLine){n.skipSpace();let o=n.pos===n.starteol,l=!1,c=n.containers[n.lastMatchedContainer],h=!o&&(!c||c.content===K.Block||c.content===K.ListItem)&&!n.find(wi);for(;h;){h=!1;for(const m of e)if((!c&&m.type===K.Block||c&&c.content===m.type)&&m.open(m)){if(n.tip())n.lastMatchedContainer=n.containers.length-1,c=n.containers[n.lastMatchedContainer],n.finishedLine?h=!1:(n.skipSpace(),l=!0,h=m.content===K.Block||m.content===K.ListItem);else throw new Error("No tip after opening container");break}}if(!n.finishedLine){n.skipSpace(),o=n.pos===n.starteol;let m=n.tip();if(!o&&!l&&n.lastMatchedContainer<n.containers.length-1&&m&&m.content===K.Inline||n.closeUnmatchedContainers(),m=n.tip(),(!m||m.content===K.Block)&&(o?l||n.addMatch(n.pos,n.endeol,"blankline"):(n.paraSpec.open(n.paraSpec),m=n.tip(),m&&(m.inlineParser=new dr.InlineParser(n.subject,n.options)))),m&&m.content===K.Text){let x=n.pos;m.indent!==null&&n.indent>m.indent&&(x=x-(n.indent-m.indent)),n.addMatch(x,n.endeol,"str")}else m&&m.content===K.Inline&&!o&&m.inlineParser&&m.inlineParser.feed(n.pos,n.endeol)}}n.pos=(n.endeol||n.pos)+1}return n.lastMatchedContainer=-1,n.closeUnmatchedContainers(),n.matches.length>0&&n.returned<n.matches.length?(n.returned=n.returned+1,{value:n.matches[n.returned-1],done:!1}):{value:{startpos:n.pos,endpos:n.pos,annot:""},done:!0}}}}}const Pi=function(t,e={}){return new Oi(t,e)};Ne.parseEvents=Pi;var Et={};Object.defineProperty(Et,"__esModule",{value:!0});Et.isCaption=Et.isRow=Et.isBlock=Et.isInline=void 0;const $i={para:!0,heading:!0,block_quote:!0,thematic_break:!0,section:!0,div:!0,code_block:!0,raw_block:!0,bullet_list:!0,ordered_list:!0,task_list:!0,definition_list:!0,table:!0,reference:!0,footnote:!0};function Bi(t){return $i[t.tag]||!1}Et.isBlock=Bi;const Li={str:!0,soft_break:!0,hard_break:!0,non_breaking_space:!0,symb:!0,verbatim:!0,raw_inline:!0,inline_math:!0,display_math:!0,url:!0,email:!0,footnote_reference:!0,smart_punctuation:!0,emph:!0,strong:!0,link:!0,image:!0,span:!0,mark:!0,superscript:!0,subscript:!0,insert:!0,delete:!0,double_quoted:!0,single_quoted:!0};function Ei(t){return Li[t.tag]||!1}Et.isInline=Ei;function zi(t){return"head"in t}Et.isRow=zi;function Di(t){return!("head"in t)}Et.isCaption=Di;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.isInline=t.isCaption=t.isRow=t.isBlock=t.getStringContent=t.renderAST=t.parse=void 0;const e=Ne,r=ne,n=Et;Object.defineProperty(t,"isRow",{enumerable:!0,get:function(){return n.isRow}}),Object.defineProperty(t,"isBlock",{enumerable:!0,get:function(){return n.isBlock}}),Object.defineProperty(t,"isCaption",{enumerable:!0,get:function(){return n.isCaption}}),Object.defineProperty(t,"isInline",{enumerable:!0,get:function(){return n.isInline}});const s=function(A){const O=[];return o(A,O),O.join("")};t.getStringContent=s;const o=function(A,O){if("text"in A)O.push(A.text);else if("tag"in A&&(A.tag==="soft_break"||A.tag==="hard_break"))O.push(`
`);else if("children"in A)for(const z of A.children)o(z,O)},l=function(A){return A.replace(/^ `/,"`").replace(/` $/,"`")},c={i:1,v:5,x:10,l:50,c:100,d:500,m:1e3,I:1,V:5,X:10,L:50,C:100,D:500,M:1e3},h=function(A){let O=0,z=0,W=A.length-1;for(;W>=0;){const H=A.charAt(W),U=c[H];if(!U)throw new Error("Encountered bad character in roman numeral "+A);U<z?O=O-U:O=O+U,z=U,W=W-1}return O},m=function(A,O){const z=O.replace(/[().]/g,""),W=A.replace(/[().]/g,"");switch(z){case"1":return parseInt(W,10);case"A":return(W.codePointAt(0)||65)-65+1;case"a":return(W.codePointAt(0)||97)-97+1;case"I":return h(W);case"i":return h(W)}};var x;(function(A){A[A.Normal=0]="Normal",A[A.Verbatim=1]="Verbatim",A[A.Literal=2]="Literal"})(x||(x={}));const N=function(A){return A.trim().replace(/[ \t\r\n]+/g," ")},b=function(A,O={}){const z=[-1];if(O.sourcePositions)for(let w=0;w<A.length;w++)A[w]===`
`&&z.push(w);const W=function(w){const v=z.length;let S=0,g=v-1,p=0,C=0;for(;!p;){const F=S+~~((g-S)/2);z[F]>w?g=F:z[F]<=w&&(F===g||z[F+1]>w?(p=F+1,C=w-z[F]):S===F&&S<g?S=F+1:S=F)}return{line:p,col:C,offset:w}};let H=x.Normal,U="";const At={},_t={},rt={},nt={},ht={};let mt=0;const wt=(0,e.parseEvents)(A,O),St=O.warn||(()=>{}),zt=function(w){if(Object.keys(ht).length>0){w.attributes=w.attributes||{};for(const v in ht)w.attributes[v]=ht[v],delete ht[v]}},he=function(w){const v=w.replace(/[\]\[~!@#$%^&*(){}`,.<>\\|=+/?\s]+/g," ").trim().replace(/ +/g,"-");let S=0,g=v;for(;!g||nt[g];)S=S+1,g=(v||"s")+"-"+S;return g},Q=function(w){const v={children:[],data:{},pos:w,attributes:void 0};zt(v),st.push(v)},X=function(w){const v=st.pop();if(!v)throw new Error("Container stack is empty (popContainer)");return w&&v.pos&&(v.pos.end=w.end),v},j=function(){if(st.length>0)return st[st.length-1];throw new Error("Container stack is empty (topContainer)")},Xt=function(){const w=j();return w.children.length>0?w.children[w.children.length-1]:w},R=function(w){st.length>0&&st[st.length-1].children.push(w)},Je={str:(w,v,S,g)=>{const p=A.substring(v,S+1);H===x.Normal?R({tag:"str",text:p,pos:g}):U+=p},soft_break:(w,v,S,g)=>{H===x.Normal?R({tag:"soft_break",pos:g}):U+=`
`},escape:(w,v,S,g)=>{H===x.Verbatim&&(U+="\\")},hard_break:(w,v,S,g)=>{H===x.Normal?R({tag:"hard_break",pos:g}):U+=`
`},non_breaking_space:(w,v,S,g)=>{H===x.Verbatim?U+="\\ ":R({tag:"non_breaking_space",pos:g})},symb:(w,v,S,g)=>{if(H===x.Normal){const p=A.substring(v+1,S);R({tag:"symb",alias:p,pos:g})}else{const p=A.substring(v,S+1);U+=p}},footnote_reference:(w,v,S,g)=>{const p=A.substring(v+2,S);R({tag:"footnote_reference",text:N(p),pos:g})},"+reference_definition":(w,v,S,g)=>{Q(g)},"-reference_definition":(w,v,S,g)=>{const p=X(g),C=N(p.data.key),F={tag:"reference",label:C,destination:p.data.value||"",attributes:p.attributes,pos:p.pos};p.data.key&&(At[C]=F)},reference_key:(w,v,S,g)=>{j().data.key=A.substring(v+1,S),j().data.value=""},reference_value:(w,v,S,g)=>{j().data.value=j().data.value+A.substring(v,S+1)},"+emph":(w,v,S,g)=>{Q(g)},"-emph":(w,v,S,g)=>{const p=X(g);R({tag:"emph",children:p.children,pos:p.pos})},"+strong":(w,v,S,g)=>{Q(g)},"-strong":(w,v,S,g)=>{const p=X(g);R({tag:"strong",children:p.children,pos:p.pos})},"+span":(w,v,S,g)=>{Q(g)},"-span":(w,v,S,g)=>{const p=X(g);R({tag:"span",children:p.children,pos:p.pos})},"+mark":(w,v,S,g)=>{Q(g)},"-mark":(w,v,S,g)=>{const p=X(g);R({tag:"mark",children:p.children,pos:p.pos})},"+superscript":(w,v,S,g)=>{Q(g)},"-superscript":(w,v,S,g)=>{const p=X(g);R({tag:"superscript",children:p.children,pos:p.pos})},"+subscript":(w,v,S,g)=>{Q(g)},"-subscript":(w,v,S,g)=>{const p=X(g);R({tag:"subscript",children:p.children,pos:p.pos})},"+delete":(w,v,S,g)=>{Q(g)},"-delete":(w,v,S,g)=>{const p=X(g);R({tag:"delete",children:p.children,pos:p.pos})},"+insert":(w,v,S,g)=>{Q(g)},"-insert":(w,v,S,g)=>{const p=X(g);R({tag:"insert",children:p.children,pos:p.pos})},"+double_quoted":(w,v,S,g)=>{Q(g)},"-double_quoted":(w,v,S,g)=>{const p=X(g);R({tag:"double_quoted",children:p.children,pos:p.pos})},"+single_quoted":(w,v,S,g)=>{Q(g)},"-single_quoted":(w,v,S,g)=>{const p=X(g);R({tag:"single_quoted",children:p.children,pos:p.pos})},"+attributes":(w,v,S,g)=>{Q(g)},"-attributes":(w,v,S,g)=>{const p=X(g);if(p.attributes&&st.length>0){p.attributes.id&&(nt[p.attributes.id]=!0);let C=Xt();if(C===j())return;let F=!1;if("tag"in C&&C.tag==="str"){const J=C.text.match(/[^\s]+$/);if(J&&J.index&&J.index>0){let Bt;if(C.pos){const Lt=C.pos.end;C.pos.end={line:Lt.line,col:Lt.col-J[0].length,offset:Lt.offset-J[0].length},Bt={start:{line:Lt.line,col:Lt.col-J[0].length+1,offset:Lt.offset-J[0].length+1},end:Lt}}C.text=C.text.substring(0,J.index),R({tag:"str",text:J[0],pos:Bt})}else J||(F=!0)}if(C=Xt(),F){St(new r.Warning("Ignoring unattached attribute",O.sourcePositions?W(v):v));return}C.attributes||(C.attributes={});for(const J in p.attributes)J==="class"&&C.attributes[J]?C.attributes[J]=C.attributes[J]+" "+p.attributes[J]:C.attributes[J]=p.attributes[J]}},"+block_attributes":(w,v,S,g)=>{Q(g)},"-block_attributes":(w,v,S,g)=>{const p=X(g);if(p.attributes&&st.length>0){p.attributes.id&&(nt[p.attributes.id]=!0);for(const C in p.attributes)C==="class"&&ht[C]?ht[C]=ht[C]+" "+p.attributes[C]:ht[C]=p.attributes[C]}},class:(w,v,S,g)=>{const p=j(),C=A.substring(v,S+1);p.attributes||(p.attributes={}),p.attributes.class?p.attributes.class=p.attributes.class+" "+C:p.attributes.class=C},id:(w,v,S,g)=>{const p=j(),C=A.substring(v,S+1);p.attributes?p.attributes.id=C:p.attributes={id:C}},key:(w,v,S,g)=>{const p=j(),C=A.substring(v,S+1);p.data.key=C,p.attributes||(p.attributes={}),p.attributes[p.data.key]=""},value:(w,v,S,g)=>{const p=j(),C=A.substring(v,S+1).replace(/[ \r\n]+/g," ").replace(/\\([.,\\/#!$%^&*;:{}=\-_`~+[\]()'"?|])/g,"$1");if(p.attributes||(p.attributes={}),p.data.key)p.attributes[p.data.key]=p.attributes[p.data.key]+C;else throw new Error("Encountered value without key")},"+linktext":(w,v,S,g)=>{Q(g),j().data.isimage=!1},"-linktext":(w,v,S,g)=>{},"+imagetext":(w,v,S,g)=>{Q(g),j().data.isimage=!0},"-imagetext":(w,v,S,g)=>{},"+destination":(w,v,S,g)=>{H=x.Literal},"-destination":(w,v,S,g)=>{const p=X(g);R({tag:p.data.isimage?"image":"link",destination:U.replace(/[\r\n]/g,""),children:p.children,pos:p.pos}),H=x.Normal,U=""},"+reference":(w,v,S,g)=>{H=x.Literal},"-reference":(w,v,S,g)=>{const p=X(g);let C=U;C.length===0&&(C=s(p)),R({tag:p.data.isimage?"image":"link",reference:N(C),children:p.children,pos:p.pos}),H=x.Normal,U=""},"+verbatim":(w,v,S,g)=>{H=x.Verbatim,Q(g)},"-verbatim":(w,v,S,g)=>{const p=X(g);R({tag:"verbatim",text:l(U),pos:p.pos}),H=x.Normal,U=""},raw_format:(w,v,S,g)=>{const p=A.substring(v,S+1).replace(/^\{?=/,"").replace(/\}$/,""),C=j();if(H===x.Verbatim)C.data.format=p;else{const F=C.children[C.children.length-1];if(F&&"tag"in F&&F.tag==="verbatim")F.tag="raw_inline",F.format=p;else throw new Error("raw_format is not after verbatim or code_block.")}},"+display_math":(w,v,S,g)=>{H=x.Verbatim,Q(g)},"+inline_math":(w,v,S,g)=>{H=x.Verbatim,Q(g)},"-display_math":(w,v,S,g)=>{const p=X(g);R({tag:"display_math",text:l(U),pos:p.pos}),H=x.Normal,U=""},"-inline_math":(w,v,S,g)=>{const p=X(g);R({tag:"inline_math",text:l(U),pos:p.pos}),H=x.Normal,U=""},"+url":(w,v,S,g)=>{H=x.Literal,Q(g)},"-url":(w,v,S,g)=>{const p=X(g);R({tag:"url",text:U.replace(/[\r\n]/g,""),pos:p.pos}),H=x.Normal,U=""},"+email":(w,v,S,g)=>{H=x.Literal,Q(g)},"-email":(w,v,S,g)=>{const p=X(g);R({tag:"email",text:U.replace(/[\r\n]/g,""),pos:p.pos}),H=x.Normal,U=""},"+para":(w,v,S,g)=>{Q(g)},"-para":(w,v,S,g)=>{const p=X(g);R({tag:"para",children:p.children,attributes:p.attributes,pos:p.pos})},"+heading":(w,v,S,g)=>{Q(g),j().data.level=1+S-v},"-heading":(w,v,S,g)=>{const p=X(g);p.attributes||(p.attributes={}),p.autoAttributes||(p.autoAttributes={});const C=s(p).trim();p.attributes.id||(p.autoAttributes.id=he(C),nt[p.autoAttributes.id]=!0);const F=N(C);!At[F]&&!_t[F]&&(_t[F]={tag:"reference",label:F,destination:"#"+(p.attributes.id||p.autoAttributes.id)});let J=j();if(J.data.headinglevel!==void 0){for(;J&&J.data.headinglevel!==void 0&&J.data.headinglevel>=p.data.level;)J=X(g),R({tag:"section",children:J.children,attributes:J.attributes,autoAttributes:J.autoAttributes,pos:J.pos}),J=j();Q(g),j().data.headinglevel=p.data.level,p.autoAttributes&&p.autoAttributes.id&&(j().autoAttributes=p.autoAttributes,delete p.autoAttributes),p.attributes&&p.attributes.id&&(j().attributes=p.attributes,delete p.attributes)}R({tag:"heading",level:p.data.level,children:p.children,attributes:p.attributes,autoAttributes:p.autoAttributes,pos:p.pos})},"+list":(w,v,S,g)=>{Q(g),j().data.styles=w,j().data.blanklines=!1,j().data.tight=!0,mt++},"-list":(w,v,S,g)=>{const p=X(g),C=p.data.styles[0];if(!C)throw new Error("No style defined for list");const F=m(p.data.firstMarker,C);R(C===":"?{tag:"definition_list",children:p.children,attributes:p.attributes,autoAttributes:p.autoAttributes,pos:p.pos}:C==="X"?{tag:"task_list",tight:p.data.tight,children:p.children,attributes:p.attributes,autoAttributes:p.autoAttributes,pos:p.pos}:C==="+"||C==="*"||C==="-"?{tag:"bullet_list",tight:p.data.tight,style:C,children:p.children,attributes:p.attributes,autoAttributes:p.autoAttributes,pos:p.pos}:{tag:"ordered_list",style:C,children:p.children,start:F,tight:p.data.tight,attributes:p.attributes,autoAttributes:p.autoAttributes,pos:p.pos}),mt--},"+list_item":(w,v,S,g)=>{w.length<j().data.styles.length&&(j().data.styles=w),j().data.firstMarker||(j().data.firstMarker=A.substring(v,S+1)),Q(g),w.length===1&&w[0]===":"&&(j().data.definitionList=!0)},"-list_item":(w,v,S,g)=>{const p=X(g);if(p.data.definitionList)if(p.children[0]&&p.children[0].tag==="para"){const C={tag:"term",children:p.children[0].children};p.children.shift();const F={tag:"definition",children:p.children};R({tag:"definition_list_item",children:[C,F],attributes:p.attributes,autoAttributes:p.autoAttributes,pos:p.pos})}else{const C={tag:"term",children:[]},F={tag:"definition",children:p.children};R({tag:"definition_list_item",children:[C,F],attributes:p.attributes,autoAttributes:p.autoAttributes,pos:p.pos})}else p.data.checkbox?R({tag:"task_list_item",children:p.children,attributes:p.attributes,autoAttributes:p.autoAttributes,checkbox:p.data.checkbox,pos:p.pos}):R({tag:"list_item",children:p.children,attributes:p.attributes,autoAttributes:p.autoAttributes,pos:p.pos})},checkbox_checked:(w,v,S,g)=>{j().data.checkbox="checked"},checkbox_unchecked:(w,v,S,g)=>{j().data.checkbox="unchecked"},"+block_quote":(w,v,S,g)=>{Q(g)},"-block_quote":(w,v,S,g)=>{const p=X(g);R({tag:"block_quote",children:p.children,attributes:p.attributes,autoAttributes:p.autoAttributes,pos:p.pos})},"+table":(w,v,S,g)=>{Q(g),j().data.aligns=[]},"-table":(w,v,S,g)=>{var p;const C=X(g),F=C.children;let J={tag:"caption",children:[]};((p=F[0])===null||p===void 0?void 0:p.tag)==="caption"&&(J=F.shift()),R({tag:"table",children:[J,...F],attributes:C.attributes,autoAttributes:C.autoAttributes,pos:C.pos})},"+row":(w,v,S,g)=>{Q(g),j().data.aligns=[]},"-row":(w,v,S,g)=>{const p=X(g);if(p.children.length===0){j().data.aligns=p.data.aligns;const C=Xt();if(C&&"tag"in C&&C.tag==="row"){C.head=!0;for(let F=0;F<C.children.length;F++)C.children[F].head=!0,C.children[F].align=p.data.aligns[F]||"default"}}else{p.data.aligns=[];for(let C=0;C<p.children.length;C++)p.children[C].align=j().data.aligns[C]||"default";R({tag:"row",children:p.children,head:!1,attributes:p.attributes,autoAttributes:p.autoAttributes,pos:p.pos})}},separator_default:(w,v,S,g)=>{j().data.aligns.push("default")},separator_left:(w,v,S,g)=>{j().data.aligns.push("left")},separator_right:(w,v,S,g)=>{j().data.aligns.push("right")},separator_center:(w,v,S,g)=>{j().data.aligns.push("center")},"+cell":(w,v,S,g)=>{Q(g)},"-cell":(w,v,S,g)=>{const p=X(g);R({tag:"cell",children:p.children,head:!1,align:"default",attributes:p.attributes,autoAttributes:p.autoAttributes,pos:p.pos})},"+caption":(w,v,S,g)=>{Q(g)},"-caption":(w,v,S,g)=>{var p;const C=X(g),F=Xt();if(!F||"tag"in F&&F.tag!=="table")return;const J={tag:"caption",children:C.children,attributes:C.attributes,autoAttributes:C.autoAttributes,pos:C.pos};((p=F.children[0])===null||p===void 0?void 0:p.tag)==="caption"&&(F.children[0]=J)},"+footnote":(w,v,S,g)=>{Q(g)},"-footnote":(w,v,S,g)=>{const p=X(g);if(p.data.label){const C=N(p.data.label);rt[C]={tag:"footnote",label:C||"",children:p.children,attributes:p.attributes,autoAttributes:p.autoAttributes,pos:p.pos}}else St(new r.Warning("Ignoring footnote without a label.",O.sourcePositions?W(S):S))},note_label:(w,v,S,g)=>{j().data.label=A.substring(v,S+1)},"+code_block":(w,v,S,g)=>{Q(g),H=x.Verbatim},"-code_block":(w,v,S,g)=>{const p=X(g);p.data.format?R({tag:"raw_block",format:p.data.format,text:U,attributes:p.attributes,autoAttributes:p.autoAttributes,pos:p.pos}):R({tag:"code_block",text:U,lang:p.data.lang,attributes:p.attributes,autoAttributes:p.autoAttributes,pos:p.pos}),H=x.Normal,U=""},code_language:(w,v,S,g)=>{const p=j();p.data.lang=A.substring(v,S+1)},"+div":(w,v,S,g)=>{Q(g)},"-div":(w,v,S,g)=>{const p=X(g);R({tag:"div",children:p.children,attributes:p.attributes,autoAttributes:p.autoAttributes,pos:p.pos})},thematic_break:(w,v,S,g)=>{const p={tag:"thematic_break",pos:g};zt(p),R(p)},left_single_quote:(w,v,S,g)=>{R({tag:"smart_punctuation",type:"left_single_quote",text:"'",pos:g})},right_single_quote:(w,v,S,g)=>{R({tag:"smart_punctuation",type:"right_single_quote",text:"'",pos:g})},left_double_quote:(w,v,S,g)=>{R({tag:"smart_punctuation",type:"left_double_quote",text:'"',pos:g})},right_double_quote:(w,v,S,g)=>{R({tag:"smart_punctuation",type:"right_double_quote",text:'"',pos:g})},ellipses:(w,v,S,g)=>{R({tag:"smart_punctuation",type:"ellipses",text:"...",pos:g})},en_dash:(w,v,S,g)=>{R({tag:"smart_punctuation",type:"en_dash",text:"--",pos:g})},em_dash:(w,v,S,g)=>{R({tag:"smart_punctuation",type:"em_dash",text:"---",pos:g})},blankline:(w,v,S,g)=>{let p;"tight"in j().data?p=j():st.length>=2&&"tight"in st[st.length-2].data&&(p=st[st.length-2]),p&&(p.data.blanklines=!0)}},vt=function(w,v){let S,g,p;O.sourcePositions&&(S=W(v.startpos),g=W(v.endpos),p={start:S,end:g});let C=v.annot,F=[];if(v.annot.includes("|")){const Bt=v.annot.split("|");C=Bt[0],F=Bt.slice(1)}if(mt>0&&C!=="blankline"){let Bt;const Lt=j();Lt&&(Lt.data&&"tight"in Lt.data?Bt=Lt:w.length>=2&&"tight"in w[w.length-2].data&&(Bt=w[w.length-2])),Bt&&(!/^[+-]list/.test(C)&&Bt.data.blanklines&&(Bt.data.tight=!1),/^[-+]list_item$/.test(C)||(Bt.data.blanklines=!1))}const J=Je[C];J&&J(F,v.startpos,v.endpos,p)},st=[{children:[],data:{headinglevel:0},pos:{start:{line:0,col:0,offset:0},end:{line:0,col:0,offset:0}}}];let re=0;for(const w of wt)vt(st,w),re=w.endpos;let Qt;O.sourcePositions&&(Qt=W(re));let Dt=j();for(;Dt&&Dt.data.headinglevel>0;)X(Qt&&{start:Qt,end:Qt}),R({tag:"section",children:Dt.children,attributes:Dt.attributes,autoAttributes:Dt.autoAttributes,pos:Dt.pos}),Dt=j();const $t={tag:"doc",references:At,autoReferences:_t,footnotes:rt,children:st[0].children};return st[0].autoAttributes&&($t.autoAttributes=st[0].autoAttributes),st[0].attributes&&($t.attributes=st[0].attributes),$t};t.parse=b;const q={children:!0,tag:!0,pos:!0,attributes:!0,autoAttributes:!0,references:!0,autoReferences:!0,footnotes:!0},P=function(A){return JSON.stringify(A).replace(/\\\n/g,"\\n")},G=function(A,O,z){if(O.push(" ".repeat(z)),z>128){O.push(`(((DEEPLY NESTED CONTENT OMITTED)))
`);return}O.push(A.tag),A.pos&&O.push(` (${A.pos.start.line}:${A.pos.start.col}:${A.pos.start.offset}-${A.pos.end.line}:${A.pos.end.col}:${A.pos.end.offset})`);for(const W in A)if(!q[W]){const H=A[W];H!=null&&O.push(` ${W}=${P(H)}`)}if(A.attributes)for(const W in A.attributes)O.push(` ${W}=${P(A.attributes[W])}`);if(O.push(`
`),A.children)for(const W of A.children)G(W,O,z+2)},Z=function(A){const O=[];if(G(A,O,0),Object.keys(A.references).length>0){O.push(`references
`);for(const z in A.references)O.push(`  [${P(z)}] =
`),G(A.references[z],O,4)}if(Object.keys(A.footnotes).length>0){O.push(`footnotes
`);for(const z in A.footnotes)O.push(`  [${P(z)}] =
`),G(A.footnotes[z],O,4)}return O.join("")};t.renderAST=Z})(He);var me={};Object.defineProperty(me,"__esModule",{value:!0});me.HTMLRenderer=me.renderHTML=void 0;const Vn=He,ji=ne,Ri=/[&<>]/,Gi=/[&<>"]/;class qs{constructor(e){this.smartPunctuationMap={right_single_quote:"â€™",left_single_quote:"â€˜",right_double_quote:"â€",left_double_quote:"â€œ",ellipses:"â€¦",em_dash:"â€”",en_dash:"â€“"},this.warn=e.warn||(()=>{}),this.options=e||{},this.tight=!1,this.footnoteIndex={},this.nextFootnoteIndex=1,this.references={},this.autoReferences={}}escape(e){return Ri.test(e)?e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"):e}escapeAttribute(e){return Gi.test(e)?e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;"):e}renderAttributes(e,r){let n="";if(r)for(const o in r)if(o==="class"){let l=r[o];e.attributes&&e.attributes.class&&(l=`${l} ${e.attributes.class}`),n+=` ${o}="${this.escapeAttribute(l)}"`}else n+=` ${o}="${this.escapeAttribute(r[o])}"`;const s=Object.assign(Object.assign({},e.autoAttributes),e.attributes);if(s)for(const o in s){const l=s[o];o==="class"&&r&&r.class||(n+=` ${o}="${this.escapeAttribute(l)}"`)}if(e.pos){const o=e.pos.start,l=e.pos.end;n+=` data-startpos="${o.line}:${o.col}:${o.offset}" data-endpos="${l.line}:${l.col}:${l.offset}"`}return n}renderTag(e,r,n){let s="";return(r.attributes||r.autoAttributes||n||r.pos)&&(s=this.renderAttributes(r,n)),`<${e}${s}>`}renderCloseTag(e){return`</${e}>`}inTags(e,r,n,s){const o=n>=2?`
`:"",l=n>=1?`
`:"";return`${this.renderTag(e,r,s)}${o}${this.renderChildren(r)}</${e}>${l}`}addBacklink(e,r){const n=`<a href="#fnref${r}" role="doc-backlink">â†©ï¸</a>`;return/\<\/p\>[\r\n]*$/.test(e)?e.replace(/\<\/p\>([\r\n]*)$/,n+"</p>$1"):e+`<p>${n}</p>
`}renderChildren(e){let r="";const n=this.tight;"tight"in e&&(this.tight=!!e.tight);for(const s of e.children)r+=this.renderAstNode(s);return"tight"in e&&(this.tight=n),r}renderAstNode(e){var r;const n=(r=this.options.overrides)===null||r===void 0?void 0:r[e.tag];return n?n(e,this):this.renderAstNodeDefault(e)}renderNotes(e){let r="";const n=[],s={};for(const o in e)s[o]=this.renderChildren(e[o]);for(const o in this.footnoteIndex){const l=this.footnoteIndex[o];l&&(n[l]=s[o])}r+=`<section role="doc-endnotes">
<hr>
<ol>
`;for(let o=1;o<n.length;o++){const l=n[o]||"";r+=`<li id="fn${o}">
`,r+=this.addBacklink(l,o),r+=`</li>
`}return r+=`</ol>
</section>
`,r}renderAstNodeDefault(e){var r;switch(e.tag){case"doc":{let n="";return n+=this.renderChildren(e),this.nextFootnoteIndex>1&&(n+=this.renderNotes(e.footnotes)),n}case"para":return this.tight?`${this.renderChildren(e)}
`:this.inTags("p",e,1);case"block_quote":return this.inTags("blockquote",e,2);case"div":return this.inTags("div",e,2);case"section":return this.inTags("section",e,2);case"list_item":return this.inTags("li",e,2);case"task_list_item":return this.inTags("li",e,2,{class:e.checkbox==="checked"?"checked":"unchecked"});case"definition_list_item":return this.renderChildren(e);case"definition":return this.inTags("dd",e,2);case"term":return this.inTags("dt",e,1);case"definition_list":return this.inTags("dl",e,2);case"bullet_list":return this.inTags("ul",e,2);case"task_list":return this.inTags("ul",e,2,{class:"task-list"});case"ordered_list":{const n={};return e.start&&e.start!==1&&(n.start=e.start.toString()),e.style&&!/1/.test(e.style)&&(n.type=e.style.replace(/[().]/g,"")),this.inTags("ol",e,2,n)}case"heading":return this.inTags(`h${e.level}`,e,1);case"footnote_reference":{let n="";const s=e.text;let o=this.footnoteIndex[s];return o||(o=this.nextFootnoteIndex,this.footnoteIndex[s]=o,this.nextFootnoteIndex++),n+=this.renderTag("a",e,{id:"fnref"+o,href:"#fn"+o,role:"doc-noteref"}),n+="<sup>",n+=this.escape(o.toString()),n+="</sup></a>",n}case"table":return this.inTags("table",e,2);case"caption":{let n="";return e.children.length>0&&(n+=this.inTags("caption",e,1)),n}case"row":return this.inTags("tr",e,2);case"cell":{const n={};return e.align&&e.align!=="default"&&(n.style=`text-align: ${e.align};`),this.inTags(e.head?"th":"td",e,1,n)}case"thematic_break":{let n="";return n+=this.renderTag("hr",e),n+=`
`,n}case"code_block":{let n="";return n+=this.renderTag("pre",e),n+="<code",e.lang&&(n+=` class="language-${this.escapeAttribute(e.lang)}"`),n+=">",n+=this.escape(e.text),n+=this.renderCloseTag("code"),n+=this.renderCloseTag("pre"),n+=`
`,n}case"raw_block":{let n="";return e.format==="html"&&(n+=e.text),n}case"str":return e.attributes||e.autoAttributes?`${this.renderTag("span",e)}${this.escape(e.text)}</span>`:this.escape(e.text);case"smart_punctuation":return this.smartPunctuationMap[e.type]||e.text;case"double_quoted":{let n="";return n+=this.smartPunctuationMap.left_double_quote||'"',n+=this.renderChildren(e),n+=this.smartPunctuationMap.right_double_quote||'"',n}case"single_quoted":{let n="";return n+=this.smartPunctuationMap.left_single_quote||"'",n+=this.renderChildren(e),n+=this.smartPunctuationMap.right_single_quote||"'",n}case"symb":return this.escape(`:${e.alias}:`);case"inline_math":{let n="";return n+=this.renderTag("span",e,{class:"math inline"}),n+=`\\(${this.escape(e.text)}\\)`,n+=this.renderCloseTag("span"),n}case"display_math":{let n="";return n+=this.renderTag("span",e,{class:"math display"}),n+=`\\[${this.escape(e.text)}\\]`,n+=this.renderCloseTag("span"),n}case"verbatim":{let n="";return n+=this.renderTag("code",e),n+=this.escape(e.text),n+=this.renderCloseTag("code"),n}case"raw_inline":{let n="";return e.format==="html"&&(n+=e.text),n}case"soft_break":return`
`;case"hard_break":return`<br>
`;case"non_breaking_space":return"&nbsp;";case"link":case"image":{const n={};let s=e.destination;if(e.reference){const o=this.references[e.reference]||this.autoReferences[e.reference];if(o){if(s=o.destination,e.tag==="image"?(n.alt=(0,Vn.getStringContent)(e),n.src=s):n.href=s,o.attributes)for(const l in o.attributes)(!e.attributes||!e.attributes[l])&&(n[l]=o.attributes[l]);if(o.autoAttributes)for(const l in o.autoAttributes)(!e.autoAttributes||!e.autoAttributes[l])&&(n[l]=o.autoAttributes[l])}else this.warn(new ji.Warning(`Reference ${JSON.stringify(e.reference)} not found`,(r=e==null?void 0:e.pos)===null||r===void 0?void 0:r.end))}else e.tag==="image"?(n.alt=(0,Vn.getStringContent)(e),s!==void 0&&(n.src=s)):s!==void 0&&(n.href=s);return e.tag==="image"?this.renderTag("img",e,n):this.inTags("a",e,0,n)}case"url":case"email":{let n="";const s={};return e.tag==="email"?s.href="mailto:"+e.text:s.href=e.text,n+=this.renderTag("a",e,s),n+=this.escape(e.text),n+=this.renderCloseTag("a"),n}case"strong":return this.inTags("strong",e,0);case"emph":return this.inTags("em",e,0);case"span":return this.inTags("span",e,0);case"mark":return this.inTags("mark",e,0);case"insert":return this.inTags("ins",e,0);case"delete":return this.inTags("del",e,0);case"superscript":return this.inTags("sup",e,0);case"subscript":return this.inTags("sub",e,0);default:return""}}render(e){return this.references=e.references,this.autoReferences=e.autoReferences,this.renderAstNode(e)}}me.HTMLRenderer=qs;const Fi=function(t,e={}){return new qs(e).render(t)};me.renderHTML=Fi;var Qe={};Object.defineProperty(Qe,"__esModule",{value:!0});Qe.applyFilter=void 0;class Ui{constructor(e){this.finished=!1,this.stack=[],this.enter=!0,this.top=e,this.current=e}walk(e){for(;!this.finished;){e(this);const r=this.stack&&this.stack[this.stack.length-1];if(this.enter)"children"in this.current&&this.current.children.length>0?(this.stack.push({node:this.current,childIndex:0}),this.current=this.current.children[0],this.enter=!0):this.enter=!1;else if(r){r.childIndex++;const n=r.node.children[r.childIndex];n?(this.current=n,this.enter=!0):(this.stack.pop(),this.current=r.node,this.enter=!1)}else this.finished=!0}}}const Vi=function(t,e,r){if(!t||!t.tag)throw new Error("Filter called on a non-node.");const n=r[t.tag];if(!n)return!1;let s;if(e?"enter"in n&&n.enter&&(s=n.enter):"exit"in n&&n.exit?s=n.exit:s=n,typeof s=="function")return s(t)},gr=function(t,e){return new Ui(t).walk(r=>{let n=Vi(r.current,r.enter,e);const s=r.stack[r.stack.length-1];if(typeof n=="object"&&"stop"in n&&n.stop&&(n=n.stop,r.enter=!1),n){if(Array.isArray(n))if(s)s.node.children.splice(s.childIndex,1,...n),r.current=s.node.children[s.childIndex],n.length>1&&(s.childIndex+=n.length-1);else throw Error("Cannot replace top node with multiple nodes");else if(typeof n=="object"&&"tag"in n&&n.tag)if(s)s.node.children[s.childIndex]=n;else return n}}),t},Zi=function(t,e){const r=e();let n;Array.isArray(r)?n=r:n=[r];for(const s of n){gr(t,s);for(const o in t.footnotes)gr(t.footnotes[o],s);for(const o in t.references)gr(t.references[o],s)}};Qe.applyFilter=Zi;var fe={};Object.defineProperty(fe,"__esModule",{value:!0});fe.fromPandoc=fe.toPandoc=void 0;const Fe=ne,Le={Decimal:{Period:"1.",OneParen:"1)",TwoParens:"(1)"},LowerAlpha:{Period:"a.",OneParen:"a)",TwoParens:"(a)"},UpperAlpha:{Period:"A.",OneParen:"A)",TwoParens:"(A)"},LowerRoman:{Period:"i.",OneParen:"i)",TwoParens:"(i)"},UpperRoman:{Period:"I.",OneParen:"I)",TwoParens:"(I)"}},Ts={};for(const t in Le)for(const e in Le[t])Ts[Le[t][e]]=[t,e];const Wi=function(t){return t.t==="Para"&&(t.t="Plain"),t},Ut=function(t){const e=Object.assign(Object.assign({},t.autoAttributes),t.attributes);if(e){const r=e.id||"",n=e.class&&e.class.split(" ")||[],s=[];for(const o in e)o!==r&&o!=="class"&&s.push([o,e[o]]);return[r,n,s]}else return["",[],[]]};class Hi{constructor(e={}){this.references={},this.footnotes={},this.options=e,this.smartPunctuationMap=this.options.smartPunctuationMap||{right_single_quote:"â€™",left_single_quote:"â€˜",right_double_quote:"â€",left_double_quote:"â€œ",ellipses:"â€¦",em_dash:"â€”",en_dash:"â€“"},this.warn||(this.warn=()=>{})}toPandocChildren(e){if("children"in e){const r=[];return e.children.forEach(n=>{this.addToPandocElts(r,n)}),r}else return[]}toPandocDefinitionListItem(e){const r=this;return function(n){if(!("children"in n))return[];const[s,o]=n.children;return[r.toPandocChildren(s),[r.toPandocChildren(o)]]}}toPandocListItem(e){const r=this;return function(n){let s=r.toPandocChildren(n);return"checkbox"in n&&n.checkbox&&s[0].t==="Para"&&(n.checkbox==="checked"?s[0].c.unshift({t:"Str",c:"â˜’"},{t:"Space"}):s[0].c.unshift({t:"Str",c:"â˜"},{t:"Space"})),"tight"in e&&e.tight&&(s=s.map(Wi)),s}}addToPandocElts(e,r){switch(r.tag){case"section":case"div":{const n=Ut(r);r.tag==="section"&&n[1].unshift("section"),e.push({t:"Div",c:[n,this.toPandocChildren(r)]});break}case"block_quote":e.push({t:"BlockQuote",c:this.toPandocChildren(r)});break;case"definition_list":{const n=r.children.map(this.toPandocDefinitionListItem(r));e.push({t:"DefinitionList",c:n});break}case"task_list":case"bullet_list":{let n;n=r.children.map(this.toPandocListItem(r)),e.push({t:"BulletList",c:n});break}case"ordered_list":{const n=r.children.map(this.toPandocListItem(r)),[s,o]=Ts[r.style],l=r.start||1;e.push({t:"OrderedList",c:[[l,{t:s},{t:o}],n]});break}case"task_list_item":case"list_item":break;case"para":e.push({t:"Para",c:this.toPandocChildren(r)});break;case"heading":e.push({t:"Header",c:[r.level,Ut(r),this.toPandocChildren(r)]});break;case"code_block":{const n=Ut(r);r.lang&&n[1].unshift(r.lang),e.push({t:"CodeBlock",c:[n,r.text]});break}case"raw_block":e.push({t:"RawBlock",c:[r.format,r.text]});break;case"thematic_break":e.push({t:"HorizontalRule"});break;case"table":{const n=Ut(r),s=["",[],[]];let o=[],l=[],c=[];const h=[],m=[s,[]];let x=[],N=[];const b={left:"AlignLeft",right:"AlignRight",center:"AlignCenter",default:"AlignDefault"},q=function(A){return[{t:b[A.align]||"AlignDefault"},{t:"ColWidthDefault"}]},P=this,G=function(A){if("children"in A)return[Ut(A),{t:"align"in A&&b[A.align]||"AlignDefault"},1,1,[{t:"Plain",c:P.toPandocChildren(A)}]]},Z=function(A){if("children"in A)return[Ut(A),A.children.map(G)]};for(let A=0;A<r.children.length;A++){const O=r.children[A];if(!("children"in O))break;l.length===0&&(l=O.children.map(q)),O.tag==="caption"?O.children.length&&(o=this.toPandocChildren(O)):O.head?N.length===0?x.push(Z(O)):(h.push([s,0,x,N]),N=[],x=[Z(O)]):(h.length===0&&N.length===0&&(c=x,x=[]),N.push(Z(O)))}(x.length>0||N.length>0)&&h.push([s,0,x,N]),e.push({t:"Table",c:[n,[null,[{t:"Plain",c:o}]],l,[s,c],h,m]});break}case"raw_inline":e.push({t:"RawInline",c:[r.format,r.text]});break;case"soft_break":e.push({t:"SoftBreak"});break;case"hard_break":e.push({t:"LineBreak"});break;case"str":r.text.split(/ +/).forEach((n,s)=>{s>0&&e.push({t:"Space"}),n.length>0&&e.push({t:"Str",c:n})});break;case"verbatim":e.push({t:"Code",c:[Ut(r),r.text]});break;case"inline_math":e.push({t:"Math",c:[{t:"InlineMath"},r.text]});break;case"display_math":e.push({t:"Math",c:[{t:"DisplayMath"},r.text]});break;case"non_breaking_space":e.push({t:"Str",c:"Â "});break;case"smart_punctuation":e.push({t:"Str",c:this.smartPunctuationMap[r.type]||r.text});break;case"symb":e.push({t:"Span",c:[["",["symbol"],[["alias",r.alias]]],[{t:"Str",c:":"+r.alias+":"}]]});break;case"single_quoted":case"double_quoted":{const n={t:r.tag==="single_quoted"?"SingleQuote":"DoubleQuote"};e.push({t:"Quoted",c:[n,this.toPandocChildren(r)]});break}case"email":case"url":{let n=r.text;r.tag==="email"&&(n="mailto:"+n);const s=Ut(r);s[1].unshift(r.tag==="email"?"email":"uri"),e.push({t:"Link",c:[s,[{t:"Str",c:r.text}],[n,""]]});break}case"image":case"link":{let n=r.destination||"";const s={};if(r.reference){const m=this.references[r.reference];if(m){n=m.destination||"";const x=Object.assign(Object.assign({},m.autoAttributes),m.attributes);if(x)for(const N in x)s[N]=x[N]}else this.warn(new Fe.Warning("Reference "+r.reference+" not found."))}const o=Object.assign(Object.assign({},r.autoAttributes),r.attributes);if(o)for(const m in o)s[m]&&m==="class"?s[m]+=" "+o[m]:s[m]||(s[m]=o[m]);const l=Ut({tag:"link",attributes:s,children:[]}),c=n||"",h=r.attributes&&r.attributes.title||r.autoAttributes&&r.autoAttributes.title||"";h&&(l[2]=l[2].filter(([m,x])=>m!=="title")),e.push({t:r.tag==="link"?"Link":"Image",c:[l,this.toPandocChildren(r),[c,h]]});break}case"emph":e.push({t:"Emph",c:this.toPandocChildren(r)});break;case"strong":e.push({t:"Strong",c:this.toPandocChildren(r)});break;case"superscript":e.push({t:"Superscript",c:this.toPandocChildren(r)});break;case"subscript":e.push({t:"Subscript",c:this.toPandocChildren(r)});break;case"span":e.push({t:"Span",c:[Ut(r),this.toPandocChildren(r)]});break;case"mark":e.push({t:"Span",c:[["",["mark"],[]],this.toPandocChildren(r)]});break;case"insert":e.push({t:"Underline",c:this.toPandocChildren(r)});break;case"delete":e.push({t:"Strikeout",c:this.toPandocChildren(r)});break;case"footnote_reference":{const n=this.footnotes[r.text];n?e.push({t:"Note",c:this.toPandocChildren(n)}):e.push({t:"Superscript",c:[{t:"Str",c:r.text}]});break}default:this.warn(new Fe.Warning("Skipping unhandled node "+r.tag))}}toPandoc(e){return this.references=e.references,this.footnotes=e.footnotes,{"pandoc-api-version":[1,23],meta:{},blocks:this.toPandocChildren(e)}}}const Vt=function(t){const e={};t[0]&&(e.id=t[0]),t[1].length>0&&(e.class=t[1].join(" "));for(let r=0;r<t[2].length;r++)e[t[2][r][0].toString()]=t[2][r][1];return Object.keys(e).length===0?null:e},qr=function(t){return t.t==="Plain"||t.t==="Para"},Xi=function(t){if(!t[0])return null;const e=t[0];return qr(e)&&e.c.length>=2&&e.c[0].t==="Str"&&e.c[1].t==="Space"?e.c[0].c==="â˜’"?(e.c.shift(),e.c.shift(),"checked"):e.c[0].c==="â˜"?(e.c.shift(),e.c.shift(),"unchecked"):null:null};class Qi{constructor(e={}){this.footnotes={},this.footnoteIndex=0,this.options=e,this.warn=e.warn||(()=>{})}fromPandocInlines(e){let r=[];const n=[];for(let s=0;s<e.length;s++){const o=e[s];if(o.t==="Str")r.push(o.c);else if(o.t==="Space")r.push(" ");else switch(r.length>0&&(n.push({tag:"str",text:r.join("")}),r=[]),o.t){case"SoftBreak":n.push({tag:"soft_break"});break;case"LineBreak":n.push({tag:"hard_break"});break;case"Emph":n.push({tag:"emph",children:this.fromPandocInlines(o.c)});break;case"Strong":n.push({tag:"strong",children:this.fromPandocInlines(o.c)});break;case"Superscript":n.push({tag:"superscript",children:this.fromPandocInlines(o.c)});break;case"Subscript":n.push({tag:"subscript",children:this.fromPandocInlines(o.c)});break;case"Strikeout":n.push({tag:"delete",children:this.fromPandocInlines(o.c)});break;case"Span":{const l={tag:"span",children:this.fromPandocInlines(o.c[1])},c=Vt(o.c[0]);c&&(l.attributes=c),n.push(l);break}case"Underline":n.push({tag:"span",attributes:{class:"underline"},children:this.fromPandocInlines(o.c)});break;case"SmallCaps":n.push({tag:"span",attributes:{class:"smallcaps"},children:this.fromPandocInlines(o.c)});break;case"Math":n.push({tag:o.c[0].t==="DisplayMath"?"display_math":"inline_math",text:o.c[1]});break;case"Quoted":o.c[0].t==="SingleQuote"?n.push({tag:"single_quoted",children:this.fromPandocInlines(o.c[1])}):n.push({tag:"double_quoted",children:this.fromPandocInlines(o.c[1])});break;case"RawInline":n.push({tag:"raw_inline",format:o.c[0],text:o.c[1]});break;case"Code":{const l=Vt(o.c[0]),c={tag:"verbatim",text:o.c[1]};l&&(c.attributes=l),n.push(c);break}case"Image":case"Link":{let l=Vt(o.c[0]);o.c[2][1]&&(l=l||{},l.title=o.c[2][1]);const c=o.c[2][0],h=this.fromPandocInlines(o.c[1]);if(o.t==="Image"){const m={tag:"image",destination:c,children:h};l&&(m.attributes=l),n.push(m)}else{const m={tag:"link",destination:c,children:h};l&&(m.attributes=l),n.push(m)}break}case"Cite":n.push({tag:"span",attributes:{class:"cite"},children:this.fromPandocInlines(o.c[1])});break;case"Note":{this.footnoteIndex++;const l=this.footnoteIndex.toString(),c=o.c.map(h=>this.fromPandocBlock(h));this.footnotes[this.footnoteIndex.toString()]={tag:"footnote",label:l,children:c},n.push({tag:"footnote_reference",text:l});break}}}return r.length>0&&n.push({tag:"str",text:r.join("")}),n}fromPandocBlock(e){switch(e.t){case"Plain":case"Para":return{tag:"para",children:this.fromPandocInlines(e.c)};case"BlockQuote":return{tag:"block_quote",children:e.c.map(r=>this.fromPandocBlock(r))};case"Div":{let r=Vt(e.c[0]);const n=/\bsection\b/.test(r&&r.class||"")?"section":"div",s=e.c[1].map(o=>this.fromPandocBlock(o));if(n==="section")return r=r||{},r.class=r.class.replace(/section */,""),r.class||delete r.class,{tag:"section",attributes:r,children:s};{const o={tag:"div",children:s};return r&&(o.attributes=r),o}}case"Header":{const r=Vt(e.c[1]),n={tag:"heading",level:e.c[0],children:this.fromPandocInlines(e.c[2])};return r&&(n.attributes=r),n}case"HorizontalRule":return{tag:"thematic_break"};case"RawBlock":return{tag:"raw_block",format:e.c[0],text:e.c[1]};case"CodeBlock":{const r=Vt(e.c[0]);let n;if(r&&r.class){const o=r.class.split(/  */);n=o[0],o.shift(),o.length>0?r.class=o.join(" "):delete r.class}const s={tag:"code_block",lang:n,text:e.c[1]};return r&&(s.attributes=r),n||delete s.lang,s}case"DefinitionList":{const r=[];for(let n=0;n<e.c.length;n++){const s=e.c[n][0],o=e.c[n][1],l=this.fromPandocInlines(s),c=[];for(let h=0;h<o.length;h++)o[h].map(m=>{c.push(this.fromPandocBlock(m))});r.push({tag:"definition_list_item",children:[{tag:"term",children:l},{tag:"definition",children:c}]})}return{tag:"definition_list",children:r}}case"OrderedList":case"BulletList":{const r=[],n=[];let s=!1,o;e.t==="BulletList"?o=e.c:o=e.c[1];for(let l=0;l<o.length;l++){const c=Xi(o[l]),h=o[l].map(m=>(m.t==="Plain"?s=!0:m.t==="Para"&&(s=!1),this.fromPandocBlock(m)));c!==null?n.push({tag:"task_list_item",checkbox:c,children:h}):r.push({tag:"list_item",children:h})}if(e.t==="BulletList")return n.length>0?{tag:"task_list",tight:s,children:n}:{tag:"bullet_list",style:"-",tight:s,children:r};if(e.t==="OrderedList"){const l=e.c[0][0];let c=e.c[0][1].t;c==="DefaultStyle"&&(c="Decimal");let h=e.c[0][2].t;return h==="DefaultDelim"&&(h="Period"),{tag:"ordered_list",style:Le[c][h],start:l,tight:s,children:r}}}case"Table":{const r=Vt(e.c[0]),n=e.c[1][1],s={tag:"caption",children:[]};n.length>1||n.length===1&&!qr(n[0])?this.warn(new Fe.Warning("Skipping block-level content in table caption.")):n[0]&&"c"in n[0]&&(s.children=this.fromPandocInlines(n[0].c));const o=e.c[2],l=[];for(const b in o)l.push(o[b][0].t.slice(5).toLowerCase());const c=[],h=e.c[3][1];for(const b in h)c.push(this.fromPandocRow(h[b],!0,0,l));const m=e.c[4];for(const b in m){const q=m[b][1],P=m[b][2];for(const Z in P)c.push(this.fromPandocRow(P[Z],!0,q,l));const G=m[b][3];for(const Z in G)c.push(this.fromPandocRow(G[Z],!1,q,l))}const x=e.c[5][1];for(const b in x)c.push(this.fromPandocRow(x[b],!1,0,l));const N={tag:"table",children:[s,...c]};return r&&(N.attributes=r),N}case"Figure":{const r=Vt(e.c[0]);/\bsection\b/.test(r&&r.class||"");const n=e.c[2].map(l=>this.fromPandocBlock(l)),s=e.c[1][1];if(s.length>0){const l=s.map(c=>this.fromPandocBlock(c));n.push(...l)}const o={tag:"div",children:n};return r&&(o.attributes=r),o}case"LineBlock":{const r=[];for(let n=0;n<e.c.length;n++)n>0&&r.push({tag:"hard_break"}),r.push(...this.fromPandocInlines(e.c[n]));return{tag:"para",children:r}}case"Null":return{tag:"raw_block",format:"none",text:""}}return{tag:"raw_block",format:"error",text:"Could not convert "+e.t}}fromPandocRow(e,r,n,s){const o=Vt(e[0]),l=e[1],c=[];for(let m=0;m<l.length;m++)c.push(this.fromPandocCell(l[m],r||m<n,s[m]));const h={tag:"row",head:r,children:c};return o&&(h.attributes=o),h}fromPandocCell(e,r,n){let s=[];const o=Vt(e[0]);let l=e[1].t.slice(5).toLowerCase();l==="default"&&(l=n);const c=e[4];c.length>1||c.length===1&&!qr(c[0])?(this.warn(new Fe.Warning("Skipping table cell with block-level content.")),s=[{tag:"str",text:"((content omitted))"}]):c[0]&&(s=this.fromPandocInlines(c[0].c));const h={tag:"cell",head:r,align:l,children:s};return o&&(h.attributes=o),h}fromPandoc(e){if(typeof e!="object")throw Error("Pandoc document must be an object");if(e["pandoc-api-version"])if(e.blocks){if(!e.meta)throw Error("Pandoc document lacks meta")}else throw Error("Pandoc document lacks blocks");else throw Error("Pandoc document lacks pandoc-api-version");return{tag:"doc",children:e.blocks.map(r=>this.fromPandocBlock(r)),footnotes:this.footnotes,references:{},autoReferences:{}}}}const Yi=function(t,e){return new Hi(e).toPandoc(t)};fe.toPandoc=Yi;const Ki=function(t,e){return new Qi(e).fromPandoc(t)};fe.fromPandoc=Ki;var Ye={};Object.defineProperty(Ye,"__esModule",{value:!0});Ye.renderDjot=void 0;const oe=Et,Zn=He,Ms=function(t){const e=t.tag;return e==="space"||e==="soft_break"||e==="hard_break"},Ji=function(t){return t.children[0]&&Ms(t.children[0])},tl=function(t){return t.children[0]&&Ms(t.children[t.children.length-1])},br=function(t,e){const r=t.text.match(/(`+)/g),n={};if(r)for(const o in r)n[r[o].length]=!0;let s=e;for(;n[s];)s++;return"`".repeat(s)},Wn=function(t){if(t<0||t>=4e3)return"?";let e="";for(;t>0;)if(t>=1e3)e+="M",t-=1e3;else if(t>=900)e+="CM",t-=900;else if(t>=500)e+="D",t-=500;else if(t>=400)e+="CD",t-=400;else if(t>=100)e+="C",t-=100;else if(t>=90)e+="XC",t-=90;else if(t>=50)e+="L",t-=50;else if(t>=40)e+="XL",t-=40;else if(t>=10)e+="X",t-=10;else if(t==9)e+="IX",t-=9;else if(t>=5)e+="V",t-=5;else if(t==4)e+="IV",t-=4;else if(t>=1)e+="I",t-=1;else throw new Error("toRoman encountered x = "+t);return e},el=function(t,e){const r=e.replace(/[a-zA-Z0-9]+/g,"$"),n=e.replace(/[.()]/g,"");let s;switch(n){case"1":s=t.toString();break;case"a":s=String.fromCodePoint(96+t%26);break;case"A":s=String.fromCodePoint(64+t%26);break;case"i":s=Wn(t).toLowerCase();break;case"I":s=Wn(t);break;default:throw new Error("formatNumber encountered unknown style "+e)}return r.replace("$",s)};class rl{constructor(e,r={}){this.prefixes=[],this.buffer=[],this.startOfLine=!0,this.endOfPrefix=0,this.column=0,this.needsBlankLine=!1,this.handlers={doc:n=>{this.renderChildren(n.children),this.prefixes=[],this.cr(),Object.keys(n.references).length>0&&(this.cr(),this.newline());for(const s in n.references)this.renderNode(n.references[s]);Object.keys(n.footnotes).length>0;for(const s in n.footnotes)this.renderNode(n.footnotes[s]);this.prefixes=[],this.cr()},footnote:n=>{this.lit("[^"+n.label+"]:"),this.space(),this.needsBlankLine=!1,this.prefixes.push("  "),this.renderChildren(n.children),this.prefixes.pop(),this.blankline()},reference:n=>{this.lit("["),this.lit(n.label),this.lit("]:"),this.prefixes.push("  "),this.space(),this.lit(n.destination),this.wrap(),this.prefixes.pop(),this.blankline()},para:n=>{this.renderChildren(n.children),this.blankline()},thematic_break:()=>{this.lit("* * * * *"),this.blankline()},div:n=>{this.lit(":::"),this.cr(),this.renderChildren(n.children),this.cr(),this.lit(":::"),this.blankline()},heading:n=>{const s="#".repeat(n.level);this.lit(s+" "),this.prefixes.push(s+" "),this.renderChildren(n.children),this.prefixes.pop(),this.blankline()},block_quote:n=>{this.prefixes.push("> "),this.lit("> "),this.renderChildren(n.children),this.prefixes.pop(),this.blankline()},section:n=>{this.renderChildren(n.children)},code_block:n=>{const s=br(n,3);this.lit(s),n.lang&&this.lit(" "+n.lang),this.cr(),this.litlines(n.text),this.cr(),this.lit(s),this.blankline()},raw_block:n=>{const s=br(n,3);this.lit(s),this.lit(" ="+n.format),this.cr(),this.litlines(n.text),this.cr(),this.lit(s),this.blankline()},definition_list:n=>{const s=n.children;for(let o=0;o<s.length;o++){const l=s[o];o>0&&this.newline(),this.lit(":"),this.needsBlankLine=!1,this.space(),this.prefixes.push(" ".repeat(2)),this.renderChildren(l.children),this.prefixes.pop()}},ordered_list:n=>{const s=n.style,o=n.start||1,l=n.children,c=n.tight;for(let h=0;h<l.length;h++){const m=l[h];h>0&&(this.cr(),c||this.newline());const x=el(o+h,s);this.lit(x),this.needsBlankLine=!1,this.space(),this.prefixes.push(" ".repeat(x.length+1)),this.renderChildren(m.children),this.prefixes.pop()}c&&this.blankline()},bullet_list:n=>{const s=n.children,o=n.tight;for(let l=0;l<s.length;l++){const c=s[l];l>0&&(this.cr(),o||this.newline());const h=n.style;this.lit(h),this.needsBlankLine=!1,this.space(),this.prefixes.push(" ".repeat(h.length+1)),this.renderChildren(c.children),this.prefixes.pop()}o&&this.blankline()},task_list:n=>{const s=n.children,o=n.tight;for(let l=0;l<s.length;l++){const c=s[l];l>0&&(this.cr(),o||this.newline()),this.needsBlankLine=!1,this.lit(`- [${c.checkbox==="checked"?"X":" "}]`),this.space(),this.prefixes.push(" ".repeat(6)),this.renderChildren(c.children),this.prefixes.pop()}o&&this.blankline()},term:n=>{this.renderChildren(n.children),this.blankline()},definition:n=>{this.renderChildren(n.children)},table:n=>{const s=n.children.filter(oe.isCaption),o=n.children.filter(oe.isRow);for(let l=0;l<o.length;l++){const c=o[l];if("head"in c&&!c.head&&l>0&&o[l-1].head){const h=o[l-1];for(let m=0;m<h.children.length;m++){switch(m===0&&this.lit("|"),h&&h.children[m].align){case"left":this.lit(":--");break;case"right":this.lit("--:");break;case"center":this.lit(":-:");break;default:this.lit("---")}this.lit("|")}this.cr()}for(let h=0;h<c.children.length;h++){const m=c.children[h];h===0&&this.lit("|"),this.noWrap(()=>{m.tag==="cell"&&this.renderChildren(m.children)}),this.lit("|")}this.cr()}s.length>0&&s[0].children.length>0&&(this.newline(),this.lit("^ "),this.needsBlankLine=!1,this.prefixes.push("  "),this.renderChildren(s[0].children),this.prefixes.pop(),this.blankline()),this.blankline()},str:n=>{n.text.split(/  */).forEach((s,o)=>{o>0&&this.space(),this.out(s)})},space:()=>{this.space()},soft_break:()=>{this.soft_break()},smart_punctuation:n=>{this.lit(n.text)},non_breaking_space:()=>{this.lit("\\ ")},single_quoted:this.inlineContainer("'"),double_quoted:this.inlineContainer('"'),emph:this.inlineContainer("_"),strong:this.inlineContainer("*"),superscript:this.inlineContainer("^"),subscript:this.inlineContainer("~"),mark:this.inlineContainer("=",!0),delete:this.inlineContainer("-",!0),insert:this.inlineContainer("+",!0),footnote_reference:n=>{this.lit("[^"+n.text+"]")},symb:n=>{this.lit(":"+n.alias+":")},email:n=>{this.lit("<"+n.text+">")},url:n=>{this.lit("<"+n.text+">")},span:n=>{this.lit("["),this.renderChildren(n.children),this.lit("]")},link:n=>{this.lit("["),this.renderChildren(n.children),this.lit("]"),n.reference?(this.lit("["),n.reference!==(0,Zn.getStringContent)(n)&&this.lit(n.reference),this.lit("]")):n.destination?(this.lit("("),this.lit(n.destination),this.lit(")")):this.lit("()")},image:n=>{this.lit("!["),this.renderChildren(n.children),this.lit("]"),n.reference?(this.lit("["),n.reference!==(0,Zn.getStringContent)(n)&&this.lit(n.reference),this.lit("]")):n.destination?(this.lit("("),this.lit(n.destination),this.lit(")")):this.lit("()")},raw_inline:n=>{this.verbatimNode(n),this.lit("{="+n.format+"}")},verbatim:n=>{this.verbatimNode(n)},inline_math:n=>{this.lit("$"),this.verbatimNode(n)},display_math:n=>{this.lit("$$"),this.verbatimNode(n)}},this.doc=e,this.wrapWidth=(r==null?void 0:r.wrapWidth)||0}escape(e){return e=e.replace(/([~`'"${}[\]^<>\\*_]|-(?=-)|!(=\[)|\.(?=\.))/g,"\\$1"),(this.column===0||this.column===this.endOfPrefix)&&(e=e.replace(/^#/,"\\#")),e}out(e){this.lit(this.escape(e))}doBlankLines(){this.needsBlankLine&&(this.cr(),this.newline(),this.needsBlankLine=!1)}lit(e){this.buffer.push(e),this.column+=e.length,this.startOfLine=!1}blankline(){this.needsBlankLine=!0}newline(){if(this.endOfPrefix===this.column)for(;/  *$|^$/.test(this.buffer[this.buffer.length-1]);)this.buffer[this.buffer.length-1]=this.buffer[this.buffer.length-1].replace(/  *$/,""),this.buffer[this.buffer.length-1]===""&&this.buffer.pop();if(this.endOfPrefix=0,this.column=0,this.buffer.push(`
`),this.prefixes.length>0){for(let e=0,r=this.prefixes.length;e<r;e++)this.buffer.push(this.prefixes[e]),this.column+=this.prefixes[e].length;this.endOfPrefix=this.column}this.startOfLine=!0}cr(){this.startOfLine||this.newline()}wrap(){if(this.wrapWidth<=0)return;let e=this.buffer.length-1;if(!this.startOfLine&&this.buffer.length>0&&this.column>this.wrapWidth){let r;for(;e>=0&&(r=this.buffer[e],r!==" ");){if(/^[ \r\n]+$/.test(r))return;e--}}if(e<this.buffer.length-1){const r=this.buffer.splice(e+1);this.buffer[this.buffer.length-1]===" "&&this.buffer.pop(),this.newline(),this.startOfLine=!0;for(let n=0;n<r.length;n++)this.buffer.push(r[n]),this.column+=r[n].length,this.startOfLine=!1}}space(){this.wrap(),this.lit(" ")}soft_break(){this.wrapWidth===0?this.newline():this.space()}needsBraces(e){return Ji(e)||tl(e)||this.buffer.length>0&&/\w$/.test(this.buffer[this.buffer.length-1])}noWrap(e){const r=this.wrapWidth;this.wrapWidth=-1,e(),this.wrapWidth=r}inlineContainer(e,r){const n=this;return function(s){r=r||n.needsBraces(s),r&&n.lit("{"),n.lit(e),n.renderChildren(s.children),n.lit(e),r&&n.lit("}")}}litlines(e){const r=e.split(/\r?\n/);r[r.length-1]===""&&r.pop();for(const n of r)this.lit(n),this.cr()}verbatimNode(e){const r=br(e,1);this.lit(r),/^`/.test(e.text)&&this.lit(" "),this.lit(e.text),/`$/.test(e.text)&&this.lit(" "),this.lit(r)}renderChildren(e){for(let r=0,n=e.length;r<n;r++)this.renderNode(e[r]);e[0]&&!(0,oe.isBlock)(e[0])&&this.wrap()}renderNode(e){this.doBlankLines();const r=this.handlers[e.tag];if(r)e.attributes&&(0,oe.isBlock)(e)&&(this.renderAttributes(e),this.cr()),r(e),e.attributes&&(0,oe.isInline)(e)&&this.renderAttributes(e);else throw new Error("No renderer defined for node type "+e.tag)}renderAttributes(e){if(!e.attributes||Object.keys(e.attributes).length===0)return;const r=e.attributes;this.lit("{");let n=!0;(0,oe.isBlock)(e)&&this.prefixes.push(" ");for(const s in r){if(n||this.space(),s==="id")this.lit("#"),this.lit(r[s]);else if(s==="class"){const o=r[s].split(/  */);for(let l=0;l<o.length;l++)l>0&&this.space(),this.lit("."),this.lit(o[l])}else this.lit(s),this.lit('="'),this.out(r[s]),this.lit('"');n=!1}(0,oe.isBlock)(e)&&this.prefixes.pop(),this.lit("}")}render(){return this.renderNode(this.doc),this.buffer.join("")}}const nl=function(t,e={}){return new rl(t,e).render()};Ye.renderDjot=nl;var Ke={};Object.defineProperty(Ke,"__esModule",{value:!0});Ke.version=void 0;Ke.version="0.3.1";(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.isInline=t.isBlock=t.version=t.renderDjot=t.toPandoc=t.fromPandoc=t.applyFilter=t.HTMLRenderer=t.renderHTML=t.parseEvents=t.renderAST=t.parse=void 0;var e=He;Object.defineProperty(t,"parse",{enumerable:!0,get:function(){return e.parse}}),Object.defineProperty(t,"renderAST",{enumerable:!0,get:function(){return e.renderAST}});var r=Ne;Object.defineProperty(t,"parseEvents",{enumerable:!0,get:function(){return r.parseEvents}});var n=me;Object.defineProperty(t,"renderHTML",{enumerable:!0,get:function(){return n.renderHTML}}),Object.defineProperty(t,"HTMLRenderer",{enumerable:!0,get:function(){return n.HTMLRenderer}});var s=Qe;Object.defineProperty(t,"applyFilter",{enumerable:!0,get:function(){return s.applyFilter}});var o=fe;Object.defineProperty(t,"fromPandoc",{enumerable:!0,get:function(){return o.fromPandoc}}),Object.defineProperty(t,"toPandoc",{enumerable:!0,get:function(){return o.toPandoc}});var l=Ye;Object.defineProperty(t,"renderDjot",{enumerable:!0,get:function(){return l.renderDjot}});var c=Ke;Object.defineProperty(t,"version",{enumerable:!0,get:function(){return c.version}});var h=Et;Object.defineProperty(t,"isBlock",{enumerable:!0,get:function(){return h.isBlock}}),Object.defineProperty(t,"isInline",{enumerable:!0,get:function(){return h.isInline}})})(Bo);function sl(t,e){return $o.renderToString(t,{...e,displayMode:!0})}function xr(t,e){return al("align*",t,e)}function al(t,e,r){return sl(`\\begin{${t}}${e}\\end{${t}}`,r)}var ol=kt('<link rel="stylesheet">'),il=kt("<div><!></div>");function ll(t,e){Mr(e,!1);let r=yr(e,"question",8);Tr();var n=il();Hn(c=>{var h=ol();Xn(h,"href",js+"/katex.min.css"),ot(c,h)});var s=D(n);{var o=c=>{var h=Zt(),m=Rt(h);rr(m,()=>xr(`
        \\text{Schaumvolumen} &= \\text{Durchflussrate} \\times \\text{VerschÃ¤umungszahl} \\times \\text{Zeit} \\\\
                              &= ${r().nozzle.flowRate} \\frac{\\text{l}}{\\text{min}} \\times ${r().nozzle.foamRatio} \\times ${r().time} \\text{min} \\\\
                              &= ${r().answer} \\text{l}
    `),!1,!1),ot(c,h)},l=c=>{var h=Zt(),m=Rt(h);{var x=b=>{var q=Zt(),P=Rt(q);rr(P,()=>xr(`
        \\text{Schaummittelmenge} &= \\text{Durchflussrate} \\times \\text{Zumischrate} \\times \\text{Zeit} \\\\
                                  &= ${r().mixer.flowRate} \\frac{\\text{l}}{\\text{min}} \\times ${r().mixer.mixingRate}\\% \\times ${r().time} \\text{min} \\\\
                                  &= ${r().answer} \\text{l}
    `),!1,!1),ot(b,q)},N=b=>{var q=Zt(),P=Rt(q);{var G=Z=>{var A=Zt(),O=Rt(A);rr(O,()=>xr(`
        \\text{Zeit} &= \\frac{\\text{Schaummittelmenge}}{\\text{Durchflussrate} \\times \\text{Zumischrate}} \\\\
                     &= \\frac{${r().agentAmount}\\text{l}}{${r().mixer.flowRate} \\frac{\\text{l}}{\\text{min}}  \\times ${r().mixer.mixingRate}\\%} \\\\
                     &= \\frac{${r().agentAmount}\\text{l}}{${r().mixer.flowRate*(r().mixer.mixingRate/100)} \\frac{\\text{l}}{\\text{min}}} \\\\
                     &= ${r().answer} \\text{min}
    `),!1,!1),ot(Z,A)};Tt(P,Z=>{r().type.id==="time"&&Z(G)},!0)}ot(b,q)};Tt(m,b=>{r().type.id==="agentVolume"?b(x):b(N,!1)},!0)}ot(c,h)};Tt(s,c=>{r().type.id==="foamVolume"?c(o):c(l,!1)})}E(n),ot(t,n),Cr()}var cl=kt('<div><h4 class="font-semibold">Zeit</h4> <div><span> </span></div></div>'),ul=kt('<div><h4 class="font-semibold">Schaummittel</h4> <div><span> </span></div></div>'),hl=kt('<div class="text-center grid grid-cols-1 lg:grid-cols-3"><div><h4 class="font-semibold">Schaumstrahlrohr</h4> <div class="flex justify-center gap-2"><span> </span> <span> </span></div></div> <div><h4 class="font-semibold">Zumischer</h4> <div class="flex justify-center gap-2"><span> </span> <span> </span></div></div> <!></div>'),dl=kt('<div class="text-center">Welche Menge Schaum kann mit einem Zumischer <span class="font-semibold"> </span> und mit einem Schaumstrahlrohr <span class="font-semibold"> </span> (VerschÃ¤umungszahl <span class="font-semibold"> </span> ) bei einer <span class="font-semibold"> </span> Zumischung des Schaummittel in <span class="font-semibold"> </span> Minuten hergestellt werden?</div>'),pl=kt(`<div class="text-center">Welche Menge Schaummittel wird fÃ¼r einen Zumischer <span class="font-semibold"> </span> mit einem Schaumstrahlrohr <span class="font-semibold"> </span> (VerschÃ¤umungszahl <span class="font-semibold"> </span> )
            bei einer <span class="font-semibold"> </span> Zumischung des Schaummittel in <span class="font-semibold"> </span> Minuten benÃ¶tigt werden?</div>`),ml=kt('<div class="text-center">Nach welcher Zeit sind beim Schaumeinsatz <span class="font-semibold"> </span> Schaummittel zugemischt, wenn ein Zumischer <span class="font-semibold"> </span> mit einer Zumischrate von <span class="font-semibold"> </span> und ein Schaumstrahlrohr <span class="font-semibold"> </span> eingesetzt wird?</div>'),fl=kt('<div class="text-base lg:text-lg"><!></div>');function gl(t,e){Mr(e,!1);let r=yr(e,"question",8),n=yr(e,"compactView",8,!1);Tr();var s=fl(),o=D(s);{var l=h=>{var m=hl(),x=D(m),N=tt(D(x),2),b=D(N),q=D(b,!0);E(b);var P=tt(b,2),G=D(P);E(P),E(N),E(x);var Z=tt(x,2),A=tt(D(Z),2),O=D(A),z=D(O,!0);E(O);var W=tt(O,2),H=D(W);qt(()=>pt(H,`${r().mixer.mixingRate.toString().replace(".",",")??""}% Zumischung`)),E(W),E(A),E(Z);var U=tt(Z,2);{var At=rt=>{var nt=cl(),ht=tt(D(nt),2),mt=D(ht),wt=D(mt);E(mt),E(ht),E(nt),qt(()=>pt(wt,`${r().time??""} Minuten`)),ot(rt,nt)},_t=rt=>{var nt=ul(),ht=tt(D(nt),2),mt=D(ht),wt=D(mt);E(mt),E(ht),E(nt),qt(()=>pt(wt,`${r().agentAmount??""} Liter`)),ot(rt,nt)};Tt(U,rt=>{r().type.id!=="time"?rt(At):rt(_t,!1)})}E(m),qt(()=>{pt(q,r().nozzle.type),pt(G,`${r().nozzle.foamRatio??""} VZ`),pt(z,r().mixer.type)}),ot(h,m)},c=h=>{var m=Zt(),x=Rt(m);{var N=q=>{var P=dl(),G=tt(D(P)),Z=D(G,!0);E(G);var A=tt(G,2),O=D(A,!0);E(A);var z=tt(A,2),W=D(z,!0);E(z);var H=tt(z,2),U=D(H);qt(()=>pt(U,`${r().mixer.mixingRate.toString().replace(".",",")??""}%`)),E(H);var At=tt(H,2),_t=D(At,!0);E(At),tr(),E(P),qt(()=>{pt(Z,r().mixer.type),pt(O,r().nozzle.type),pt(W,r().nozzle.foamRatio),pt(_t,r().time)}),ot(q,P)},b=q=>{var P=Zt(),G=Rt(P);{var Z=O=>{var z=pl(),W=tt(D(z)),H=D(W,!0);E(W);var U=tt(W,2),At=D(U,!0);E(U);var _t=tt(U,2),rt=D(_t,!0);E(_t);var nt=tt(_t,2),ht=D(nt);qt(()=>pt(ht,`${r().mixer.mixingRate.toString().replace(".",",")??""}%`)),E(nt);var mt=tt(nt,2),wt=D(mt,!0);E(mt),tr(),E(z),qt(()=>{pt(H,r().mixer.type),pt(At,r().nozzle.type),pt(rt,r().nozzle.foamRatio),pt(wt,r().time)}),ot(O,z)},A=O=>{var z=Zt(),W=Rt(z);{var H=U=>{var At=ml(),_t=tt(D(At)),rt=D(_t);E(_t);var nt=tt(_t,2),ht=D(nt,!0);E(nt);var mt=tt(nt,2),wt=D(mt);qt(()=>pt(wt,`${r().mixer.mixingRate.toString().replace(".",",")??""}%`)),E(mt);var St=tt(mt,2),zt=D(St,!0);E(St),tr(),E(At),qt(()=>{pt(rt,`${r().agentAmount??""} l`),pt(ht,r().mixer.type),pt(zt,r().nozzle.type)}),ot(U,At)};Tt(W,U=>{r().type.id==="time"&&U(H)},!0)}ot(O,z)};Tt(G,O=>{r().type.id==="agentVolume"?O(Z):O(A,!1)},!0)}ot(q,P)};Tt(x,q=>{r().type.id==="foamVolume"?q(N):q(b,!1)})}ot(h,m)};Tt(o,h=>{n()?h(l):h(c,!1)})}E(s),ot(t,s),Cr()}const de=[{id:"foamVolume",name:"Schaumvolumen",answerUnit:"Liter Schaum"},{id:"agentVolume",name:"Schaummittelmenge",answerUnit:"Liter Schaummittel"},{id:"time",name:"Zeitberechnung",answerUnit:"Minuten"}],Ur=[{type:"Z2",flowRate:200},{type:"Z4",flowRate:400},{type:"Z8",flowRate:800}],Vr=[{type:"S2",flowRate:200,foamRatio:15},{type:"S4",flowRate:400,foamRatio:15},{type:"S8",flowRate:800,foamRatio:15},{type:"M2",flowRate:200,foamRatio:150},{type:"M4",flowRate:400,foamRatio:150},{type:"M8",flowRate:800,foamRatio:150}],Zr=[.1,.5,1,2,3,4,5,6],Wr=[1,2,3,4,5,6,7,8,9,10];function bl(){return[...xl(),...yl(),...wl()]}function xl(){let t=[];for(let e of Ur)for(let r of Vr)if(r.flowRate===e.flowRate)for(let n of Wr){let s={type:de[0],mixer:{...e,mixingRate:Qn(Zr)[0]},nozzle:r,time:n,answer:""};s.answer=vl(s).toString(),t=[...t,s]}return t}function yl(){let t=[];for(let e of Ur)for(let r of Vr)if(r.flowRate===e.flowRate)for(let n of Wr)for(let s of Zr){let o={type:de[1],mixer:{...e,mixingRate:s},nozzle:r,time:n,answer:""};o.answer=Cs(o).toString(),t=[...t,o]}return t}function wl(){let t=[];for(let e of Ur)for(let r of Vr)if(r.flowRate===e.flowRate)for(let n of Wr)for(let s of Zr){let o={type:de[2],mixer:{...e,mixingRate:s},nozzle:r,time:n,agentAmount:0,answer:n.toString()};o.agentAmount=Cs(o),t=[...t,o]}return t}function vl(t){return t.nozzle.flowRate*t.nozzle.foamRatio*t.time}function Cs(t){return t.mixer.flowRate*t.mixer.mixingRate*t.time/100}var kl=kt('<input class="btn" type="checkbox">'),_l=kt('<div class="grid grid-cols-1 lg:grid-cols-3 items-center gap-2"></div> <div class="flex justify-end mt-2"><label class="swap btn"><input type="checkbox"> <!> <!></label></div>',1),Al=kt('<h2 class="text-center font-semibold text-lg"> </h2>'),Sl=kt('<div class="flex-1 flex flex-col gap-2 w-full lg:w-1/2"><input class="input input-bordered text-center text-lg w-full lg:w-1/2 inline-flex self-center" type="text"> <span class="font-semibold text-center"> </span></div>'),Nl=kt('<div class="flex flex-col gap-2 w-full text-center text-success font-semibold"><div class="flex justify-center items-center min-h-12"><span class="text-lg"> </span></div> <span> </span></div>'),ql=kt('<div class="flex flex-col gap-2 w-full text-center text-error font-semibold"><div class="flex justify-center items-center min-h-12"><span class="text-lg"> </span></div> <span> </span></div>'),Tl=kt('<div class="flex flex-col justify-center gap-2"><!> <form class="flex items-center flex-col gap-2 border-t-2 border-t-base-300 p-2"><!> <div class="flex justify-center w-full lg:w-1/2 mt-3"><button class="btn btn-primary btn-outline w-full" type="submit"><!></button></div></form> <!></div>'),Ml=kt('<div class="text-center font-semibold text-lg">Kein Fragetyp ausgewÃ¤hlt!</div>'),Cl=kt('<div><div class="relative flex justify-between w-full mb-2"><h1 class="text-3xl flex-1 text-center font-semibold mb-2">Schaumquiz</h1></div> <div class="relative mb-4"><h2 class="text-center font-semibold text-2xl mb-1">Quiztyp</h2> <label class="swap btn btn-sm absolute top-0 left-0"><input type="checkbox"> <!> <!></label> <!></div> <!></div>');function Rl(t,e){Mr(e,!1);const r=se(),n=se(),s=se(),o=[];let l=se(!0),c=se(!1);const h=Qn(bl());let m=se(""),x=se(!1);function N(){jt(x,!0)}function b(){jt(m,""),jt(x,!1),jt(n,[...at(n).slice(1)])}er(()=>de,()=>{jt(r,[...de.map(rt=>rt.id)])}),er(()=>at(r),()=>{jt(n,h.filter(rt=>at(r).includes(rt.type.id)))}),er(()=>at(n),()=>{jt(s,at(n)[0])}),Ps(),Tr();var q=Cl();Hn(rt=>{$s.title=` Schaumquiz - ${Os??""} `});var P=tt(D(q),2),G=tt(D(P),2),Z=D(G);Me(Z);var A=tt(Z,2);Te(A,{class:"swap-on",icon:"bx:right-arrow"});var O=tt(A,2);Te(O,{class:"swap-off",icon:"bx:up-arrow"}),E(G);var z=tt(G,2);{var W=rt=>{var nt=_l(),ht=Rt(nt);Bs(ht,5,()=>de,Ls,(Q,X)=>{var j=kl();Me(j);var Xt;qt(()=>{Xn(j,"aria-label",at(X).name),Xt!==(Xt=at(X).id)&&(j.value=(j.__value=at(X).id)==null?"":at(X).id)}),Es(o,[],j,()=>(at(X).id,at(r)),R=>jt(r,R)),ot(Q,j)}),E(ht);var mt=tt(ht,2),wt=D(mt),St=D(wt);Me(St);var zt=tt(St,2);Te(zt,{class:"swap-on",icon:"solar:text-bold"});var he=tt(zt,2);Te(he,{class:"swap-off",icon:"octicon:number-16"}),E(wt),E(mt),Xr(St,()=>at(c),Q=>jt(c,Q)),ot(rt,nt)},H=rt=>{var nt=Zt(),ht=Rt(nt);{var mt=wt=>{var St=Al(),zt=D(St,!0);E(St),qt(()=>pt(zt,at(s).type.name)),ot(wt,St)};Tt(ht,wt=>{at(s)&&wt(mt)})}ot(rt,nt)};Tt(z,rt=>{at(l)?rt(H,!1):rt(W)})}E(P);var U=tt(P,2);{var At=rt=>{var nt=Tl(),ht=D(nt);gl(ht,{get question(){return at(s)},get compactView(){return at(c)}});var mt=tt(ht,2),wt=D(mt);{var St=vt=>{var st=Sl(),re=D(st);Me(re);var Qt=tt(re,2),Dt=D(Qt,!0);E(Qt),E(st),qt(()=>pt(Dt,at(s).type.answerUnit)),zs(re,()=>at(m),$t=>jt(m,$t)),ot(vt,st)},zt=vt=>{var st=Zt(),re=Rt(st);{var Qt=$t=>{var w=Nl(),v=D(w),S=D(v),g=D(S,!0);E(S),E(v);var p=tt(v,2),C=D(p,!0);E(p),E(w),qt(()=>{pt(g,at(m)),pt(C,at(s).type.answerUnit)}),ot($t,w)},Dt=$t=>{var w=ql(),v=D(w),S=D(v),g=D(S,!0);E(S),E(v);var p=tt(v,2),C=D(p,!0);E(p),E(w),qt(()=>{pt(g,at(m)),pt(C,at(s).type.answerUnit)}),ot($t,w)};Tt(re,$t=>{at(s).answer===at(m)?$t(Qt):$t(Dt,!1)})}ot(vt,st)};Tt(wt,vt=>{at(x)?vt(zt,!1):vt(St)})}var he=tt(wt,2),Q=D(he),X=D(Q);{var j=vt=>{var st=Hr("WÃ¤hlen");ot(vt,st)},Xt=vt=>{var st=Hr("Weiter");ot(vt,st)};Tt(X,vt=>{at(x)?vt(Xt,!1):vt(j)})}E(Q),E(he),E(mt);var R=tt(mt,2);{var Je=vt=>{ll(vt,{get question(){return at(s)}})};Tt(R,vt=>{at(x)&&vt(Je)})}E(nt),Is("click",Q,Ds(()=>at(x)?b():N())),ot(rt,nt)},_t=rt=>{var nt=Ml();ot(rt,nt)};Tt(U,rt=>{at(n).length>0?rt(At):rt(_t,!1)})}E(q),Xr(Z,()=>at(l),rt=>jt(l,rt)),ot(t,q),Cr()}export{Rl as component};
