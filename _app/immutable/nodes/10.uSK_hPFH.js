import{s as T,a as b,t as m,c as wt,h as At,e as x}from"../chunks/disclose-version.BWTWBhB4.js";import{i as bt,P as jt}from"../chunks/public.Dj7Vthdi.js";import{p as ft,c as r,s as i,r as a,t as rt,a as mt,a0 as Ft,b as s,g as e,a5 as Pt,a1 as Mt,n as st,m as j,f as L,$ as Wt,a3 as Ct}from"../chunks/runtime.BtXH3TXM.js";import{p as dt,i as I}from"../chunks/props.CqWHPKN1.js";import{e as kt,i as qt}from"../chunks/each.DRxh5sp6.js";import{s as pt,I as gt,r as at,a as Ht}from"../chunks/Icon.BPb3u_LU.js";import{a as It,c as Et,b as Nt}from"../chunks/input.cFgeiN8w.js";import{s as Ot,b as J,a as ht}from"../chunks/store.5iZEm9oW.js";import{a as xt}from"../chunks/helper.CMGnaNZv.js";import{c as vt}from"../chunks/data.CxUiFjb2.js";import{d as K,f as Rt,q as yt}from"../chunks/stores.TwdxsUJJ.js";import{Q as St}from"../chunks/Question.D64lub_a.js";import{b as $t}from"../chunks/paths.tV83-FO2.js";var Bt=m('<a class="flex items-center gap-1 bg-base-200 rounded-md p-1" target="_blank"><!> <div class="flex flex-1 flex-col text-left"><h3 class="font-semibold mb-1"> </h3> <div class="p-2 pt-0 pl-1 text-sm"><span class="font-semibold mr-1">Antwort:</span> </div></div></a>');function Dt(U,F){ft(F,!1);let w=dt(F,"question",8),l=dt(F,"answer",8);bt();var z=Bt(),E=r(z);{var c=o=>{gt(o,{class:"rounded-full border border-base-200 w-6 h-6 text-success",icon:"carbon:checkmark-filled"})},f=o=>{gt(o,{class:"rounded-full border border-base-200 w-6 h-6 text-error",icon:"carbon:close-filled"})};I(E,o=>{var P;((P=w().choices.find(N=>N.answer))==null?void 0:P.text)===l()?o(c):o(f,!1)})}var y=i(E,2),u=r(y),p=r(u,!0);a(u);var _=i(u,2),g=i(r(_),1,!0);a(_),a(y),a(z),rt(()=>{pt(z,"href",$t+`/search#${w().id}`),T(p,w().question),T(g,l().length>0?l():"-")}),b(U,z),mt()}var Lt=m('<div class="text-center">&vellip;</div>'),Ut=m('<div><div class="mb-4 grid grid-cols-1 lg:grid-cols-3 items-end gap-4"><div><div class="text-lg font-bold text-center"> </div> <h3 class="text-sm font-semibold text-center opacity-70">Fragen</h3></div> <div class="inline-flex flex-col gap-2"><div class="radial-progress self-center text-primary font-bold" role="progressbar"></div> <h3 class="text-sm font-semibold text-center opacity-70">richtige Antworten</h3></div> <div><div class="text-lg font-bold text-center"> </div> <h3 class="text-sm font-semibold text-center opacity-70">falsche Antworten</h3></div></div> <div class="divider"></div> <div class="flex justify-center items-center relative mb-2"><h2 class="text-xl font-semibold text-center text-primary">Fragen</h2> <label class="absolute right-0 flex items-center gap-2 text-sm">nur Falsche <input class="toggle toggle-sm toggle-primary" type="checkbox"></label></div> <div class="flex flex-col gap-2 mb-2"><!></div></div>');function Zt(U,F){ft(F,!1);const w=j();let l=dt(F,"questions",8),z=l().reduce((t,n)=>{var v;return((v=n.question.choices.find(A=>A.answer))==null?void 0:v.text)===n.answer?t+1:t},0),E=Math.round(z/l().length*100),c=j(!0);Ft(()=>(Pt(l()),e(c)),()=>{s(w,l().filter(t=>{var n;return e(c)?((n=t.question.choices.find(v=>v.answer))==null?void 0:n.text)!==t.answer:!0}))}),Mt(),bt();var f=Ut(),y=r(f),u=r(y),p=r(u),_=r(p,!0);a(p),st(2),a(u);var g=i(u,2),o=r(g);pt(o,"style",`--value:${E};`),o.textContent=`${E}%`,st(2),a(g);var P=i(g,2),N=r(P),V=r(N,!0);a(N),st(2),a(P),a(y);var Z=i(y,4),X=i(r(Z),2),$=i(r(X));at($),a(X),a(Z);var B=i(Z,2),nt=r(B);{var it=t=>{var n=wt(),v=L(n);kt(v,1,()=>e(w),qt,(A,O)=>{Dt(A,{get question(){return e(O).question},get answer(){return e(O).answer}})}),b(t,n)},ot=t=>{var n=Lt();b(t,n)};I(nt,t=>{e(w).length>0?t(it):t(ot,!1)})}a(B),a(f),rt(()=>{T(_,l().length),T(V,l().length-z)}),It($,()=>e(c),t=>s(c,t)),b(U,f),mt()}var Gt=m('<label class="flex items-center gap-2 p-2 bg-base-200 rounded-md cursor-pointer select-none"><input class="checkbox checkbox-primary bg-base-100 rounded-full" type="checkbox"> </label>'),Jt=m('<button class="btn btn-primary w-[50%]" type="button">Start</button>'),Kt=m('<button class="btn w-[50%]" type="button" disabled>Start</button>'),Tt=m('<div class="flex flex-col gap-2 mb-4"><div><h3 class="font-semibold mb-2">Anzahl Fragen</h3> <div class="join"><button class="join-item btn btn-sm" type="button">Min</button> <button class="join-item btn btn-sm" type="button">-1</button> <input class="join-item input input-bordered input-sm w-full lg:w-auto text-center" type="number"> <button class="join-item btn btn-sm" type="button">+1</button> <button class="join-item btn btn-sm" type="button">+5</button></div></div> <div><h3 class="font-semibold mb-2">Fragenkataloge</h3> <div class="flex flex-col gap-2"><div class="grid grid-cols-1 lg:grid-cols-2 gap-2 mb-2"><label class="flex items-center gap-2 p-2 bg-base-200 rounded-md cursor-pointer select-none"><input class="checkbox checkbox-primary rounded-full bg-base-100" type="checkbox"> Alle</label></div> <div class="grid grid-cols-1 lg:grid-cols-2 gap-2"></div></div></div></div> <div class="flex justify-center mb-4"><!></div>',1),Vt=m('<button class="btn btn-primary" type="button">Weiter</button>'),Xt=m('<button class="btn btn-primary" type="button">Wählen</button>'),Yt=m('<button class="btn btn-primary btn-outline" type="button">Wählen</button>'),te=m('<!> <div class="grid grid-cols-2 gap-2 w-full mt-2 mb-4"><button class="btn btn-outline btn-error" type="button">Abbrechen</button> <!></div>',1),ee=m('<!> <div class="grid grid-cols-2 gap-2 w-full mb-4"><button class="btn btn-error btn-outline" type="button">Zurück</button> <button class="btn btn-primary" type="button">Erneut</button></div>',1),se=m("<!> <!>",1),ae=m('<div><h1 class="text-3xl text-center font-semibold mb-2">Quiz</h1> <!></div>');function _e(U,F){ft(F,!1);const w=Ot(),l=()=>ht(K,"$quizQuestions",w),z=()=>ht(yt,"$quizHistory",w),E=[];let c=j(15),f=j([]),y=j(!1),u=j(void 0),p=[],_=j(),g=j(!1),o=j(!1);l().length>0&&(p=[...l().filter(t=>!t.answered).map(t=>t.question)],p.length>0?(s(u,p.shift()),s(_,""),s(g,!1),s(y,!0),s(o,!1)):J(K,[]));function P(){let t=Rt.filter(n=>e(f).includes(n.catalog)).map(n=>({...n,choices:xt(n.choices)}));xt(t),p=t.slice(0,e(c)),J(K,[...p].map(n=>({question:n,answer:"",answered:!1}))),s(g,!1),s(_,""),s(u,p.shift()),s(y,!0),s(o,!1)}function N(){s(g,!1),s(_,""),p.length>0?s(u,p.shift()):s(o,!0)}function V(){if(e(u)){J(yt,[{question:e(u),answer:e(_),date:new Date,type:"quiz"},...z()]);let t=l().find(n=>{var v;return n.question.id===((v=e(u))==null?void 0:v.id)});t.answer=e(_),t.answered=!0,J(K,l())}s(g,!0),N()}function Z(){s(y,!1),s(g,!1),s(o,!1),J(K,[])}function X(){e(f).length>0?s(f,[]):s(f,vt.map(t=>t.name))}function $(t){e(c)+t>0?s(c,e(c)+t):s(c,1)}bt();var B=ae();At(t=>{Wt.title=`Quiz - ${jt??""}`});var nt=i(r(B),2);{var it=t=>{var n=Tt(),v=L(n),A=r(v),O=i(r(A),2),Y=r(O),k=i(Y,2),q=i(k,2);at(q),pt(q,"min",1);var M=i(q,2),D=i(M,2);a(O),a(A);var W=i(A,2),R=i(r(W),2),S=r(R),tt=r(S),h=r(tt);at(h),st(),a(tt),a(S);var C=i(S,2);kt(C,5,()=>vt,qt,(d,Q)=>{var ut=Gt(),G=r(ut);at(G);var _t,Qt=i(G);a(ut),rt(()=>{_t!==(_t=e(Q).name)&&(G.value=(G.__value=e(Q).name)==null?"":e(Q).name),T(Qt,` ${e(Q).name??""}`)}),Et(E,[],G,()=>(e(Q).name,e(f)),zt=>s(f,zt)),b(d,ut)}),a(C),a(R),a(W),a(v);var et=i(v,2),lt=r(et);{var ct=d=>{var Q=Jt();x("click",Q,P),b(d,Q)},H=d=>{var Q=Kt();b(d,Q)};I(lt,d=>{e(f).length>0&&e(c)>0?d(ct):d(H,!1)})}a(et),rt(()=>Ht(h,vt.length===e(f).length)),x("click",Y,()=>s(c,1)),x("click",k,()=>$(-1)),Nt(q,()=>e(c),d=>s(c,d)),x("click",M,()=>$(1)),x("click",D,()=>$(5)),x("click",h,X),b(t,n)},ot=t=>{var n=se(),v=L(n);{var A=k=>{var q=te(),M=L(q);St(M,{get question(){return e(u)},get answer(){return e(_)},set answer(h){s(_,h)},$$legacy:!0});var D=i(M,2),W=r(D),R=i(W,2);{var S=h=>{var C=Vt();x("click",C,N),b(h,C)},tt=h=>{var C=wt(),et=L(C);{var lt=H=>{var d=Xt();x("click",d,V),b(H,d)},ct=H=>{var d=Yt();x("click",d,V),b(H,d)};I(et,H=>{e(_).length>0?H(lt):H(ct,!1)})}b(h,C)};I(R,h=>{e(g)?h(S):h(tt,!1)})}a(D),x("click",W,()=>s(o,!0)),b(k,q)};I(v,k=>{e(u)&&!e(o)&&k(A)})}var O=i(v,2);{var Y=k=>{var q=ee(),M=L(q),D=Ct(()=>[...l()]);Zt(M,{get questions(){return e(D)}});var W=i(M,2),R=r(W),S=i(R,2);a(W),x("click",R,Z),x("click",S,P),b(k,q)};I(O,k=>{e(o)&&k(Y)})}b(t,n)};I(nt,t=>{e(y)?t(ot,!1):t(it)})}a(B),b(U,B),mt()}export{_e as component};
