import{e as $,a as m,t as _,s as ve,h as Le,c as $e}from"../chunks/disclose-version.BWTWBhB4.js";import{i as xe,P as Pe}from"../chunks/public.Dj7Vthdi.js";import{p as ke,c as n,g as e,s as u,r,t as D,a as ye,a0 as pe,a1 as ze,b as c,$ as Ae,m as j,f as be,n as he,a4 as Ee}from"../chunks/runtime.BtXH3TXM.js";import{p as Ie,i as C}from"../chunks/props.CqWHPKN1.js";import{I as R,b as U,s as Z}from"../chunks/Icon.BPb3u_LU.js";import{s as We,b as y,a as ne}from"../chunks/store.5iZEm9oW.js";import{t as oe,a as ie,c as N,b as je,f as De}from"../chunks/stores.TwdxsUJJ.js";import{c as _e}from"../chunks/data.CxUiFjb2.js";import{Q as Me}from"../chunks/Question.D64lub_a.js";import{Q as Se}from"../chunks/QuestionDisplay.CmF-OlKN.js";import{e as Te,i as Fe}from"../chunks/each.DRxh5sp6.js";import{c as He,o as Ne}from"../chunks/index-client.C__TUGa-.js";import{a as le}from"../chunks/helper.CMGnaNZv.js";import{Q as Re}from"../chunks/QuestionHelp.DK4dt6bz.js";import{B as Ue}from"../chunks/BookmarkButton.hB3wrEth.js";var Ze=_('<div class="text-success"><!></div>'),Ge=_('<button class="btn btn-primary btn-outline btn-square"><!></button>'),Je=_('<progress class="progress progress-success"></progress>'),Ke=_('<progress class="progress progress-primary"></progress>'),Oe=_('<div class="bg-base-200 p-2 rounded-md flex flex-row items-center gap-2"><!> <div class="flex-1"><h3 class="font-semibold text-left break-words min-w-0"> </h3> <!></div> <button class="btn btn-ghost text-primary"><!></button></div>'),Ve=_('<div class="grid grid-cols-1 lg:grid-cols-3 gap-2"></div>');function Xe(ce,G){ke(G,!1);let A=Ie(G,"chapters",8);const g=He();function J(L){g("select",{name:L})}function B(L){g("reset",{name:L})}xe();var w=Ve();Te(w,5,A,Fe,(L,x)=>{var s=Oe(),o=n(s);{var i=p=>{var l=Ze(),S=n(l);R(S,{class:"btn-square p-2.5",icon:"mdi:check"}),r(l),m(p,l)},q=p=>{var l=Ge(),S=n(l);R(S,{icon:"carbon:play-filled-alt"}),r(l),$("click",l,()=>J(e(x).name)),m(p,l)};C(o,p=>{e(x).questions.length===e(x).length?p(i):p(q,!1)})}var k=u(o,2),E=n(k),de=n(E,!0);r(E);var K=u(E,2);{var ue=p=>{var l=Je();D(()=>{U(l,e(x).questions.length),Z(l,"max",e(x).length)}),m(p,l)},O=p=>{var l=Ke();D(()=>{U(l,e(x).questions.length),Z(l,"max",e(x).length)}),m(p,l)};C(K,p=>{e(x).questions.length===e(x).length?p(ue):p(O,!1)})}r(k);var M=u(k,2),V=n(M);R(V,{icon:"material-symbols:refresh"}),r(M),r(s),D(()=>ve(de,e(x).name)),$("click",M,()=>B(e(x).name)),m(L,s)}),r(w),m(ce,w),ye()}var Ye=_('<div class="flex justify-center px-2 mb-2"><div class="flex items-center gap-2 p-2 bg-base-200 rounded-md w-full lg:w-1/3"><button class="btn btn-primary btn-square btn-outline" type="button"><!></button> <div class="flex-1"><h3 class="font-semibold text-left break-words min-w-0">Lesezeichen</h3> <progress class="progress progress-primary"></progress></div> <button class="btn btn-ghost text-primary"><!></button></div></div> <div class="divider"></div>',1),et=_('<div class="mb-2"><h2 class="text-lg font-semibold">Fortschritt</h2> <div class="text-sm"><span class="font-bold"> </span> von <span class="font-bold"> </span> Abschnitten abgeschlossen</div> <progress class="progress progress-primary"></progress></div> <div class="divider font-bold">Abschnitte</div> <!> <!>',1),tt=_('<div class="mb-2"><!></div>'),st=_('<button class="btn btn-success">Weiter</button>'),at=_('<button class="btn btn-primary btn-outline">Wählen</button>'),rt=_('<button class="btn btn-primary">Wählen</button>'),nt=_('<div class="mt-3"><!></div>'),ot=_('<div><div class="mb-3"><h2 class="text-sm flex-1 text-center text-primary font-semibold mb-2"> </h2> <div class="w-[80%] mx-auto"><progress class="progress progress-primary"></progress></div></div> <!> <div class="grid grid-cols-2 gap-2"><button class="btn btn-error btn-outline">Zurück</button> <!></div> <!></div>'),it=_('<div><div class="relative flex justify-between w-full mb-2"><h1 class="text-3xl flex-1 text-center font-semibold mb-2">Training</h1> <!></div> <!></div>');function Ct(ce,G){ke(G,!1);const A=We(),g=()=>ne(oe,"$trainingChapters",A),J=()=>ne(ie,"$trainingLastChapter",A),B=()=>ne(N,"$trainedBookmarks",A),w=()=>ne(je,"$bookmarks",A),L=j(),x=j(),s=j();g().length<=0&&y(oe,_e.map(t=>({name:t.name,questions:[],length:t.questions.length})));let o=[],i=j(void 0),q=j(""),k=j(!1);Ne(()=>{J()&&V(new CustomEvent("",{detail:{name:J()}}))});function E(){if(c(k,!0),!e(i))return;let t=e(i).choices.find(a=>a.answer);t&&e(s)&&o&&(t.text===e(q)?e(s).name==="Lesezeichen"?(Ee(s,e(s).questions=[...e(s).questions,e(i).id]),y(N,[...B(),e(i)]),y(N,B())):(g().find(a=>{var d;return a.name===((d=e(s))==null?void 0:d.name)}).questions=[...e(s).questions,e(i).id],y(oe,g())):o=[...o,e(i)]),c(s,e(s))}function de(){!o||o.length<=0||(o=[...o.slice(1)],o.length>0?(c(i,o==null?void 0:o.at(0)),c(q,""),c(k,!1)):K())}function K(){c(s,null),c(q,""),c(k,!1),o=[],c(i,void 0),y(ie,"")}function ue(){e(s)&&(e(s).questions.length===e(s).length&&l(e(s).name),o=S(e(s)),c(i,o==null?void 0:o.at(0)))}function O(){B().length===w().length&&y(N,[]),c(s,{name:"Lesezeichen",questions:[...B()],length:w().length}),y(ie,"Lesezeichen"),o=le(w().filter(t=>!B().includes(t.id)).map(t=>({...t,choices:le(t.choices)}))),c(i,o==null?void 0:o.at(0))}function M(){y(N,[])}function V(t){var d;if(!t.detail.name){c(s,null);return}if(t.detail.name==="Lesezeichen"){O();return}let a=g().find(f=>f.name===t.detail.name);if(!a){c(s,null);return}c(s,a),y(ie,(d=e(s))==null?void 0:d.name),ue()}function p(t){t.detail.name&&l(t.detail.name)}function l(t){let a=g().find(d=>d.name===t);a&&(a.questions=[],y(oe,g()))}function S(t){var d;if(!t)return null;let a=(d=_e.find(f=>f.name===t.name))==null?void 0:d.questions;return!a||(a==null?void 0:a.length)<=0?null:(a=a.filter(f=>!t.questions.includes(f.id)).map(f=>({...f,choices:le(f.choices)})),le(a))}pe(()=>g(),()=>{c(L,g().reduce((t,a)=>a.questions.length===a.length?t+1:t,0))}),pe(()=>g(),()=>{c(x,g().reduce((t,a)=>t+a.questions.length,0))}),pe(()=>{},()=>{c(s,null)}),ze(),xe();var fe=it();Le(t=>{Ae.title=`Training - ${Pe??""}`});var me=n(fe),Ce=u(n(me),2);{var we=t=>{Ue(t,{class:"absolute right-2 lg:right-0",get question(){return e(i)}})};C(Ce,t=>{e(i)&&t(we)})}r(me);var qe=u(me,2);{var Qe=t=>{var a=et(),d=be(a),f=u(n(d),2),T=n(f),X=n(T,!0);r(T);var F=u(T,2),Y=n(F,!0);r(F),he(),r(f);var ee=u(f,2);r(d);var I=u(d,4);{var te=H=>{var se=Ye(),ae=be(se),re=n(ae),v=n(re),b=n(v);R(b,{icon:"carbon:play-filled-alt"}),r(v);var Q=u(v,2),W=u(n(Q),2);r(Q);var P=u(Q,2),h=n(P);R(h,{icon:"material-symbols:refresh"}),r(P),r(re),r(ae),he(2),D(()=>{U(W,B().length),Z(W,"max",w().length)}),$("click",v,O),$("click",P,M),m(H,se)};C(I,H=>{w().length>0&&H(te)})}var ge=u(I,2);Xe(ge,{get chapters(){return g()},$$events:{select:V,reset:p}}),D(()=>{ve(X,e(L)),ve(Y,g().length),U(ee,e(x)),Z(ee,"max",De.length)}),m(t,a)},Be=t=>{var a=ot(),d=n(a),f=n(d),T=n(f,!0);r(f);var X=u(f,2),F=n(X);r(X),r(d);var Y=u(d,2);{var ee=v=>{var b=tt(),Q=n(b);{var W=h=>{Se(h,{get question(){return e(i)},get answer(){return e(q)},showCatalog:!1})},P=h=>{Me(h,{get question(){return e(i)},showCatalog:!1,get answer(){return e(q)},set answer(z){c(q,z)},$$legacy:!0})};C(Q,h=>{e(k)?h(W):h(P,!1)})}r(b),m(v,b)};C(Y,v=>{e(i)&&v(ee)})}var I=u(Y,2),te=n(I),ge=u(te,2);{var H=v=>{var b=st();$("click",b,de),m(v,b)},se=v=>{var b=$e(),Q=be(b);{var W=h=>{var z=at();$("click",z,E),m(h,z)},P=h=>{var z=rt();$("click",z,E),m(h,z)};C(Q,h=>{e(q)===""?h(W):h(P,!1)})}m(v,b)};C(ge,v=>{e(k)?v(H):v(se,!1)})}r(I);var ae=u(I,2);{var re=v=>{var b=nt(),Q=n(b);Re(Q,{get question(){return e(i)}}),r(b),m(v,b)};C(ae,v=>{e(i)&&e(k)&&v(re)})}r(a),D(()=>{ve(T,e(s).name),U(F,e(s).questions.length),Z(F,"max",e(s).length)}),$("click",te,K),m(t,a)};C(qe,t=>{e(s)?t(Be,!1):t(Qe)})}r(fe),m(ce,fe),ye()}export{Ct as component};
