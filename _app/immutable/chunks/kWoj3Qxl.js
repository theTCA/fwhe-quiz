import{z as P,a2 as M,a8 as m,a3 as L,C as A,R as T,y as g,M as N,ab as B,U as k,k as F,H as U,E as Y,I as C,J as K,K as $,F as z,L as I,h as R,_ as H,g as b,x as j,ac as q,b as w,ad as G,ae as J,af as V,i as Z,ag as Q,ah as W,ai as X,u as ee,aj as te,ak as se,V as re,al as ae,am as ne,S as ie,an as fe}from"./DN6A0naj.js";import{s as ue,g as ce}from"./DWi8nBnj.js";class oe{anchor;#t=new Map;#s=new Map;#e=new Map;#r=new Set;#a=!0;constructor(e,r=!0){this.anchor=e,this.#a=r}#n=()=>{var e=P;if(this.#t.has(e)){var r=this.#t.get(e),s=this.#s.get(r);if(s)M(s),this.#r.delete(r);else{var i=this.#e.get(r);i&&(this.#s.set(r,i.effect),this.#e.delete(r),i.fragment.lastChild.remove(),this.anchor.before(i.fragment),s=i.effect)}for(const[n,a]of this.#t){if(this.#t.delete(n),n===e)break;const f=this.#e.get(a);f&&(m(f.effect),this.#e.delete(a))}for(const[n,a]of this.#s){if(n===r||this.#r.has(n))continue;const f=()=>{if(Array.from(this.#t.values()).includes(n)){var c=document.createDocumentFragment();B(a,c),c.append(A()),this.#e.set(n,{effect:a,fragment:c})}else m(a);this.#r.delete(n),this.#s.delete(n)};this.#a||!s?(this.#r.add(n),L(a,f,!1)):f()}}};#i=e=>{this.#t.delete(e);const r=Array.from(this.#t.values());for(const[s,i]of this.#e)r.includes(s)||(m(i.effect),this.#e.delete(s))};ensure(e,r){var s=P,i=k();if(r&&!this.#s.has(e)&&!this.#e.has(e))if(i){var n=document.createDocumentFragment(),a=A();n.append(a),this.#e.set(e,{effect:T(()=>r(a)),fragment:n})}else this.#s.set(e,T(()=>r(this.anchor)));if(this.#t.set(s,e),i){for(const[f,u]of this.#s)f===e?s.unskip_effect(u):s.skip_effect(u);for(const[f,u]of this.#e)f===e?s.unskip_effect(u.effect):s.skip_effect(u.effect);s.oncommit(this.#n),s.ondiscard(this.#i)}else g&&(this.anchor=N),this.#n()}}function ve(t,e,r=!1){g&&U();var s=new oe(t),i=r?Y:0;function n(a,f){if(g){const c=C(t)===K;if(a===c){var u=$();z(u),s.anchor=u,I(!1),s.ensure(a,f),I(!0);return}}s.ensure(a,f)}F(()=>{var a=!1;e((f,u=!0)=>{a=!0,n(u,f)}),a||n(!1,null)},i)}let v=!1,S=Symbol();function be(t,e,r){const s=r[e]??={store:null,source:H(void 0),unsubscribe:R};if(s.store!==t&&!(S in r))if(s.unsubscribe(),s.store=t??null,t==null)s.source.v=void 0,s.unsubscribe=R;else{var i=!0;s.unsubscribe=ue(t,n=>{i?s.source.v=n:w(s.source,n)}),i=!1}return t&&S in r?ce(t):b(s.source)}function pe(t,e){return t.set(e),e}function me(){const t={};function e(){j(()=>{for(var r in t)t[r].unsubscribe();q(t,S,{enumerable:!1,value:!0})})}return[t,e]}function ge(t,e,r){return t.set(r),e}function le(t){var e=v;try{return v=!1,[t(),v]}finally{v=e}}const de={get(t,e){if(!t.exclude.includes(e))return t.props[e]},set(t,e){return!1},getOwnPropertyDescriptor(t,e){if(!t.exclude.includes(e)&&e in t.props)return{enumerable:!0,configurable:!0,value:t.props[e]}},has(t,e){return t.exclude.includes(e)?!1:e in t.props},ownKeys(t){return Reflect.ownKeys(t.props).filter(e=>!t.exclude.includes(e))}};function Se(t,e,r){return new Proxy({props:t,exclude:e},de)}function ye(t,e,r,s){var i=(r&X)!==0,n=(r&ae)!==0,a=s,f=!0,u=()=>(f&&(f=!1,a=n?ee(s):s),a),c;if(i){var x=ie in t||fe in t;c=G(t,e)?.set??(x&&e in t?o=>t[e]=o:void 0)}var l,y=!1;i?[l,y]=le(()=>t[e]):l=t[e],l===void 0&&s!==void 0&&(l=u(),c&&(J(),c(l)));var d;if(d=()=>{var o=t[e];return o===void 0?u():(f=!0,o)},(r&V)===0)return d;if(c){var D=t.$$legacy;return(function(o,h){return arguments.length>0?((!h||D||y)&&c(h?d():o),o):d()})}var p=!1,_=((r&te)!==0?se:re)(()=>(p=!1,d()));i&&b(_);var O=Q;return(function(o,h){if(arguments.length>0){const E=h?b(_):i?Z(o):o;return w(_,E),p=!0,a!==void 0&&(a=E),o}return ne&&p||(O.f&W)!==0?_.v:b(_)})}export{oe as B,be as a,pe as b,ge as c,ve as i,ye as p,Se as r,me as s};
